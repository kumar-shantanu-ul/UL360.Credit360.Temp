-- Please update version.sql too -- this keeps clean builds in sync
define version=51
@update_header


ALTER TABLE IND_TEMPLATE ADD (
	ONGOING_PERIOD         NUMBER(10, 0)
);

ALTER TABLE ROOT_IND_TEMPLATE_INSTANCE DROP CONSTRAINT RefIND161
;

ALTER TABLE ROOT_IND_TEMPLATE_INSTANCE ADD CONSTRAINT RefIND161 
    FOREIGN KEY (APP_SID, IND_SID)
    REFERENCES CSR.IND(APP_SID, IND_SID)
;

ALTER TABLE PROJECT_IND_TEMPLATE_INSTANCE DROP CONSTRAINT RefIND157 
;

ALTER TABLE PROJECT_IND_TEMPLATE_INSTANCE ADD CONSTRAINT RefIND157 
    FOREIGN KEY (APP_SID, IND_SID)
    REFERENCES CSR.IND(APP_SID, IND_SID)
;


ALTER TABLE ROOT_IND_TEMPLATE_INSTANCE MODIFY
	IND_SID					NUMBER(10, 0)	NULL
;

ALTER TABLE ROOT_IND_TEMPLATE_INSTANCE ADD CHECK 
	(IND_SID IS NOT NULL) 
	DEFERRABLE INITIALLY DEFERRED
;

ALTER TABLE PROJECT_IND_TEMPLATE_INSTANCE MODIFY
	IND_SID					NUMBER(10, 0)	NULL
;

ALTER TABLE PROJECT_IND_TEMPLATE_INSTANCE ADD CHECK 
	(IND_SID IS NOT NULL) 
	DEFERRABLE INITIALLY DEFERRED
;


@update_tail
