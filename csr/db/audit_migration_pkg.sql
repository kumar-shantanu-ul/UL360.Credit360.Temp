CREATE OR REPLACE PACKAGE csr.audit_migration_pkg AS

SUBTYPE T_VALIDATION_RESULT		IS NUMBER;

VALID_SUCCESS					CONSTANT T_VALIDATION_RESULT := 0;
FAIL_AUDIT_DACL_MATCH			CONSTANT T_VALIDATION_RESULT := 1;
FAIL_AUDIT_SUPPORT_SO			CONSTANT T_VALIDATION_RESULT := 2;
FAIL_DENY_ACL					CONSTANT T_VALIDATION_RESULT := 4;
FAIL_CSR_CAPABILITY				CONSTANT T_VALIDATION_RESULT := 8;
NO_NON_WF_AUDITS_FOUND			CONSTANT T_VALIDATION_RESULT := 16;
AUDIT_TYPES_WITH_ROLES			CONSTANT T_VALIDATION_RESULT := 32;


MIGR_VALID_DACL_DIFF			CONSTANT NUMBER := 1;
MIGR_VALID_NODE_NON_SUP_SO		CONSTANT NUMBER := 2;
MIGR_VALID_DENY_GRANT			CONSTANT NUMBER := 3;
MIGR_VALID_CSR_CAP				CONSTANT NUMBER := 4;
MIGR_VALID_AT_W_ROLES			CONSTANT NUMBER := 5;

MIGRATION_WORKFLOW_NAME			CONSTANT VARCHAR2(30) := 'Audit migration workflow';
MIGRATION_STATE_NAME			CONSTANT VARCHAR2(30) := 'Migrated';
MIGRATION_STATE_LOOKUP_KEY		CONSTANT VARCHAR2(30) := 'AUDIT_MIGRATION_STATE';

FUNCTION ValidateSiteMigration
RETURN T_VALIDATION_RESULT;

PROCEDURE GetValidationFailures(
	in_start				IN NUMBER,
	in_page_size			IN NUMBER,
	in_valid_type_id		IN NUMBER,
	out_total_rows			OUT NUMBER,
	out_cur 				OUT SYS_REFCURSOR
);

PROCEDURE MigrateAudits(
	in_force				IN	NUMBER DEFAULT 0
);

END;
/