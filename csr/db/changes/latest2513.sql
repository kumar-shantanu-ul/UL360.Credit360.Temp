-- Please update version.sql too -- this keeps clean builds in sync
define version=2513
@update_header

CREATE TABLE CSRIMP.USER_SETTING(
	CSRIMP_SESSION_ID				 NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    CATEGORY       VARCHAR2(100)     NOT NULL,
    SETTING        VARCHAR2(100)     NOT NULL,
    DESCRIPTION    VARCHAR2(1000)    NOT NULL,
    DATA_TYPE      VARCHAR2(10)      NOT NULL,
    CONSTRAINT CHK_US_CATEGORY_IS_VALID CHECK (CATEGORY = UPPER(TRIM(CATEGORY))),
    CONSTRAINT CHK_US_SETTING_IS_VALID CHECK (SETTING = TRIM(SETTING)),
    CONSTRAINT CHK_US_DATA_TYPE_IS_VALID CHECK (DATA_TYPE in ('STRING', 'NUMBER', 'BOOLEAN')),
    CONSTRAINT PK_USER_SETTING PRIMARY KEY (CSRIMP_SESSION_ID, CATEGORY, SETTING),
    CONSTRAINT FK_USER_SETTING_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

grant insert, select on csr.user_setting to csrimp;

@../schema_pkg
@../schema_body
@../csrimp/imp_body

@update_tail
