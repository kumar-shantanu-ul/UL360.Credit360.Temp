-- Please update version.sql too -- this keeps clean builds in sync
define version=1102
@update_header

GRANT SELECT, REFERENCES ON CHAIN.FILE_UPLOAD TO CT;
GRANT SELECT, REFERENCES ON CHAIN.CHAIN_USER TO CT;

-- some data that defaults to 0 on staging (as the basedata is loaded from a tool that parses a spreadsheet)
-- but we're seting a >0 check constraint on here
UPDATE CT.PERIOD SET USD_RATIO_TO_BASE_YR = 1 WHERE PERIOD_ID = 1;
UPDATE CT.PERIOD SET USD_RATIO_TO_BASE_YR = 0.98 WHERE PERIOD_ID = 2;
UPDATE CT.PERIOD SET USD_RATIO_TO_BASE_YR = 0.95 WHERE PERIOD_ID = 3;
UPDATE CT.PERIOD SET USD_RATIO_TO_BASE_YR = 0.92 WHERE PERIOD_ID = 4;
UPDATE CT.PERIOD SET USD_RATIO_TO_BASE_YR = 0.89 WHERE PERIOD_ID = 5;
UPDATE CT.PERIOD SET USD_RATIO_TO_BASE_YR = 0.87 WHERE PERIOD_ID = 6;
UPDATE CT.PERIOD SET USD_RATIO_TO_BASE_YR = 0.84 WHERE PERIOD_ID = 7;
UPDATE CT.PERIOD SET USD_RATIO_TO_BASE_YR = 0.84 WHERE PERIOD_ID = 8;
UPDATE CT.PERIOD SET USD_RATIO_TO_BASE_YR = 0.83 WHERE PERIOD_ID = 9;
UPDATE CT.PERIOD SET USD_RATIO_TO_BASE_YR = 0.8 WHERE PERIOD_ID = 10;
UPDATE CT.PERIOD SET USD_RATIO_TO_BASE_YR = 0.78 WHERE PERIOD_ID = 11;


-- clear out some data in tables only used in EC wizard for now - this might affect the EC wizard on live - but that's in dev anyway
DELETE FROM CT.EC_BUS;
DELETE FROM CT.EC_CAR;
DELETE FROM CT.EC_TRAIN;
DELETE FROM CT.EC_MOTORBIKE;
DELETE FROM CT.EC_ESTIMATION;

-- Rename CT tables we have renamed
ALTER TABLE CT.BUS_TYPE RENAME TO EC_BUS_TYPE;
ALTER TABLE CT.CAR_TYPE RENAME TO EC_CAR_TYPE;
ALTER TABLE CT.MOTORBIKE_TYPE RENAME TO EC_MOTORBIKE_TYPE;
ALTER TABLE CT.TRAIN_TYPE RENAME TO EC_TRAIN_TYPE;
ALTER TABLE CT.EC_BUS RENAME TO EC_BUS_ENTRY;
ALTER TABLE CT.EC_CAR RENAME TO EC_CAR_ENTRY;
ALTER TABLE CT.EC_TRAIN RENAME TO EC_TRAIN_ENTRY;
ALTER TABLE CT.EC_MOTORBIKE RENAME TO EC_MOTORBIKE_ENTRY;
ALTER TABLE CT.MANUFACTURER RENAME TO EC_CAR_MANUFACTURER;
ALTER TABLE CT.CAR RENAME TO EC_CAR_MODEL;
ALTER TABLE CT.EC_ESTIMATION RENAME TO EC_PROFILE;
ALTER TABLE CT.EC_REGION RENAME TO EC_REGION_FACTORS;
ALTER TABLE CT.BT_REGION RENAME TO BT_REGION_FACTORS;

/* ---------------------------------------------------------------------- */
/* Add table "WORKSHEET"                                                  */
/* ---------------------------------------------------------------------- */

CREATE TABLE CT.WORKSHEET (
    APP_SID NUMBER(10) NOT NULL,
    FILE_UPLOAD_SID NUMBER(10) NOT NULL,
    SHEET_INDEX NUMBER(10) NOT NULL,
    HEADER_WORKSHEET_ROW_ID NUMBER(10),
    CONSTRAINT PK_WORKSHEET PRIMARY KEY (APP_SID, FILE_UPLOAD_SID, SHEET_INDEX)
);

/* ---------------------------------------------------------------------- */
/* Add table "BRICK"                                                      */
/* ---------------------------------------------------------------------- */

CREATE TABLE CT.BRICK (
    APP_SID NUMBER(10) NOT NULL,
    BRICK_ID NUMBER(10) NOT NULL,
    COMPANY_SID NUMBER(10) NOT NULL,
    PARENT_BRICK_ID NUMBER(10),
    EIO_ID NUMBER(10) NOT NULL,
    CONSTRAINT PK_BRICK PRIMARY KEY (APP_SID, BRICK_ID)
);

/* ---------------------------------------------------------------------- */
/* Add table "CORE_BRICK"                                                 */
/* ---------------------------------------------------------------------- */

CREATE TABLE CT.CORE_BRICK (
    CORE_BRICK_ID NUMBER(10) NOT NULL,
    PARENT_CORE_BRICK_ID NUMBER(10),
    EIO_ID NUMBER(10) NOT NULL,
    CONSTRAINT PK_CORE_BRICK PRIMARY KEY (CORE_BRICK_ID)
);

/* ---------------------------------------------------------------------- */
/* Add table "UP_PRODUCT"                                                 */
/* ---------------------------------------------------------------------- */

CREATE TABLE CT.UP_PRODUCT (
    APP_SID NUMBER(10) NOT NULL,
    COMPANY_SID NUMBER(10) NOT NULL,
    UP_PRODUCT_ID NUMBER(10) NOT NULL,
    BRICK_ID NUMBER(10) NOT NULL,
    CONSTRAINT PK_UP_PRODUCT PRIMARY KEY (APP_SID, COMPANY_SID, UP_PRODUCT_ID)
);

/* ---------------------------------------------------------------------- */
/* Add table "WORKSHEET_ROW"                                              */
/* ---------------------------------------------------------------------- */

CREATE TABLE CT.WORKSHEET_ROW (
    APP_SID NUMBER(10) NOT NULL,
    WORKSHEET_ROW_ID NUMBER(10) NOT NULL,
    FILE_UPLOAD_SID NUMBER(10) NOT NULL,
    SHEET_INDEX NUMBER(10) NOT NULL,
    ROW_INDEX NUMBER(10) NOT NULL,
    IGNORE NUMBER(1) DEFAULT 0 NOT NULL,
    CONSTRAINT PK_WORKSHEET_ROW PRIMARY KEY (APP_SID, WORKSHEET_ROW_ID),
    CONSTRAINT TUC_WORKSHEET_ROW_1 UNIQUE (APP_SID, FILE_UPLOAD_SID, SHEET_INDEX, ROW_INDEX)
);

ALTER TABLE CT.WORKSHEET_ROW ADD CONSTRAINT CC_WORKSHEET_ROW_IGNORE 
    CHECK (IGNORE IN (0, 1));
	
ALTER TABLE CT.WORKSHEET ADD CONSTRAINT FILE_UPLOAD_WORKSHEET 
	FOREIGN KEY (APP_SID, FILE_UPLOAD_SID) REFERENCES CHAIN.FILE_UPLOAD (APP_SID,FILE_UPLOAD_SID);

ALTER TABLE CT.WORKSHEET ADD CONSTRAINT WORKSHEET_ROW_WORKSHEET 
    FOREIGN KEY (APP_SID, HEADER_WORKSHEET_ROW_ID) REFERENCES CT.WORKSHEET_ROW (APP_SID,WORKSHEET_ROW_ID);

ALTER TABLE CT.BRICK ADD CONSTRAINT COMPANY_BRICK 
    FOREIGN KEY (APP_SID, COMPANY_SID) REFERENCES CT.COMPANY (APP_SID,COMPANY_SID);

ALTER TABLE CT.BRICK ADD CONSTRAINT BRICK_BRICK 
    FOREIGN KEY (APP_SID, PARENT_BRICK_ID) REFERENCES CT.BRICK (APP_SID, BRICK_ID);

ALTER TABLE CT.BRICK ADD CONSTRAINT CUSTOMER_OPTIONS_BRICK 
    FOREIGN KEY (APP_SID) REFERENCES CT.CUSTOMER_OPTIONS (APP_SID);

ALTER TABLE CT.BRICK ADD CONSTRAINT EIO_BRICK 
    FOREIGN KEY (EIO_ID) REFERENCES CT.EIO (EIO_ID);

ALTER TABLE CT.CORE_BRICK ADD CONSTRAINT CORE_BRICK_CORE_BRICK 
    FOREIGN KEY (PARENT_CORE_BRICK_ID) REFERENCES CT.CORE_BRICK (CORE_BRICK_ID);

ALTER TABLE CT.CORE_BRICK ADD CONSTRAINT EIO_CORE_BRICK 
    FOREIGN KEY (EIO_ID) REFERENCES CT.EIO (EIO_ID);

ALTER TABLE CT.UP_PRODUCT ADD CONSTRAINT COMPANY_UP_PRODUCT 
    FOREIGN KEY (APP_SID, COMPANY_SID) REFERENCES CT.COMPANY (APP_SID,COMPANY_SID);

ALTER TABLE CT.UP_PRODUCT ADD CONSTRAINT BRICK_UP_PRODUCT 
    FOREIGN KEY (APP_SID, BRICK_ID) REFERENCES CT.BRICK (APP_SID,BRICK_ID);

ALTER TABLE CT.WORKSHEET_ROW ADD CONSTRAINT WORKSHEET_WORKSHEET_ROW 
    FOREIGN KEY (APP_SID, FILE_UPLOAD_SID, SHEET_INDEX) REFERENCES CT.WORKSHEET (APP_SID,FILE_UPLOAD_SID,SHEET_INDEX);

ALTER TABLE CT.WORKSHEET_ROW ADD CONSTRAINT CHAIN_CO_WORKSHEET_ROW 
    FOREIGN KEY (APP_SID) REFERENCES CHAIN.CUSTOMER_OPTIONS (APP_SID);

/* ---------------------------------------------------------------------- */
/* Add new CT sequences                                                          */
/* ---------------------------------------------------------------------- */

CREATE SEQUENCE CT.BT_TRIP_ENTRY_ID_SEQ
    START WITH 1
    INCREMENT BY 1
    NOMINVALUE
    NOMAXVALUE
    nocycle
    CACHE 20
    noorder;

CREATE SEQUENCE CT.DATA_SOURCE_ID_SEQ
    START WITH 1
    INCREMENT BY 1
    NOMINVALUE
    NOMAXVALUE
    nocycle
    CACHE 20
    noorder;

CREATE SEQUENCE CT.EC_TRANSPORT_ID_SEQ
    START WITH 1
    INCREMENT BY 1
    NOMINVALUE
    NOMAXVALUE
    nocycle
    CACHE 20
    noorder;

CREATE SEQUENCE CT.EC_MANUFACTURER_ID_SEQ
    START WITH 1
    INCREMENT BY 1
    NOMINVALUE
    NOMAXVALUE
    nocycle
    CACHE 20
    noorder;

CREATE SEQUENCE CT.EC_CAR_ID_SEQ
    START WITH 1
    INCREMENT BY 1
    NOMINVALUE
    NOMAXVALUE
    nocycle
    CACHE 20
    noorder;

CREATE SEQUENCE CT.BT_TRAVEL_MODE_ID_SEQ
    START WITH 1
    INCREMENT BY 1
    NOMINVALUE
    NOMAXVALUE
    nocycle
    CACHE 20
    noorder;

/* ---------------------------------------------------------------------- */
/* Drop foreign key constraints                                           */
/* ---------------------------------------------------------------------- */

ALTER TABLE CT.BREAKDOWN DROP CONSTRAINT BRD_TYPE_BREAKDOWN;

ALTER TABLE CT.BREAKDOWN DROP CONSTRAINT COMPANY_BREAKDOWN;

ALTER TABLE CT.BREAKDOWN DROP CONSTRAINT REGION_BREAKDOWN;

ALTER TABLE CT.BREAKDOWN_REGION_EIO DROP CONSTRAINT EIO_B_R_E;

ALTER TABLE CT.BREAKDOWN_REGION_EIO DROP CONSTRAINT B_R_B_R_E;

ALTER TABLE CT.BREAKDOWN_TYPE DROP CONSTRAINT CUSTOMER_OPTIONS_BRD_TYPE;

ALTER TABLE CT.BREAKDOWN_TYPE DROP CONSTRAINT COMPANY_BRD_TYPE;

ALTER TABLE CT.EC_CAR_MODEL DROP CONSTRAINT MANUFACTURER_CAR;

ALTER TABLE CT.EC_CAR_MODEL DROP CONSTRAINT FUEL_TYPE_CAR;

ALTER TABLE CT.COMPANY DROP CONSTRAINT CHAIN_COMPANY_COMPANY;

ALTER TABLE CT.COMPANY DROP CONSTRAINT CURRENCY_PERIOD_COMPANY;

ALTER TABLE CT.COMPANY DROP CONSTRAINT BUSINESS_TYPE_COMPANY;

ALTER TABLE CT.COMPANY DROP CONSTRAINT EIO_COMPANY;

ALTER TABLE CT.COMPANY DROP CONSTRAINT SCOPE_INPUT_TYPE_COMPANY;

ALTER TABLE CT.COMPANY DROP CONSTRAINT CUSTOMER_OPTIONS_COMPANY;

ALTER TABLE CT.COMPANY_CONSUMPTION_TYPE DROP CONSTRAINT COMPANY_COMPANY_CONS_TYPE;

ALTER TABLE CT.COMPANY_CONSUMPTION_TYPE DROP CONSTRAINT CONS_TYPE_COMPANY_CONS_TYPE;

ALTER TABLE CT.CURRENCY_PERIOD DROP CONSTRAINT CURRENCY_CURRENCY_PERIOD;

ALTER TABLE CT.CURRENCY_PERIOD DROP CONSTRAINT PERIOD_CURRENCY_PERIOD;

ALTER TABLE CT.CUSTOMER_OPTIONS DROP CONSTRAINT CHAIN_CO_CUSTOMER_OPTIONS;

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS DROP CONSTRAINT ECQ_TRAIN_TYPE_EC_QNR_ANS;

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS DROP CONSTRAINT ECQ_MOTORBIKE_TYPE_EC_QNR_ANS;

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS DROP CONSTRAINT COMPANY_EC_QNR_ANS;

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS DROP CONSTRAINT ECQ_CAR_TYPE_EC_QNR_ANS;

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS DROP CONSTRAINT CAR_EC_QNR_ANS;

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS DROP CONSTRAINT ECQ_BUS_TYPE_EC_QNR_ANS;

ALTER TABLE CT.EC_REGION_FACTORS DROP CONSTRAINT REGION_EC_REGION;

ALTER TABLE CT.HOT_REGION DROP CONSTRAINT REGION_HOT_REGION;

ALTER TABLE CT.BREAKDOWN_REGION DROP CONSTRAINT BREAKDOWN_B_R;

ALTER TABLE CT.BREAKDOWN_REGION DROP CONSTRAINT REGION_B_R;

ALTER TABLE CT.HOTSPOT_RESULT DROP CONSTRAINT B_R_E_H_R;

ALTER TABLE CT.HOTSPOT_RESULT DROP CONSTRAINT COMPANY_H_R;

ALTER TABLE CT.EC_PROFILE DROP CONSTRAINT COMPANY_EC_EST;

ALTER TABLE CT.EC_CAR_ENTRY DROP CONSTRAINT CAR_TYPE_EC_CAR;

------------ 
ALTER TABLE CT.EC_CAR_ENTRY DROP CONSTRAINT EC_ESTIMATION_EC_CAR;

------------
ALTER TABLE CT.EC_BUS_ENTRY DROP CONSTRAINT EC_ESTIMATION_EC_BUS;

ALTER TABLE CT.EC_BUS_ENTRY DROP CONSTRAINT BUS_TYPE_EC_BUS;

------------
ALTER TABLE CT.EC_TRAIN_ENTRY DROP CONSTRAINT EC_ESTIMATION_EC_TRAIN;

ALTER TABLE CT.EC_TRAIN_ENTRY DROP CONSTRAINT TRAIN_TYPE_EC_TRAIN;

ALTER TABLE CT.EC_MOTORBIKE_ENTRY DROP CONSTRAINT EC_EST_EC_MB;

ALTER TABLE CT.EC_MOTORBIKE_ENTRY DROP CONSTRAINT MOTORBIKE_TYPE_EC_MB;

ALTER TABLE CT.WORKSHEET DROP CONSTRAINT WORKSHEET_ROW_WORKSHEET;

ALTER TABLE CT.BRICK DROP CONSTRAINT COMPANY_BRICK;

ALTER TABLE CT.BRICK DROP CONSTRAINT BRICK_BRICK;

ALTER TABLE CT.BRICK DROP CONSTRAINT CUSTOMER_OPTIONS_BRICK;

ALTER TABLE CT.BRICK DROP CONSTRAINT EIO_BRICK;

ALTER TABLE CT.UP_PRODUCT DROP CONSTRAINT COMPANY_UP_PRODUCT;

ALTER TABLE CT.UP_PRODUCT DROP CONSTRAINT BRICK_UP_PRODUCT;

ALTER TABLE CT.WORKSHEET_ROW DROP CONSTRAINT WORKSHEET_WORKSHEET_ROW;

ALTER TABLE CT.WORKSHEET_ROW DROP CONSTRAINT CHAIN_CO_WORKSHEET_ROW;

ALTER TABLE CT.BT_REGION_FACTORS DROP CONSTRAINT REGION_;

ALTER TABLE CT.EIO DROP CONSTRAINT EIO_GROUP_EIO;

ALTER TABLE CT.EIO_GROUP_ADVICE DROP CONSTRAINT EIO_GROUP_E_G_A;

ALTER TABLE CT.REPORT_TEMPLATE DROP CONSTRAINT TEMPLATE_KEY_REPORT_TPL;

ALTER TABLE CT.REGION DROP CONSTRAINT POSTCODE_COUNTRY_REGION;

ALTER TABLE CT.WORKSHEET DROP CONSTRAINT FILE_UPLOAD_WORKSHEET;

ALTER TABLE CT.CUSTOMER_OPTIONS DROP CONSTRAINT CSR_CUSTOMER_CUSTOMER_OPTIONS;

/* ---------------------------------------------------------------------- */
/* Modify table "BREAKDOWN"                                               */
/* ---------------------------------------------------------------------- */

ALTER TABLE CT.BREAKDOWN DROP CONSTRAINT PK_BREAKDOWN;

ALTER TABLE CT.BREAKDOWN MODIFY APP_SID DEFAULT SYS_CONTEXT('SECURITY', 'APP');

ALTER TABLE CT.BREAKDOWN ADD CONSTRAINT CC_BREAKDOWN_FTE 
    CHECK (FTE >= 0);

ALTER TABLE CT.BREAKDOWN ADD CONSTRAINT CC_BREAKDOWN_FTE_TRAVEL 
    CHECK (FTE_TRAVEL >= 0);

ALTER TABLE CT.BREAKDOWN ADD CONSTRAINT CC_BREAKDOWN_IS_REMAINDER 
    CHECK (IS_REMAINDER IN (1,0));

ALTER TABLE CT.BREAKDOWN ADD CONSTRAINT CC_BREAKDOWN_TURNOVER 
    CHECK (TURNOVER >= 0);

ALTER TABLE CT.BREAKDOWN ADD CONSTRAINT PK_BREAKDOWN 
    PRIMARY KEY (APP_SID, BREAKDOWN_ID);

/* ---------------------------------------------------------------------- */
/* Modify table "BREAKDOWN_REGION_EIO"                                    */
/* ---------------------------------------------------------------------- */

ALTER TABLE CT.BREAKDOWN_REGION_EIO DROP CONSTRAINT PK_B_R_E;

ALTER TABLE CT.BREAKDOWN_REGION_EIO MODIFY APP_SID DEFAULT SYS_CONTEXT('SECURITY', 'APP');

/******************************************************************/
ALTER TABLE CT.BREAKDOWN_REGION_EIO ADD (NEW_PCT NUMBER(3));
UPDATE CT.BREAKDOWN_REGION_EIO SET NEW_PCT = PCT;
ALTER TABLE CT.BREAKDOWN_REGION_EIO DROP COLUMN PCT;
ALTER TABLE CT.BREAKDOWN_REGION_EIO RENAME COLUMN NEW_PCT TO PCT;
ALTER TABLE CT.BREAKDOWN_REGION_EIO MODIFY PCT NOT NULL;
/******************************************************************/

ALTER TABLE CT.BREAKDOWN_REGION_EIO ADD
    CHECK (PCT>=0 AND PCT<=100);

ALTER TABLE CT.BREAKDOWN_REGION_EIO ADD CONSTRAINT CC_B_R_E_FTE 
    CHECK (FTE >= 0);

ALTER TABLE CT.BREAKDOWN_REGION_EIO ADD CONSTRAINT CC_B_R_E_TURNOVER 
    CHECK (TURNOVER >= 0);

ALTER TABLE CT.BREAKDOWN_REGION_EIO ADD CONSTRAINT PK_B_R_E 
    PRIMARY KEY (APP_SID, BREAKDOWN_ID, REGION_ID, EIO_ID);

/* ---------------------------------------------------------------------- */
/* Modify table "BREAKDOWN_TYPE"                                          */
/* ---------------------------------------------------------------------- */

DROP INDEX CT.IDX_BRD_TYPE_1;

DROP INDEX CT.IDX_BRD_TYPE_2;

DROP INDEX CT.IDX_BRD_TYPE_3;


ALTER TABLE CT.BREAKDOWN_TYPE DROP CONSTRAINT PK_BRD_TYPE;

ALTER TABLE CT.BREAKDOWN_TYPE DROP CONSTRAINT CC_BRD_TYPE_COMPANY_SID;

ALTER TABLE CT.BREAKDOWN_TYPE ADD
    IS_HOTSPOT NUMBER(1) DEFAULT 0 NOT NULL;

ALTER TABLE CT.BREAKDOWN_TYPE MODIFY APP_SID DEFAULT SYS_CONTEXT('SECURITY', 'APP');

ALTER TABLE CT.BREAKDOWN_TYPE MODIFY COMPANY_SID DEFAULT SYS_CONTEXT('SECURITY', 'CHAIN_COMPANY');

ALTER TABLE CT.BREAKDOWN_TYPE ADD
    CHECK (IS_REGION IN (1,0));

ALTER TABLE CT.BREAKDOWN_TYPE ADD
    CHECK (BY_FTE IN (1,0));

ALTER TABLE CT.BREAKDOWN_TYPE ADD
    CHECK (BY_TURNOVER IN (1,0));

ALTER TABLE CT.BREAKDOWN_TYPE ADD CONSTRAINT CC_BD_TYPE_COMPANY_SID 
    CHECK ((COMPANY_SID IS NULL AND IS_REGION = 1) OR (COMPANY_SID IS NOT NULL AND IS_REGION = 0));

ALTER TABLE CT.BREAKDOWN_TYPE ADD CONSTRAINT CC_BD_TYPE_IS_HOTSPOT 
    CHECK (IS_HOTSPOT IN (NULL, 1,0));

ALTER TABLE CT.BREAKDOWN_TYPE ADD CONSTRAINT PK_BD_TYPE 
    PRIMARY KEY (APP_SID, BREAKDOWN_TYPE_ID);

CREATE UNIQUE INDEX CT.IDX_BD_TYPE_1 ON CT.BREAKDOWN_TYPE (APP_SID,LOWER(SINGULAR));

CREATE UNIQUE INDEX CT.IDX_BD_TYPE_2 ON CT.BREAKDOWN_TYPE (APP_SID,LOWER(PLURAL));

CREATE UNIQUE INDEX CT.IDX_BD_TYPE_3 ON CT.BREAKDOWN_TYPE (APP_SID, CASE WHEN IS_REGION = 1  THEN -1 ELSE BREAKDOWN_TYPE_ID END);

/* ---------------------------------------------------------------------- */
/* Modify table "EC_BUS_TYPE"                                             */
/* ---------------------------------------------------------------------- */

ALTER TABLE CT.EC_BUS_TYPE DROP CONSTRAINT PK_BUS_TYPE;

ALTER TABLE CT.EC_BUS_TYPE ADD CONSTRAINT CC_EC_BUS_TY_IS_DEFAULT 
    CHECK (IS_DEFAULT IN (1,0));

ALTER TABLE CT.EC_BUS_TYPE ADD CONSTRAINT CC_EC_BUS_TY_KG_CO2_PER_KM 
    CHECK (KG_CO2_PER_KM_CONTRIBUTION >= 0);

ALTER TABLE CT.EC_BUS_TYPE ADD CONSTRAINT PK_EC_BUS_TY 
    PRIMARY KEY (BUS_TYPE_ID);

/* ---------------------------------------------------------------------- */
/* Modify table "EC_CAR_MODEL"                                            */
/* ---------------------------------------------------------------------- */

ALTER TABLE CT.EC_CAR_MODEL DROP CONSTRAINT PK_CAR;

ALTER TABLE CT.EC_CAR_MODEL DROP COLUMN FUEL_TYPE_ID;

ALTER TABLE CT.EC_CAR_MODEL DROP COLUMN TRANSMISSION_CODE;

ALTER TABLE CT.EC_CAR_MODEL DROP COLUMN ENGINE_CAPACITY_CC;

ALTER TABLE CT.EC_CAR_MODEL DROP COLUMN KM_PER_LITRE_URBAN;

ALTER TABLE CT.EC_CAR_MODEL DROP COLUMN KM_PER_LITRE_EX_URBAN;

ALTER TABLE CT.EC_CAR_MODEL DROP COLUMN MILES_PER_GALLON_URBAN;

ALTER TABLE CT.EC_CAR_MODEL DROP COLUMN MILES_PER_GALLON_EX_URBAN;

ALTER TABLE CT.EC_CAR_MODEL DROP COLUMN MILES_PER_GALLON_COMBINED;

ALTER TABLE CT.EC_CAR_MODEL DROP COLUMN CO2_KG_PER_KM;

ALTER TABLE CT.EC_CAR_MODEL DROP COLUMN CO_G_PER_KM;

ALTER TABLE CT.EC_CAR_MODEL DROP COLUMN HC_G_PER_KM;

ALTER TABLE CT.EC_CAR_MODEL DROP COLUMN NOX_G_PER_KM;

ALTER TABLE CT.EC_CAR_MODEL DROP COLUMN HC_NOX_G_PER_KM;

ALTER TABLE CT.EC_CAR_MODEL DROP COLUMN EMISSION_PARTIC_G_PER_KM;

ALTER TABLE CT.EC_CAR_MODEL DROP COLUMN EURO_STANDARD;

ALTER TABLE CT.EC_CAR_MODEL DROP COLUMN NOISE_LEVEL_DBA;

ALTER TABLE CT.EC_CAR_MODEL MODIFY EFFICIENCY_KM_LITRE NUMBER(20,10);

ALTER TABLE CT.EC_CAR_MODEL ADD CONSTRAINT CC_EC_CAR_MOD_EFF_KM_L 
    CHECK (EFFICIENCY_KM_LITRE > 0);

ALTER TABLE CT.EC_CAR_MODEL ADD CONSTRAINT PK_EC_CAR_MOD 
    PRIMARY KEY (CAR_ID);

/* ---------------------------------------------------------------------- */
/* Modify table "EC_CAR_TYPE"                                             */
/* ---------------------------------------------------------------------- */

ALTER TABLE CT.EC_CAR_TYPE DROP CONSTRAINT PK_CAR_TYPE;

ALTER TABLE CT.EC_CAR_TYPE ADD CONSTRAINT CC_EC_CAR_TY_IS_DEFAULT 
    CHECK (IS_DEFAULT IN (1,0));

ALTER TABLE CT.EC_CAR_TYPE ADD CONSTRAINT CC_EC_CAR_TY_KG_CO2_PER_KM 
    CHECK (KG_CO2_PER_KM_CONTRIBUTION >= 0);

ALTER TABLE CT.EC_CAR_TYPE ADD CONSTRAINT PK_EC_CAR_TY 
    PRIMARY KEY (CAR_TYPE_ID);

/* ---------------------------------------------------------------------- */
/* Modify table "COMPANY"                                                 */
/* ---------------------------------------------------------------------- */

ALTER TABLE CT.COMPANY ADD
    INCLUDE_HOTEL_STAYS NUMBER(1) DEFAULT 0 NOT NULL;

ALTER TABLE CT.COMPANY ADD
    USE_RADIATIVE_FORCING NUMBER(1) DEFAULT 1 NOT NULL;

ALTER TABLE CT.COMPANY ADD CONSTRAINT CC_COMPANY_INCLUDE_HOTEL_STAYS 
    CHECK (INCLUDE_HOTEL_STAYS IN (1,0));

ALTER TABLE CT.COMPANY ADD CONSTRAINT CC_COMPANY_USE_RADIATIVE_FORC 
    CHECK (USE_RADIATIVE_FORCING IN (1,0));

/* ---------------------------------------------------------------------- */
/* Modify table "COMPANY_CONSUMPTION_TYPE"                                */
/* ---------------------------------------------------------------------- */

ALTER TABLE CT.COMPANY_CONSUMPTION_TYPE DROP CONSTRAINT PK_COMPANY_CONS_TYPE;

ALTER TABLE CT.COMPANY_CONSUMPTION_TYPE MODIFY APP_SID DEFAULT SYS_CONTEXT('SECURITY', 'APP');

ALTER TABLE CT.COMPANY_CONSUMPTION_TYPE MODIFY COMPANY_SID DEFAULT SYS_CONTEXT('SECURITY', 'CHAIN_COMPANY');

ALTER TABLE CT.COMPANY_CONSUMPTION_TYPE MODIFY VALUE NUMBER(20,10);

ALTER TABLE CT.COMPANY_CONSUMPTION_TYPE ADD CONSTRAINT CC_COMPANY_CONS_TYPE_VALUE 
    CHECK (VALUE >= 0);

ALTER TABLE CT.COMPANY_CONSUMPTION_TYPE ADD CONSTRAINT PK_COMPANY_CONS_TYPE 
    PRIMARY KEY (APP_SID, COMPANY_SID, CONSUMPTION_TYPE_ID);

/* ---------------------------------------------------------------------- */
/* Modify table "CONSUMPTION_TYPE"                                        */
/* ---------------------------------------------------------------------- */

ALTER TABLE CT.CONSUMPTION_TYPE ADD CONSTRAINT CC_CONS_TYPE_KWH_TO_CO2 
    CHECK (KWH_TO_CO2_CONVERSION >= 0);

/* ---------------------------------------------------------------------- */
/* Modify table "EC_QUESTIONNAIRE_ANSWERS"                                */
/* ---------------------------------------------------------------------- */


ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS DROP CONSTRAINT PK_EC_QNR_ANS;

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS DROP CONSTRAINT CC_EQA_BIKE_DAYS_PER_WK;

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS DROP CONSTRAINT CC_EQA_BUS_DAYS_PER_WK;

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS DROP CONSTRAINT CC_EQA_CAR_DAYS_PER_WK;

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS DROP CONSTRAINT CC_EQA_FULL_TIME_EMPLOYEE;

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS DROP CONSTRAINT CC_EQA_HOME_DAYS_PER_WK;

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS DROP CONSTRAINT CC_EQA_MOTORBIKE_DAYS_PER_WK;

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS DROP CONSTRAINT CC_EQA_TRAIN_DAYS_PER_WK;

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS DROP CONSTRAINT CC_EQA_WALK_DAYS_PER_WK;

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS DROP COLUMN FULL_TIME_EMPLOYEE;

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS DROP COLUMN TRAVEL_DAYS_PER_YR;

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS DROP COLUMN CAR_DAYS_PER_WK;

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS DROP COLUMN CAR_JOURNEY_KM;

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS DROP COLUMN ECQ_CAR_TYPE_ID;

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS DROP COLUMN MOTORBIKE_DAYS_PER_WK;

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS DROP COLUMN MOTORBIKE_JOURNEY_KM;

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS DROP COLUMN TRAIN_DAYS_PER_WK;

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS DROP COLUMN TRAIN_JOURNEY_KM;

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS DROP COLUMN BUS_DAYS_PER_WK;

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS DROP COLUMN BUS_JOURNEY_KM;

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS DROP COLUMN ECQ_BUS_TYPE_ID;

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS DROP COLUMN BIKE_DAYS_PER_WK;

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS DROP COLUMN BIKE_JOURNEY_KM;

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS DROP COLUMN WALK_DAYS_PER_WK;

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS DROP COLUMN WALK_JOURNEY_KM;

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS DROP COLUMN HOME_DAYS_PER_WK;

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS ADD
    EC_QUESTIONNAIRE_ANSWERS_ID NUMBER(10) NOT NULL;

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS ADD
    CAR_TRIPS NUMBER(10) NOT NULL;

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS ADD
    CAR_DISTANCE NUMBER(20,10);

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS ADD
    CAR_DISTANCE_UNIT_ID NUMBER(10);

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS ADD
    BUS_TRIPS NUMBER(10) NOT NULL;

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS ADD
    BUS_DISTANCE NUMBER(20,10);

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS ADD
    BUS_DISTANCE_UNIT_ID NUMBER(10);

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS ADD
    TRAIN_TRIPS NUMBER(10) NOT NULL;

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS ADD
    TRAIN_DISTANCE NUMBER(20,10);

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS ADD
    TRAIN_TYPE_ID NUMBER(10);

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS ADD
    MOTORBIKE_TRIPS NUMBER(10) NOT NULL;

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS ADD
    MOTORBIKE_DISTANCE NUMBER(20,10);

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS ADD
    MOTORBIKE_DISTANCE_UNIT_ID NUMBER(10);

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS ADD
    MOTORBIKE_TYPE_ID NUMBER(10);

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS ADD
    BIKE_TRIPS NUMBER(10) NOT NULL;

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS ADD
    BIKE_DISTANCE NUMBER(20,10);

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS ADD
    BIKE_DISTANCE_UNIT_ID NUMBER(10);

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS ADD
    WALK_TRIPS NUMBER(10) NOT NULL;

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS ADD
    WALK_DISTANCE NUMBER(20,10);

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS ADD
    WALK_DISTANCE_UNIT_ID NUMBER(10);

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS RENAME COLUMN RESPONDANT_ID TO EC_QUESTIONNAIRE_ID;

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS RENAME COLUMN ECQ_MOTORBIKE_TYPE_ID TO BUS_TYPE_ID;

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS RENAME COLUMN ECQ_TRAIN_TYPE_ID TO TRAIN_DISTANCE_UNIT_ID;

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS MODIFY WORKING_DAYS_PER_WK NUMBER(20,10);

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS MODIFY VACATION_DAYS_PER_YR NUMBER(20,10);

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS MODIFY OTHER_LEAVE_DAYS_PER_YR NUMBER(20,10);

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS ADD CONSTRAINT CC_EC_QA_BIKE_DIST 
    CHECK (BIKE_DISTANCE > 0);

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS ADD CONSTRAINT CC_EC_QA_BIKE_TRIPS 
    CHECK (BIKE_TRIPS >= 0);

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS ADD CONSTRAINT CC_EC_QA_BUS_DIST 
    CHECK (BUS_DISTANCE > 0);

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS ADD CONSTRAINT CC_EC_QA_BUS_TRIPS 
    CHECK (BUS_TRIPS >= 0);

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS ADD CONSTRAINT CC_EC_QA_CAR_DISTANCE 
    CHECK (CAR_DISTANCE > 0);

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS ADD CONSTRAINT CC_EC_QA_CAR_TRIPS 
    CHECK (CAR_TRIPS >= 0);

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS ADD CONSTRAINT CC_EC_QA_MB_DIST 
    CHECK (MOTORBIKE_DISTANCE > 0);

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS ADD CONSTRAINT CC_EC_QA_MOTORBIKE_TRIPS 
    CHECK (MOTORBIKE_TRIPS >= 0);

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS ADD CONSTRAINT CC_EC_QA_OTHER_LEAVE_DAYS 
    CHECK (OTHER_LEAVE_DAYS_PER_YR >= 0 AND OTHER_LEAVE_DAYS_PER_YR <=366);

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS ADD CONSTRAINT CC_EC_QA_TRAIN_DIST 
    CHECK (TRAIN_DISTANCE > 0);

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS ADD CONSTRAINT CC_EC_QA_TRAIN_TRIPS 
    CHECK (TRAIN_TRIPS >= 0);

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS ADD CONSTRAINT CC_EC_QA_VACATION_DAYS 
    CHECK (VACATION_DAYS_PER_YR >= 0 AND VACATION_DAYS_PER_YR <=366);

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS ADD CONSTRAINT CC_EC_QA_WALK_DIST 
    CHECK (WALK_DISTANCE > 0);

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS ADD CONSTRAINT CC_EC_QA_WALK_TRIPS 
    CHECK (WALK_TRIPS >= 0);

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS ADD CONSTRAINT CC_EC_QA_WORKING_DAYS 
    CHECK (WORKING_DAYS_PER_WK > 0 AND WORKING_DAYS_PER_WK <=7);

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS ADD
    PRIMARY KEY (APP_SID, COMPANY_SID, EC_QUESTIONNAIRE_ID, EC_QUESTIONNAIRE_ANSWERS_ID);

/* ---------------------------------------------------------------------- */
/* Modify table "EC_REGION_FACTORS"                                       */
/* ---------------------------------------------------------------------- */

ALTER TABLE CT.EC_REGION_FACTORS DROP CONSTRAINT PK_EC_REGION;

ALTER TABLE CT.EC_REGION_FACTORS DROP CONSTRAINT CC_ER_BIKE_AVG_PCT_USE;

ALTER TABLE CT.EC_REGION_FACTORS DROP CONSTRAINT CC_ER_BUS_AVG_PCT_USE;

ALTER TABLE CT.EC_REGION_FACTORS DROP CONSTRAINT CC_ER_CAR_AVG_PCT_USE;

ALTER TABLE CT.EC_REGION_FACTORS DROP CONSTRAINT CC_ER_MOTORBIKE_AVG_PCT_USE;

ALTER TABLE CT.EC_REGION_FACTORS DROP CONSTRAINT CC_ER_TRAIN_AVG_PCT_USE;

ALTER TABLE CT.EC_REGION_FACTORS DROP CONSTRAINT CC_ER_WALK_AVG_PCT_USE;

/***********************************************************************************/
ALTER TABLE CT.EC_REGION_FACTORS ADD (NEW_CAR_AVG_PCT_USE NUMBER(20,17));
ALTER TABLE CT.EC_REGION_FACTORS ADD (NEW_BUS_AVG_PCT_USE NUMBER(20,17));
ALTER TABLE CT.EC_REGION_FACTORS ADD (NEW_TRAIN_AVG_PCT_USE NUMBER(20,17));
ALTER TABLE CT.EC_REGION_FACTORS ADD (NEW_MOTORBIKE_AVG_PCT_USE NUMBER(20,17));
ALTER TABLE CT.EC_REGION_FACTORS ADD (NEW_BIKE_AVG_PCT_USE NUMBER(20,17));
ALTER TABLE CT.EC_REGION_FACTORS ADD (NEW_WALK_AVG_PCT_USE NUMBER(20,17));

UPDATE CT.EC_REGION_FACTORS SET 
	NEW_CAR_AVG_PCT_USE = CAR_AVG_PCT_USE,
	NEW_BUS_AVG_PCT_USE = BUS_AVG_PCT_USE,
	NEW_TRAIN_AVG_PCT_USE = TRAIN_AVG_PCT_USE,
	NEW_MOTORBIKE_AVG_PCT_USE = MOTORBIKE_AVG_PCT_USE,
	NEW_BIKE_AVG_PCT_USE = BIKE_AVG_PCT_USE,
	NEW_WALK_AVG_PCT_USE = WALK_AVG_PCT_USE;

ALTER TABLE CT.EC_REGION_FACTORS DROP COLUMN CAR_AVG_PCT_USE;
ALTER TABLE CT.EC_REGION_FACTORS DROP COLUMN BUS_AVG_PCT_USE;
ALTER TABLE CT.EC_REGION_FACTORS DROP COLUMN TRAIN_AVG_PCT_USE;
ALTER TABLE CT.EC_REGION_FACTORS DROP COLUMN MOTORBIKE_AVG_PCT_USE;
ALTER TABLE CT.EC_REGION_FACTORS DROP COLUMN BIKE_AVG_PCT_USE;
ALTER TABLE CT.EC_REGION_FACTORS DROP COLUMN WALK_AVG_PCT_USE;

ALTER TABLE CT.EC_REGION_FACTORS RENAME COLUMN NEW_CAR_AVG_PCT_USE TO CAR_AVG_PCT_USE;
ALTER TABLE CT.EC_REGION_FACTORS RENAME COLUMN NEW_BUS_AVG_PCT_USE TO BUS_AVG_PCT_USE;
ALTER TABLE CT.EC_REGION_FACTORS RENAME COLUMN NEW_TRAIN_AVG_PCT_USE TO TRAIN_AVG_PCT_USE;
ALTER TABLE CT.EC_REGION_FACTORS RENAME COLUMN NEW_MOTORBIKE_AVG_PCT_USE TO MOTORBIKE_AVG_PCT_USE;
ALTER TABLE CT.EC_REGION_FACTORS RENAME COLUMN NEW_BIKE_AVG_PCT_USE TO BIKE_AVG_PCT_USE;
ALTER TABLE CT.EC_REGION_FACTORS RENAME COLUMN NEW_WALK_AVG_PCT_USE TO WALK_AVG_PCT_USE;

ALTER TABLE CT.EC_REGION_FACTORS MODIFY CAR_AVG_PCT_USE NOT NULL;
ALTER TABLE CT.EC_REGION_FACTORS MODIFY BUS_AVG_PCT_USE NOT NULL;
ALTER TABLE CT.EC_REGION_FACTORS MODIFY TRAIN_AVG_PCT_USE NOT NULL;
ALTER TABLE CT.EC_REGION_FACTORS MODIFY MOTORBIKE_AVG_PCT_USE NOT NULL;
ALTER TABLE CT.EC_REGION_FACTORS MODIFY BIKE_AVG_PCT_USE NOT NULL;
ALTER TABLE CT.EC_REGION_FACTORS MODIFY WALK_AVG_PCT_USE NOT NULL;
/***********************************************************************************/

ALTER TABLE CT.EC_REGION_FACTORS ADD CONSTRAINT CC_ERF_BIKE_AVG_JOURNEY_KM 
    CHECK (BIKE_AVG_JOURNEY_KM > 0);

ALTER TABLE CT.EC_REGION_FACTORS ADD CONSTRAINT CC_ERF_BIKE_AVG_PCT_USE 
    CHECK (BIKE_AVG_PCT_USE>=0 AND BIKE_AVG_PCT_USE<=100);

ALTER TABLE CT.EC_REGION_FACTORS ADD CONSTRAINT CC_ERF_BUS_AVG_JOURNEY_KM 
    CHECK (BUS_AVG_JOURNEY_KM > 0);

ALTER TABLE CT.EC_REGION_FACTORS ADD CONSTRAINT CC_ERF_BUS_AVG_PCT_USE 
    CHECK (BUS_AVG_PCT_USE>=0 AND BUS_AVG_PCT_USE<=100);

ALTER TABLE CT.EC_REGION_FACTORS ADD CONSTRAINT CC_ERF_CAR_AVG_JOURNEY_KM 
    CHECK (CAR_AVG_JOURNEY_KM > 0);

ALTER TABLE CT.EC_REGION_FACTORS ADD CONSTRAINT CC_ERF_CAR_AVG_PCT_USE 
    CHECK (CAR_AVG_PCT_USE>=0 AND CAR_AVG_PCT_USE<=100);

ALTER TABLE CT.EC_REGION_FACTORS ADD CONSTRAINT CC_ERF_MB_AVG_JOURNEY_KM 
    CHECK (MOTORBIKE_AVG_JOURNEY_KM > 0);

ALTER TABLE CT.EC_REGION_FACTORS ADD CONSTRAINT CC_ERF_MOTORBIKE_AVG_PCT_USE 
    CHECK (MOTORBIKE_AVG_PCT_USE>=0 AND MOTORBIKE_AVG_PCT_USE<=100);

ALTER TABLE CT.EC_REGION_FACTORS ADD CONSTRAINT CC_ERF_TRAIN_AVG_JOURNEY_KM 
    CHECK (TRAIN_AVG_JOURNEY_KM > 0);

ALTER TABLE CT.EC_REGION_FACTORS ADD CONSTRAINT CC_ERF_TRAIN_AVG_PCT_USE 
    CHECK (TRAIN_AVG_PCT_USE>=0 AND TRAIN_AVG_PCT_USE<=100);

ALTER TABLE CT.EC_REGION_FACTORS ADD CONSTRAINT CC_ERF_WALK_AVG_JOURNEY_KM 
    CHECK (WALK_AVG_JOURNEY_KM > 0);

ALTER TABLE CT.EC_REGION_FACTORS ADD CONSTRAINT CC_ERF_WALK_AVG_PCT_USE 
    CHECK (WALK_AVG_PCT_USE>=0 AND WALK_AVG_PCT_USE<=100);

ALTER TABLE CT.EC_REGION_FACTORS ADD CONSTRAINT PK_ERF 
    PRIMARY KEY (REGION_ID);

/* ---------------------------------------------------------------------- */
/* Modify table "EIO_GROUP"                                               */
/* ---------------------------------------------------------------------- */

ALTER TABLE CT.EIO_GROUP ADD CONSTRAINT CC_EIO_GROUP_HIDE 
    CHECK (HIDE IN (1,0));

/* ---------------------------------------------------------------------- */
/* Modify table "HOT_REGION"                                              */
/* ---------------------------------------------------------------------- */

ALTER TABLE CT.HOT_REGION ADD CONSTRAINT CC_HOT_REGION_COMBUSITION_EF 
    CHECK (COMBUSITION_EF >= 0);

ALTER TABLE CT.HOT_REGION ADD CONSTRAINT CC_HOT_REGION_LIFECYCLE_EF 
    CHECK (FULL_LIFECYCLE_EF >= 0);

/* ---------------------------------------------------------------------- */
/* Modify table "EC_CAR_MANUFACTURER"                                     */
/* ---------------------------------------------------------------------- */

ALTER TABLE CT.EC_CAR_MANUFACTURER DROP CONSTRAINT PK_MANUFACTURER;

ALTER TABLE CT.EC_CAR_MANUFACTURER ADD
    IS_DONT_KNOW NUMBER(1) DEFAULT 0 NOT NULL;

ALTER TABLE CT.EC_CAR_MANUFACTURER ADD CONSTRAINT CC_EC_CAR_MAN_IS_DONT_KNOW 
    CHECK (IS_DONT_KNOW IN (1,0));

ALTER TABLE CT.EC_CAR_MANUFACTURER ADD CONSTRAINT PK_EC_CAR_MAN 
    PRIMARY KEY (MANUFACTURER_ID);

/* ---------------------------------------------------------------------- */
/* Modify table "EC_MOTORBIKE_TYPE"                                       */
/* ---------------------------------------------------------------------- */

ALTER TABLE CT.EC_MOTORBIKE_TYPE DROP CONSTRAINT PK_MOTORBIKE_TYPE;

ALTER TABLE CT.EC_MOTORBIKE_TYPE ADD CONSTRAINT CC_EC_MB_TY_IS_DEFAULT 
    CHECK (IS_DEFAULT IN (1,0));

ALTER TABLE CT.EC_MOTORBIKE_TYPE ADD CONSTRAINT CC_EC_MB_TY_KG_CO2_PER_KM 
    CHECK (KG_CO2_PER_KM_CONTRIBUTION >= 0);

ALTER TABLE CT.EC_MOTORBIKE_TYPE ADD CONSTRAINT PK_EC_MB_TY 
    PRIMARY KEY (MOTORBIKE_TYPE_ID);

/* ---------------------------------------------------------------------- */
/* Modify table "PERIOD"                                                  */
/* ---------------------------------------------------------------------- */

/******************************************************************/
ALTER TABLE CT.PERIOD ADD (NEW_USD_RATIO_TO_BASE_YR NUMBER(20,10));
UPDATE CT.PERIOD SET NEW_USD_RATIO_TO_BASE_YR = USD_RATIO_TO_BASE_YR;
ALTER TABLE CT.PERIOD DROP COLUMN USD_RATIO_TO_BASE_YR;
ALTER TABLE CT.PERIOD RENAME COLUMN NEW_USD_RATIO_TO_BASE_YR TO USD_RATIO_TO_BASE_YR;
ALTER TABLE CT.PERIOD MODIFY USD_RATIO_TO_BASE_YR NOT NULL;
/******************************************************************/

ALTER TABLE CT.PERIOD MODIFY USD_RATIO_TO_BASE_YR DEFAULT NULL;

ALTER TABLE CT.PERIOD MODIFY USD_RATIO_TO_BASE_YR DEFAULT 1;

ALTER TABLE CT.PERIOD ADD CONSTRAINT CC_PERIOD_USD_RATIO_TO_BASE_YR 
    CHECK (USD_RATIO_TO_BASE_YR > 0);

/* ---------------------------------------------------------------------- */
/* Modify table "EC_TRAIN_TYPE"                                           */
/* ---------------------------------------------------------------------- */

ALTER TABLE CT.EC_TRAIN_TYPE DROP CONSTRAINT PK_TRAIN_TYPE;

ALTER TABLE CT.EC_TRAIN_TYPE ADD CONSTRAINT CC_EC_TRAIN_TY_IS_DEFAULT 
    CHECK (IS_DEFAULT IN (1,0));

ALTER TABLE CT.EC_TRAIN_TYPE ADD CONSTRAINT CC_EC_TRAIN_TY_KG_CO2_PER_KM 
    CHECK (KG_CO2_PER_KM_CONTRIBUTION >= 0);

ALTER TABLE CT.EC_TRAIN_TYPE ADD CONSTRAINT PK_EC_TRAIN_TY 
    PRIMARY KEY (TRAIN_TYPE_ID);

/* ---------------------------------------------------------------------- */
/* Modify table "BREAKDOWN_REGION"                                        */
/* ---------------------------------------------------------------------- */


ALTER TABLE CT.BREAKDOWN_REGION DROP CONSTRAINT PK_B_R;

ALTER TABLE CT.BREAKDOWN_REGION MODIFY APP_SID DEFAULT SYS_CONTEXT('SECURITY', 'APP');

/******************************************************************/
ALTER TABLE CT.BREAKDOWN_REGION ADD (NEW_PCT NUMBER(3));
UPDATE CT.BREAKDOWN_REGION SET NEW_PCT = PCT;
ALTER TABLE CT.BREAKDOWN_REGION DROP COLUMN PCT;
ALTER TABLE CT.BREAKDOWN_REGION RENAME COLUMN NEW_PCT TO PCT;
ALTER TABLE CT.BREAKDOWN_REGION MODIFY PCT NOT NULL;
/******************************************************************/

ALTER TABLE CT.BREAKDOWN_REGION ADD
    CHECK (PCT>=0 AND PCT<=100);

ALTER TABLE CT.BREAKDOWN_REGION ADD CONSTRAINT CC_B_R_FTE_TRAVEL 
    CHECK (FTE_TRAVEL >= 0);

ALTER TABLE CT.BREAKDOWN_REGION ADD CONSTRAINT PK_B_R 
    PRIMARY KEY (APP_SID, BREAKDOWN_ID, REGION_ID);

/* ---------------------------------------------------------------------- */
/* Modify table "HOTSPOT_RESULT"                                          */
/* ---------------------------------------------------------------------- */

ALTER TABLE CT.HOTSPOT_RESULT DROP CONSTRAINT NN_H_R_BUSINESS_TRAVEL_EMISS;

ALTER TABLE CT.HOTSPOT_RESULT MODIFY COMPANY_SID DEFAULT SYS_CONTEXT('SECURITY', 'CHAIN_COMPANY');

ALTER TABLE CT.HOTSPOT_RESULT ADD CONSTRAINT CC_H_R_BT_EMISSIONS 
    CHECK (BUSINESS_TRAVEL_EMISSIONS >= 0);

ALTER TABLE CT.HOTSPOT_RESULT ADD CONSTRAINT CC_H_R_DOWNSTREAM_EMISSIONS 
    CHECK (DOWNSTREAM_EMISSIONS >= 0);

ALTER TABLE CT.HOTSPOT_RESULT ADD CONSTRAINT CC_H_R_EMP_COMM_EMISSIONS 
    CHECK (EMP_COMM_EMISSIONS >= 0);

ALTER TABLE CT.HOTSPOT_RESULT ADD CONSTRAINT CC_H_R_PG_EMISSIONS 
    CHECK (PG_EMISSIONS >= 0);

ALTER TABLE CT.HOTSPOT_RESULT ADD CONSTRAINT CC_H_R_SCOPE_ONE_TWO_EMISSIONS 
    CHECK (SCOPE_ONE_TWO_EMISSIONS >= 0);

ALTER TABLE CT.HOTSPOT_RESULT ADD CONSTRAINT CC_H_R_UPSTREAM_EMISSIONS 
    CHECK (UPSTREAM_EMISSIONS >= 0);

ALTER TABLE CT.HOTSPOT_RESULT ADD CONSTRAINT CC_H_R_USE_EMISSIONS 
    CHECK (USE_EMISSIONS >= 0);

ALTER TABLE CT.HOTSPOT_RESULT ADD CONSTRAINT CC_H_R_WASTE_EMISSIONS 
    CHECK (WASTE_EMISSIONS >= 0);

/* ---------------------------------------------------------------------- */
/* Modify table "TEMPLATE_KEY"                                            */
/* ---------------------------------------------------------------------- */

ALTER TABLE CT.TEMPLATE_KEY ADD CONSTRAINT CC_TEMPLATE_KEY_POSITION 
    CHECK (POSITION >= 0);

/* ---------------------------------------------------------------------- */
/* Modify table "EC_PROFILE"                                              */
/* ---------------------------------------------------------------------- */

ALTER TABLE CT.EC_PROFILE DROP CONSTRAINT NN_EC_EST_APP_SID;

ALTER TABLE CT.EC_PROFILE DROP CONSTRAINT NN_EC_EST_COMPANY_SID;

ALTER TABLE CT.EC_PROFILE DROP CONSTRAINT NN_EC_EST_CAR_PCT_USE;

ALTER TABLE CT.EC_PROFILE DROP CONSTRAINT NN_EC_EST_BUS_PCT_USE;

ALTER TABLE CT.EC_PROFILE DROP CONSTRAINT NN_EC_EST_TRAIN_PCT_USE;

ALTER TABLE CT.EC_PROFILE DROP CONSTRAINT NN_EC_EST_MOTORBIKE_PCT_USE;

ALTER TABLE CT.EC_PROFILE DROP CONSTRAINT NN_EC_EST_BIKE_PCT_USE;

ALTER TABLE CT.EC_PROFILE DROP CONSTRAINT NN_EC_EST_WALK_PCT_USE;

ALTER TABLE CT.EC_PROFILE DROP CONSTRAINT NN_EC_EST_CAR_JOURNEY_KM;

ALTER TABLE CT.EC_PROFILE DROP CONSTRAINT NN_EC_EST_BUS_JOURNEY_KM;

ALTER TABLE CT.EC_PROFILE DROP CONSTRAINT NN_EC_EST_TRAIN_JOURNEY_KM;

ALTER TABLE CT.EC_PROFILE DROP CONSTRAINT NN_EC_EST_MOTORBIKE_JOURNEY_KM;

ALTER TABLE CT.EC_PROFILE DROP CONSTRAINT NN_EC_EST_BIKE_JOURNEY_KM;

ALTER TABLE CT.EC_PROFILE DROP CONSTRAINT NN_EC_EST_WALK_JOURNEY_KM;

ALTER TABLE CT.EC_PROFILE DROP CONSTRAINT PK_EC_EST;

ALTER TABLE CT.EC_PROFILE DROP CONSTRAINT CC_EC_EST_BIKE_PCT_USE;

ALTER TABLE CT.EC_PROFILE DROP CONSTRAINT CC_EC_EST_BUS_PCT_USE;

ALTER TABLE CT.EC_PROFILE DROP CONSTRAINT CC_EC_EST_CAR_PCT_USE;

ALTER TABLE CT.EC_PROFILE DROP CONSTRAINT CC_EC_EST_MOTORBIKE_PCT_USE;

ALTER TABLE CT.EC_PROFILE DROP CONSTRAINT CC_EC_EST_TRAIN_PCT_USE;

ALTER TABLE CT.EC_PROFILE DROP CONSTRAINT CC_EC_EST_WALK_PCT_USE;

ALTER TABLE CT.EC_PROFILE DROP COLUMN CAR_JOURNEY_KM;

ALTER TABLE CT.EC_PROFILE DROP COLUMN BUS_JOURNEY_KM;

ALTER TABLE CT.EC_PROFILE DROP COLUMN MOTORBIKE_JOURNEY_KM;

ALTER TABLE CT.EC_PROFILE DROP COLUMN BIKE_JOURNEY_KM;

ALTER TABLE CT.EC_PROFILE ADD
    BREAKDOWN_GROUP_ID NUMBER(10) NOT NULL;

ALTER TABLE CT.EC_PROFILE ADD
    CAR_AVG_DIST NUMBER(20,10) NOT NULL;

ALTER TABLE CT.EC_PROFILE ADD
    CAR_DISTANCE_UNIT_ID NUMBER(10);

ALTER TABLE CT.EC_PROFILE ADD
    BUS_AVG_DIST NUMBER(20,10) NOT NULL;

ALTER TABLE CT.EC_PROFILE ADD
    BUS_DISTANCE_UNIT_ID NUMBER(10);

ALTER TABLE CT.EC_PROFILE ADD
    TRAIN_DISTANCE_UNIT_ID NUMBER(10);

ALTER TABLE CT.EC_PROFILE ADD
    MOTORBIKE_DISTANCE_UNIT_ID NUMBER(10);

ALTER TABLE CT.EC_PROFILE ADD
    BIKE_AVG_DIST NUMBER(20,10) NOT NULL;

ALTER TABLE CT.EC_PROFILE ADD
    BIKE_DISTANCE_UNIT_ID NUMBER(10);

ALTER TABLE CT.EC_PROFILE ADD
    WALK_AVG_DIST NUMBER(20,10) NOT NULL;

ALTER TABLE CT.EC_PROFILE ADD
    WALK_DISTANCE_UNIT_ID NUMBER(10);

ALTER TABLE CT.EC_PROFILE RENAME COLUMN TRAIN_JOURNEY_KM TO TRAIN_AVG_DIST;

ALTER TABLE CT.EC_PROFILE RENAME COLUMN WALK_JOURNEY_KM TO MOTORBIKE_AVG_DIST;

ALTER TABLE CT.EC_PROFILE MODIFY APP_SID DEFAULT SYS_CONTEXT('SECURITY', 'APP');

ALTER TABLE CT.EC_PROFILE MODIFY COMPANY_SID DEFAULT SYS_CONTEXT('SECURITY', 'CHAIN_COMPANY');

ALTER TABLE CT.EC_PROFILE MODIFY CAR_PCT_USE NUMBER(20,17);

ALTER TABLE CT.EC_PROFILE MODIFY BUS_PCT_USE NUMBER(20,17);

ALTER TABLE CT.EC_PROFILE MODIFY TRAIN_PCT_USE NUMBER(20,17);

ALTER TABLE CT.EC_PROFILE MODIFY MOTORBIKE_PCT_USE NUMBER(20,17);

ALTER TABLE CT.EC_PROFILE MODIFY BIKE_PCT_USE NUMBER(20,17);

ALTER TABLE CT.EC_PROFILE MODIFY WALK_PCT_USE NUMBER(20,17);

ALTER TABLE CT.EC_PROFILE ADD CONSTRAINT CC_EC_PROFILE_BIKE_AVG_DIST 
    CHECK (BIKE_AVG_DIST > 0);

ALTER TABLE CT.EC_PROFILE ADD CONSTRAINT CC_EC_PROFILE_BIKE_PCT_USE 
    CHECK (BIKE_PCT_USE>=0 AND BIKE_PCT_USE<=100);

ALTER TABLE CT.EC_PROFILE ADD CONSTRAINT CC_EC_PROFILE_BUS_AVG_DIST 
    CHECK (BUS_AVG_DIST > 0);

ALTER TABLE CT.EC_PROFILE ADD CONSTRAINT CC_EC_PROFILE_BUS_PCT_USE 
    CHECK (BUS_PCT_USE>=0 AND BUS_PCT_USE<=100);

ALTER TABLE CT.EC_PROFILE ADD CONSTRAINT CC_EC_PROFILE_CAR_AVG_DIST 
    CHECK (CAR_AVG_DIST > 0);

ALTER TABLE CT.EC_PROFILE ADD CONSTRAINT CC_EC_PROFILE_CAR_PCT_USE 
    CHECK (CAR_PCT_USE>=0 AND CAR_PCT_USE<=100);

ALTER TABLE CT.EC_PROFILE ADD CONSTRAINT CC_EC_PROFILE_MB_JOURNEY_KM 
    CHECK (MOTORBIKE_AVG_DIST > 0);

ALTER TABLE CT.EC_PROFILE ADD CONSTRAINT CC_EC_PROFILE_MB_PCT_USE 
    CHECK (MOTORBIKE_PCT_USE>=0 AND MOTORBIKE_PCT_USE<=100);

ALTER TABLE CT.EC_PROFILE ADD CONSTRAINT CC_EC_PROFILE_TRAIN_AVG_DIST 
    CHECK (TRAIN_AVG_DIST > 0);

ALTER TABLE CT.EC_PROFILE ADD CONSTRAINT CC_EC_PROFILE_TRAIN_PCT_USE 
    CHECK (TRAIN_PCT_USE>=0 AND TRAIN_PCT_USE<=100);

ALTER TABLE CT.EC_PROFILE ADD CONSTRAINT CC_EC_PROFILE_WALK_AVG_DIST 
    CHECK (WALK_AVG_DIST > 0);

ALTER TABLE CT.EC_PROFILE ADD CONSTRAINT CC_EC_PROFILE_WALK_PCT_USE 
    CHECK (WALK_PCT_USE>=0 AND WALK_PCT_USE<=100);

ALTER TABLE CT.EC_PROFILE ADD CONSTRAINT PK_EC_PROFILE 
    PRIMARY KEY (APP_SID, COMPANY_SID, BREAKDOWN_GROUP_ID);

/* ---------------------------------------------------------------------- */
/* Modify table "EC_CAR_ENTRY"                                            */
/* ---------------------------------------------------------------------- */

ALTER TABLE CT.EC_CAR_ENTRY DROP CONSTRAINT NN_EC_CAR_APP_SID;

ALTER TABLE CT.EC_CAR_ENTRY DROP CONSTRAINT NN_EC_CAR_COMPANY_SID;

ALTER TABLE CT.EC_CAR_ENTRY DROP CONSTRAINT NN_EC_CAR_CAR_TYPE_ID;

ALTER TABLE CT.EC_CAR_ENTRY DROP CONSTRAINT NN_EC_CAR_PCT;

ALTER TABLE CT.EC_CAR_ENTRY DROP CONSTRAINT PK_EC_CAR;

ALTER TABLE CT.EC_CAR_ENTRY DROP CONSTRAINT CC_EC_CAR_PCT;

ALTER TABLE CT.EC_CAR_ENTRY ADD
    BREAKDOWN_GROUP_ID NUMBER(10) NOT NULL;

ALTER TABLE CT.EC_CAR_ENTRY MODIFY APP_SID DEFAULT SYS_CONTEXT('SECURITY', 'APP');

ALTER TABLE CT.EC_CAR_ENTRY MODIFY COMPANY_SID DEFAULT SYS_CONTEXT('SECURITY', 'CHAIN_COMPANY');

ALTER TABLE CT.EC_CAR_ENTRY MODIFY PCT NUMBER(3);

ALTER TABLE CT.EC_CAR_ENTRY ADD CONSTRAINT CC_EC_CAR_ENTRY_PCT 
    CHECK (PCT>=0 AND PCT<=100);

ALTER TABLE CT.EC_CAR_ENTRY ADD CONSTRAINT PK_EC_CAR_ENTRY 
    PRIMARY KEY (APP_SID, COMPANY_SID, CAR_TYPE_ID, BREAKDOWN_GROUP_ID);

/* ---------------------------------------------------------------------- */
/* Modify table "EC_BUS_ENTRY"                                            */
/* ---------------------------------------------------------------------- */

ALTER TABLE CT.EC_BUS_ENTRY DROP CONSTRAINT NN_EC_BUS_APP_SID;

ALTER TABLE CT.EC_BUS_ENTRY DROP CONSTRAINT NN_EC_BUS_COMPANY_SID;

ALTER TABLE CT.EC_BUS_ENTRY DROP CONSTRAINT NN_EC_BUS_BUS_TYPE_ID;

ALTER TABLE CT.EC_BUS_ENTRY DROP CONSTRAINT NN_EC_BUS_PCT;

ALTER TABLE CT.EC_BUS_ENTRY DROP CONSTRAINT PK_EC_BUS;

ALTER TABLE CT.EC_BUS_ENTRY DROP CONSTRAINT CC_EC_BUS_PCT;

ALTER TABLE CT.EC_BUS_ENTRY ADD
    BREAKDOWN_GROUP_ID NUMBER(10) NOT NULL;

ALTER TABLE CT.EC_BUS_ENTRY MODIFY APP_SID DEFAULT SYS_CONTEXT('SECURITY', 'APP');

ALTER TABLE CT.EC_BUS_ENTRY MODIFY COMPANY_SID DEFAULT SYS_CONTEXT('SECURITY', 'CHAIN_COMPANY');

ALTER TABLE CT.EC_BUS_ENTRY MODIFY PCT NUMBER(3);

ALTER TABLE CT.EC_BUS_ENTRY ADD CONSTRAINT CC_EC_BUS_ENTRY_PCT 
    CHECK (PCT>=0 AND PCT<=100);

ALTER TABLE CT.EC_BUS_ENTRY ADD CONSTRAINT PK_EC_BUS_ENTRY 
    PRIMARY KEY (APP_SID, COMPANY_SID, BUS_TYPE_ID, BREAKDOWN_GROUP_ID);

/* ---------------------------------------------------------------------- */
/* Modify table "EC_TRAIN_ENTRY"                                          */
/* ---------------------------------------------------------------------- */

ALTER TABLE CT.EC_TRAIN_ENTRY DROP CONSTRAINT NN_EC_TRAIN_APP_SID;

ALTER TABLE CT.EC_TRAIN_ENTRY DROP CONSTRAINT NN_EC_TRAIN_COMPANY_SID;

ALTER TABLE CT.EC_TRAIN_ENTRY DROP CONSTRAINT NN_EC_TRAIN_TRAIN_TYPE_ID;

ALTER TABLE CT.EC_TRAIN_ENTRY DROP CONSTRAINT NN_EC_TRAIN_PCT;

ALTER TABLE CT.EC_TRAIN_ENTRY DROP CONSTRAINT PK_EC_TRAIN;

ALTER TABLE CT.EC_TRAIN_ENTRY DROP CONSTRAINT CC_EC_TRAIN_PCT;

ALTER TABLE CT.EC_TRAIN_ENTRY ADD
    BREAKDOWN_GROUP_ID NUMBER(10) NOT NULL;

ALTER TABLE CT.EC_TRAIN_ENTRY MODIFY APP_SID DEFAULT SYS_CONTEXT('SECURITY', 'APP');

ALTER TABLE CT.EC_TRAIN_ENTRY MODIFY COMPANY_SID DEFAULT SYS_CONTEXT('SECURITY', 'CHAIN_COMPANY');

ALTER TABLE CT.EC_TRAIN_ENTRY MODIFY PCT NUMBER(3);

ALTER TABLE CT.EC_TRAIN_ENTRY ADD CONSTRAINT CC_EC_TRAIN_ENTRY_PCT 
    CHECK (PCT>=0 AND PCT<=100);

ALTER TABLE CT.EC_TRAIN_ENTRY ADD CONSTRAINT PK_EC_TRAIN_ENTRY 
    PRIMARY KEY (APP_SID, COMPANY_SID, TRAIN_TYPE_ID, BREAKDOWN_GROUP_ID);

/* ---------------------------------------------------------------------- */
/* Modify table "EC_MOTORBIKE_ENTRY"                                      */
/* ---------------------------------------------------------------------- */

ALTER TABLE CT.EC_MOTORBIKE_ENTRY DROP CONSTRAINT NN_EC_MB_APP_SID;

ALTER TABLE CT.EC_MOTORBIKE_ENTRY DROP CONSTRAINT NN_EC_MB_COMPANY_SID;

ALTER TABLE CT.EC_MOTORBIKE_ENTRY DROP CONSTRAINT NN_EC_MB_MOTORBIKE_TYPE_ID;

ALTER TABLE CT.EC_MOTORBIKE_ENTRY DROP CONSTRAINT NN_EC_MB_PCT;

ALTER TABLE CT.EC_MOTORBIKE_ENTRY DROP CONSTRAINT PK_EC_MB;

ALTER TABLE CT.EC_MOTORBIKE_ENTRY DROP CONSTRAINT CC_EC_MB_PCT;

ALTER TABLE CT.EC_MOTORBIKE_ENTRY ADD
    BREAKDOWN_GROUP_ID NUMBER(10) NOT NULL;

ALTER TABLE CT.EC_MOTORBIKE_ENTRY MODIFY APP_SID DEFAULT SYS_CONTEXT('SECURITY', 'APP');

ALTER TABLE CT.EC_MOTORBIKE_ENTRY MODIFY COMPANY_SID DEFAULT SYS_CONTEXT('SECURITY', 'CHAIN_COMPANY');

ALTER TABLE CT.EC_MOTORBIKE_ENTRY MODIFY PCT NUMBER(3);

ALTER TABLE CT.EC_MOTORBIKE_ENTRY ADD CONSTRAINT CC_EC_MB_ENTRY_PCT 
    CHECK (PCT>=0 AND PCT<=100);

ALTER TABLE CT.EC_MOTORBIKE_ENTRY ADD CONSTRAINT PK_EC_MB_ENTRY 
    PRIMARY KEY (APP_SID, COMPANY_SID, MOTORBIKE_TYPE_ID, BREAKDOWN_GROUP_ID);

/* ---------------------------------------------------------------------- */
/* Modify table "WORKSHEET"                                               */
/* ---------------------------------------------------------------------- */


ALTER TABLE CT.WORKSHEET DROP CONSTRAINT PK_WORKSHEET;

ALTER TABLE CT.WORKSHEET MODIFY APP_SID DEFAULT SYS_CONTEXT('SECURITY', 'APP');

ALTER TABLE CT.WORKSHEET ADD CONSTRAINT PK_WORKSHEET 
    PRIMARY KEY (APP_SID, FILE_UPLOAD_SID, SHEET_INDEX);

/* ---------------------------------------------------------------------- */
/* Modify table "BRICK"                                                   */
/* ---------------------------------------------------------------------- */

ALTER TABLE CT.BRICK DROP CONSTRAINT PK_BRICK;

ALTER TABLE CT.BRICK MODIFY APP_SID DEFAULT SYS_CONTEXT('SECURITY', 'APP');

ALTER TABLE CT.BRICK MODIFY COMPANY_SID DEFAULT SYS_CONTEXT('SECURITY', 'CHAIN_COMPANY');

ALTER TABLE CT.BRICK ADD CONSTRAINT PK_BRICK 
    PRIMARY KEY (APP_SID, BRICK_ID);

/* ---------------------------------------------------------------------- */
/* Modify table "UP_PRODUCT"                                              */
/* ---------------------------------------------------------------------- */
ALTER TABLE CT.UP_PRODUCT DROP CONSTRAINT PK_UP_PRODUCT;

ALTER TABLE CT.UP_PRODUCT MODIFY APP_SID DEFAULT SYS_CONTEXT('SECURITY', 'APP');

ALTER TABLE CT.UP_PRODUCT MODIFY COMPANY_SID DEFAULT SYS_CONTEXT('SECURITY', 'CHAIN_COMPANY');

ALTER TABLE CT.UP_PRODUCT ADD CONSTRAINT PK_UP_PRODUCT 
    PRIMARY KEY (APP_SID, COMPANY_SID, UP_PRODUCT_ID);

/* ---------------------------------------------------------------------- */
/* Modify table "WORKSHEET_ROW"                                           */
/* ---------------------------------------------------------------------- */


ALTER TABLE CT.WORKSHEET_ROW DROP CONSTRAINT PK_WORKSHEET_ROW;

ALTER TABLE CT.WORKSHEET_ROW DROP CONSTRAINT CC_WORKSHEET_ROW_IGNORE;

ALTER TABLE CT.WORKSHEET_ROW DROP CONSTRAINT TUC_WORKSHEET_ROW_1;

ALTER TABLE CT.WORKSHEET_ROW MODIFY APP_SID DEFAULT SYS_CONTEXT('SECURITY', 'APP');

ALTER TABLE CT.WORKSHEET_ROW ADD
    CHECK (ROW_INDEX >= 0);

ALTER TABLE CT.WORKSHEET_ROW ADD CONSTRAINT CC_WORKSHEET_ROW_IGNORE 
    CHECK (IGNORE IN (1,0));

ALTER TABLE CT.WORKSHEET_ROW ADD CONSTRAINT PK_WORKSHEET_ROW 
    PRIMARY KEY (APP_SID, WORKSHEET_ROW_ID);

ALTER TABLE CT.WORKSHEET_ROW ADD CONSTRAINT TUC_WORKSHEET_ROW_1 
    UNIQUE (APP_SID, FILE_UPLOAD_SID, SHEET_INDEX, ROW_INDEX);

/* ---------------------------------------------------------------------- */
/* Modify table "BT_REGION_FACTORS"                                       */
/* ---------------------------------------------------------------------- */

ALTER TABLE CT.BT_REGION_FACTORS DROP CONSTRAINT PK_;

ALTER TABLE CT.BT_REGION_FACTORS ADD
    CAR_PCT NUMBER(20,17) DEFAULT 0 NOT NULL;

ALTER TABLE CT.BT_REGION_FACTORS ADD
    CAR_AVG_DIST_KM NUMBER(20,10) DEFAULT 0 NOT NULL;

ALTER TABLE CT.BT_REGION_FACTORS ADD
    CAR_AVG_SPEED_KM NUMBER(20,10) DEFAULT 0 NOT NULL;

ALTER TABLE CT.BT_REGION_FACTORS ADD
    CAR_OCCUPANCY_RATE NUMBER(20,10) DEFAULT 0 NOT NULL;

ALTER TABLE CT.BT_REGION_FACTORS ADD
    BUS_PCT NUMBER(20,17) DEFAULT 0 NOT NULL;

ALTER TABLE CT.BT_REGION_FACTORS ADD
    BUS_AVG_DIST_KM NUMBER(20,10) DEFAULT 0 NOT NULL;

ALTER TABLE CT.BT_REGION_FACTORS ADD
    BUS_AVG_SPEED_KM NUMBER(20,10) DEFAULT 0 NOT NULL;

ALTER TABLE CT.BT_REGION_FACTORS ADD
    TRAIN_PCT NUMBER(20,17) DEFAULT 0 NOT NULL;

ALTER TABLE CT.BT_REGION_FACTORS ADD
    TRAIN_AVG_DIST_KM NUMBER(20,10) DEFAULT 0 NOT NULL;

ALTER TABLE CT.BT_REGION_FACTORS ADD
    TRAIN_AVG_SPEED_KM NUMBER(20,10) DEFAULT 0 NOT NULL;

ALTER TABLE CT.BT_REGION_FACTORS ADD
    MOTORBIKE_PCT NUMBER(20,17) DEFAULT 0 NOT NULL;

ALTER TABLE CT.BT_REGION_FACTORS ADD
    MOTORBIKE_AVG_DIST_KM NUMBER(20,10) DEFAULT 0 NOT NULL;

ALTER TABLE CT.BT_REGION_FACTORS ADD
    MOTORBIKE_AVG_SPEED_KM NUMBER(20,10) DEFAULT 0 NOT NULL;

ALTER TABLE CT.BT_REGION_FACTORS ADD
    BIKE_PCT NUMBER(20,17) DEFAULT 0 NOT NULL;

ALTER TABLE CT.BT_REGION_FACTORS ADD
    BIKE_AVG_DIST_KM NUMBER(20,10) DEFAULT 0 NOT NULL;

ALTER TABLE CT.BT_REGION_FACTORS ADD
    BIKE_AVG_SPEED_KM NUMBER(20,10) DEFAULT 0 NOT NULL;

ALTER TABLE CT.BT_REGION_FACTORS ADD
    WALK_PCT NUMBER(20,17) DEFAULT 0 NOT NULL;

ALTER TABLE CT.BT_REGION_FACTORS ADD
    WALK_AVG_DIST_KM NUMBER(20,10) DEFAULT 0 NOT NULL;

ALTER TABLE CT.BT_REGION_FACTORS ADD
    WALK_AVG_SPEED_KM NUMBER(20,10) DEFAULT 0 NOT NULL;

ALTER TABLE CT.BT_REGION_FACTORS ADD
    AIR_PCT NUMBER(20,17) DEFAULT 0 NOT NULL;

ALTER TABLE CT.BT_REGION_FACTORS ADD
    AIR_AVG_DIST_KM NUMBER(20,10) DEFAULT 0 NOT NULL;

ALTER TABLE CT.BT_REGION_FACTORS ADD
    AIR_AVG_SPEED_KM NUMBER(20,10) DEFAULT 0 NOT NULL;

ALTER TABLE CT.BT_REGION_FACTORS ADD
    AIR_RADIATIVE_FORCING NUMBER(20,10) DEFAULT 0 NOT NULL;

ALTER TABLE CT.BT_REGION_FACTORS ADD
    AVG_NUM_TRIPS_YR NUMBER(20,10) DEFAULT 0 NOT NULL;

ALTER TABLE CT.BT_REGION_FACTORS ADD CONSTRAINT CC_BTRF_AIR_AVG_DIST_KM 
    CHECK (AIR_AVG_DIST_KM >= 0);

ALTER TABLE CT.BT_REGION_FACTORS ADD CONSTRAINT CC_BTRF_AIR_AVG_SPEED_KM 
    CHECK (AIR_AVG_SPEED_KM >= 0);

ALTER TABLE CT.BT_REGION_FACTORS ADD CONSTRAINT CC_BTRF_AIR_PCT 
    CHECK (AIR_PCT>=0 AND AIR_PCT<=100);

ALTER TABLE CT.BT_REGION_FACTORS ADD CONSTRAINT CC_BTRF_AIR_RADIATIVE_FORCING 
    CHECK (AIR_RADIATIVE_FORCING >= 0);

ALTER TABLE CT.BT_REGION_FACTORS ADD CONSTRAINT CC_BTRF_AVG_NUM_TRIPS_YR 
    CHECK (AVG_NUM_TRIPS_YR >= 0);

ALTER TABLE CT.BT_REGION_FACTORS ADD CONSTRAINT CC_BTRF_BIKE_AVG_DIST_KM 
    CHECK (BIKE_AVG_DIST_KM >= 0);

ALTER TABLE CT.BT_REGION_FACTORS ADD CONSTRAINT CC_BTRF_BIKE_AVG_SPEED_KM 
    CHECK (BIKE_AVG_SPEED_KM >= 0);

ALTER TABLE CT.BT_REGION_FACTORS ADD CONSTRAINT CC_BTRF_BIKE_PCT 
    CHECK (BIKE_PCT>=0 AND BIKE_PCT<=100);

ALTER TABLE CT.BT_REGION_FACTORS ADD CONSTRAINT CC_BTRF_BUS_AVG_DIST_KM 
    CHECK (BUS_AVG_DIST_KM >= 0);

ALTER TABLE CT.BT_REGION_FACTORS ADD CONSTRAINT CC_BTRF_BUS_AVG_SPEED_KM 
    CHECK (BUS_AVG_SPEED_KM >= 0);

ALTER TABLE CT.BT_REGION_FACTORS ADD CONSTRAINT CC_BTRF_BUS_PCT 
    CHECK (BUS_PCT>=0 AND BUS_PCT<=100);

ALTER TABLE CT.BT_REGION_FACTORS ADD CONSTRAINT CC_BTRF_CAR_AVG_DIST_KM 
    CHECK (CAR_AVG_DIST_KM >= 0);

ALTER TABLE CT.BT_REGION_FACTORS ADD CONSTRAINT CC_BTRF_CAR_AVG_SPEED_KM 
    CHECK (CAR_AVG_SPEED_KM >= 0);

ALTER TABLE CT.BT_REGION_FACTORS ADD CONSTRAINT CC_BTRF_CAR_OCCUPANCY_RATE 
    CHECK (CAR_OCCUPANCY_RATE >= 0);

ALTER TABLE CT.BT_REGION_FACTORS ADD CONSTRAINT CC_BTRF_CAR_PCT 
    CHECK (CAR_PCT>=0 AND CAR_PCT<=100);

ALTER TABLE CT.BT_REGION_FACTORS ADD CONSTRAINT CC_BTRF_MOTORBIKE_AVG_DIST_KM 
    CHECK (MOTORBIKE_AVG_DIST_KM >= 0);

ALTER TABLE CT.BT_REGION_FACTORS ADD CONSTRAINT CC_BTRF_MOTORBIKE_AVG_SPEED_KM 
    CHECK (MOTORBIKE_AVG_SPEED_KM >= 0);

ALTER TABLE CT.BT_REGION_FACTORS ADD CONSTRAINT CC_BTRF_MOTORBIKE_PCT 
    CHECK (MOTORBIKE_PCT>=0 AND MOTORBIKE_PCT<=100);

ALTER TABLE CT.BT_REGION_FACTORS ADD CONSTRAINT CC_BTRF_TEMP_EMISSION_FACTOR 
    CHECK (TEMP_EMISSION_FACTOR >= 0);

ALTER TABLE CT.BT_REGION_FACTORS ADD CONSTRAINT CC_BTRF_TRAIN_AVG_DIST_KM 
    CHECK (TRAIN_AVG_DIST_KM >= 0);

ALTER TABLE CT.BT_REGION_FACTORS ADD CONSTRAINT CC_BTRF_TRAIN_AVG_SPEED_KM 
    CHECK (TRAIN_AVG_SPEED_KM >= 0);

ALTER TABLE CT.BT_REGION_FACTORS ADD CONSTRAINT CC_BTRF_TRAIN_PCT 
    CHECK (TRAIN_PCT>=0 AND TRAIN_PCT<=100);

ALTER TABLE CT.BT_REGION_FACTORS ADD CONSTRAINT CC_BTRF_WALK_AVG_DIST_KM 
    CHECK (WALK_AVG_DIST_KM >= 0);

ALTER TABLE CT.BT_REGION_FACTORS ADD CONSTRAINT CC_BTRF_WALK_AVG_SPEED_KM 
    CHECK (WALK_AVG_SPEED_KM >= 0);

ALTER TABLE CT.BT_REGION_FACTORS ADD CONSTRAINT CC_BTRF_WALK_PCT 
    CHECK (WALK_PCT>=0 AND WALK_PCT<=100);

ALTER TABLE CT.BT_REGION_FACTORS ADD CONSTRAINT PK_BTRF 
    PRIMARY KEY (REGION_ID);

/* ---------------------------------------------------------------------- */
/* Add table "BT_PROFILE"                                                 */
/* ---------------------------------------------------------------------- */

CREATE TABLE CT.BT_PROFILE (
    APP_SID NUMBER(10) NOT NULL,
    COMPANY_SID NUMBER(10) NOT NULL,
    BREAKDOWN_ID NUMBER(10) NOT NULL,
    REGION_ID NUMBER(10) NOT NULL,
    FTE_WHO_TRAVEL_PCT NUMBER(3) NOT NULL,
    CAR_TRIPS_PPY NUMBER(20,10) NOT NULL,
    CAR_USE_PCT NUMBER(3) NOT NULL,
    CAR_TRIP_TIME_MIN NUMBER(20,10),
    CAR_TRIP_DIST NUMBER(20,10),
    CAR_DISTANCE_UNIT_ID NUMBER(10),
    CAR_ESTIMATE_TYPE_ID NUMBER(10) DEFAULT 2 NOT NULL,
    BUS_TRIPS_PPY NUMBER(20,10) NOT NULL,
    BUS_USE_PCT NUMBER(3) NOT NULL,
    BUS_TRIP_TIME_MIN NUMBER(20,10),
    BUS_TRIP_DIST NUMBER(20,10),
    BUS_DISTANCE_UNIT_ID NUMBER(10),
    BUS_ESTIMATE_TYPE_ID NUMBER(10) DEFAULT 2 NOT NULL,
    TRAIN_TRIPS_PPY NUMBER(20,10) NOT NULL,
    TRAIN_USE_PCT NUMBER(3) NOT NULL,
    TRAIN_TRIP_TIME_MIN NUMBER(20,10),
    TRAIN_TRIP_DIST NUMBER(20,10),
    TRAIN_DISTANCE_UNIT_ID NUMBER(10),
    TRAIN_ESTIMATE_TYPE_ID NUMBER(10) DEFAULT 2 NOT NULL,
    MOTORBIKE_TRIPS_PPY NUMBER(20,10) NOT NULL,
    MOTORBIKE_USE_PCT NUMBER(3) NOT NULL,
    MOTORBIKE_TRIP_TIME_MIN NUMBER(20,10),
    MOTORBIKE_TRIP_DIST NUMBER(20,10),
    MOTORBIKE_DISTANCE_UNIT_ID NUMBER(10),
    MOTORBIKE_ESTIMATE_TYPE_ID NUMBER(10) DEFAULT 2 NOT NULL,
    BIKE_TRIPS_PPY NUMBER(20,10) NOT NULL,
    BIKE_USE_PCT NUMBER(3) NOT NULL,
    BIKE_TRIP_TIME_MIN NUMBER(20,10),
    BIKE_TRIP_DIST NUMBER(20,10),
    BIKE_DISTANCE_UNIT_ID NUMBER(10),
    BIKE_ESTIMATE_TYPE_ID NUMBER(10) DEFAULT 2 NOT NULL,
    WALK_TRIPS_PPY NUMBER(20,10) NOT NULL,
    WALK_USE_PCT NUMBER(3) NOT NULL,
    WALK_TRIP_TIME_MIN NUMBER(20,10),
    WALK_TRIP_DIST NUMBER(20,10),
    WALK_DISTANCE_UNIT_ID NUMBER(10),
    WALK_ESTIMATE_TYPE_ID NUMBER(10) DEFAULT 2 NOT NULL,
    AIR_TRIPS_PPY NUMBER(20,10) NOT NULL,
    AIR_USE_PCT NUMBER(3) NOT NULL,
    AIR_TRIP_TIME_MIN NUMBER(20,10),
    AIR_TRIP_DIST NUMBER(20,10),
    AIR_DISTANCE_UNIT_ID NUMBER(10),
    AIR_ESTIMATE_TYPE_ID NUMBER(10) DEFAULT 2 NOT NULL,
    CONSTRAINT PK_BT_PRF PRIMARY KEY (APP_SID, COMPANY_SID, BREAKDOWN_ID, REGION_ID),
    CONSTRAINT TCC_BT_PRF_CAR CHECK (((CAR_ESTIMATE_TYPE_ID = 2) AND (CAR_TRIP_DIST IS NOT NULL) AND (CAR_DISTANCE_UNIT_ID IS NOT NULL) OR (CAR_ESTIMATE_TYPE_ID = 3) AND (CAR_TRIP_TIME_MIN IS NOT NULL))),
    CONSTRAINT TCC_BT_PRF_BUS CHECK (((BUS_ESTIMATE_TYPE_ID = 2) AND (BUS_TRIP_DIST IS NOT NULL) AND (BUS_DISTANCE_UNIT_ID IS NOT NULL) OR (BUS_ESTIMATE_TYPE_ID = 3) AND (BUS_TRIP_TIME_MIN IS NOT NULL))),
    CONSTRAINT TCC_BT_PRF_TRAIN CHECK (((TRAIN_ESTIMATE_TYPE_ID = 2) AND (TRAIN_TRIP_DIST IS NOT NULL) AND (TRAIN_DISTANCE_UNIT_ID IS NOT NULL) OR (TRAIN_ESTIMATE_TYPE_ID = 3) AND (TRAIN_TRIP_TIME_MIN IS NOT NULL))),
    CONSTRAINT TCC_BT_PRF_MOTORBIKE CHECK (((MOTORBIKE_ESTIMATE_TYPE_ID = 2) AND (MOTORBIKE_TRIP_DIST IS NOT NULL) AND (MOTORBIKE_DISTANCE_UNIT_ID IS NOT NULL) OR (MOTORBIKE_ESTIMATE_TYPE_ID = 3) AND (MOTORBIKE_TRIP_TIME_MIN IS NOT NULL))),
    CONSTRAINT TCC_BT_PRF_WALK CHECK (((WALK_ESTIMATE_TYPE_ID = 2) AND (WALK_TRIP_DIST IS NOT NULL) AND (WALK_DISTANCE_UNIT_ID IS NOT NULL) OR (WALK_ESTIMATE_TYPE_ID = 3) AND (WALK_TRIP_TIME_MIN IS NOT NULL))),
    CONSTRAINT TCC_BT_PRF_BIKE CHECK (((BIKE_ESTIMATE_TYPE_ID = 2) AND (BIKE_TRIP_DIST IS NOT NULL) AND (BIKE_DISTANCE_UNIT_ID IS NOT NULL) OR (BIKE_ESTIMATE_TYPE_ID = 3) AND (BIKE_TRIP_TIME_MIN IS NOT NULL))),
    CONSTRAINT TCC_BT_PRF_AIR CHECK (((AIR_ESTIMATE_TYPE_ID = 2) AND (AIR_TRIP_DIST IS NOT NULL) AND (AIR_DISTANCE_UNIT_ID IS NOT NULL) OR (AIR_ESTIMATE_TYPE_ID = 3) AND (AIR_TRIP_TIME_MIN IS NOT NULL)))
);

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT CC_BT_PRF_AIR_EST_TYPE_ID 
    CHECK (AIR_ESTIMATE_TYPE_ID IN (2,3));

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT CC_BT_PRF_AIR_TRIPS_PPY 
    CHECK (AIR_TRIPS_PPY >= 0);

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT CC_BT_PRF_AIR_TRIP_DIST 
    CHECK (AIR_TRIP_DIST >= 0);

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT CC_BT_PRF_AIR_TRIP_TIME_MIN 
    CHECK (AIR_TRIP_TIME_MIN >= 0);

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT CC_BT_PRF_AIR_USE_PCT 
    CHECK (AIR_USE_PCT>=0 AND AIR_USE_PCT<=100);

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT CC_BT_PRF_BIKE_EST_TYPE_ID 
    CHECK (BIKE_ESTIMATE_TYPE_ID IN (2,3));

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT CC_BT_PRF_BIKE_TRIPS_PPY 
    CHECK (BIKE_TRIPS_PPY >= 0);

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT CC_BT_PRF_BIKE_TRIP_DIST 
    CHECK (BIKE_TRIP_DIST >= 0);

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT CC_BT_PRF_BIKE_TRIP_TIME_MIN 
    CHECK (BIKE_TRIP_TIME_MIN >= 0);

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT CC_BT_PRF_BIKE_USE_PCT 
    CHECK (BIKE_USE_PCT>=0 AND BIKE_USE_PCT<=100);

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT CC_BT_PRF_BUS_EST_TYPE_ID 
    CHECK (BUS_ESTIMATE_TYPE_ID IN (2,3));

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT CC_BT_PRF_BUS_TRIPS_PPY 
    CHECK (BUS_TRIPS_PPY >= 0);

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT CC_BT_PRF_BUS_TRIP_DIST 
    CHECK (BUS_TRIP_DIST >= 0);

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT CC_BT_PRF_BUS_TRIP_TIME_MIN 
    CHECK (BUS_TRIP_TIME_MIN >= 0);

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT CC_BT_PRF_BUS_USE_PCT 
    CHECK (BUS_USE_PCT>=0 AND BUS_USE_PCT<=100);

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT CC_BT_PRF_CAR_EST_TYPE_ID 
    CHECK (CAR_ESTIMATE_TYPE_ID IN (2,3));

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT CC_BT_PRF_CAR_TRIPS_PPY 
    CHECK (CAR_TRIPS_PPY >= 0);

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT CC_BT_PRF_CAR_TRIP_DIST 
    CHECK (CAR_TRIP_DIST >= 0);

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT CC_BT_PRF_CAR_TRIP_TIME_MIN 
    CHECK (CAR_TRIP_TIME_MIN >= 0);

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT CC_BT_PRF_CAR_USE_PCT 
    CHECK (CAR_USE_PCT>=0 AND CAR_USE_PCT<=100);

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT CC_BT_PRF_FTE_WHO_TRAVEL_PCT 
    CHECK (FTE_WHO_TRAVEL_PCT>=0 AND FTE_WHO_TRAVEL_PCT<=100);

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT CC_BT_PRF_MB_EST_TYPE_ID 
    CHECK (MOTORBIKE_ESTIMATE_TYPE_ID IN (2,3));

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT CC_BT_PRF_MB_TRIP_TIME_MIN 
    CHECK (MOTORBIKE_TRIP_TIME_MIN >= 0);

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT CC_BT_PRF_MOTORBIKE_TRIPS_PPY 
    CHECK (MOTORBIKE_TRIPS_PPY >= 0);

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT CC_BT_PRF_MOTORBIKE_TRIP_DIST 
    CHECK (MOTORBIKE_TRIP_DIST >= 0);

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT CC_BT_PRF_MOTORBIKE_USE_PCT 
    CHECK (MOTORBIKE_USE_PCT>=0 AND MOTORBIKE_USE_PCT<=100);

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT CC_BT_PRF_TRAIN_EST_TYPE_ID 
    CHECK (TRAIN_ESTIMATE_TYPE_ID IN (2,3));

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT CC_BT_PRF_TRAIN_TRIPS_PPY 
    CHECK (TRAIN_TRIPS_PPY >= 0);

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT CC_BT_PRF_TRAIN_TRIP_DIST 
    CHECK (TRAIN_TRIP_DIST >= 0);

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT CC_BT_PRF_TRAIN_TRIP_TIME_MIN 
    CHECK (TRAIN_TRIP_TIME_MIN >= 0);

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT CC_BT_PRF_TRAIN_USE_PCT 
    CHECK (TRAIN_USE_PCT>=0 AND TRAIN_USE_PCT<=100);

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT CC_BT_PRF_WALK_EST_TYPE_ID 
    CHECK (WALK_ESTIMATE_TYPE_ID IN (2,3));

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT CC_BT_PRF_WALK_TRIPS_PPY 
    CHECK (WALK_TRIPS_PPY >= 0);

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT CC_BT_PRF_WALK_TRIP_DIST 
    CHECK (WALK_TRIP_DIST >= 0);

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT CC_BT_PRF_WALK_TRIP_TIME_MIN 
    CHECK (WALK_TRIP_TIME_MIN >= 0);

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT CC_BT_PRF_WALK_USE_PCT 
    CHECK (WALK_USE_PCT>=0 AND WALK_USE_PCT<=100);

/* ---------------------------------------------------------------------- */
/* Add table "DATA_SOURCE"                                                */
/* ---------------------------------------------------------------------- */

CREATE TABLE CT.DATA_SOURCE (
    DATA_SOURCE_ID NUMBER(10) NOT NULL,
    KEY VARCHAR2(100) NOT NULL,
    SOURCE_DESCRIPTION VARCHAR(4000) NOT NULL,
    CONSTRAINT PK_DATA_SOURCE PRIMARY KEY (DATA_SOURCE_ID)
);

CREATE UNIQUE INDEX CT.IDX_DATA_SOURCE_1 ON CT.DATA_SOURCE (KEY);

/* ---------------------------------------------------------------------- */
/* Add table "DATA_SOURCE_URL"                                            */
/* ---------------------------------------------------------------------- */

CREATE TABLE CT.DATA_SOURCE_URL (
    DATA_SOURCE_ID NUMBER(10) NOT NULL,
    URL_POS_ID NUMBER(10) NOT NULL,
    TEXT VARCHAR2(500) NOT NULL,
    URL VARCHAR2(500) NOT NULL,
    CONSTRAINT PK_ PRIMARY KEY (DATA_SOURCE_ID, URL_POS_ID)
);

/* ---------------------------------------------------------------------- */
/* Add table "TRAVEL_MODE"                                                */
/* ---------------------------------------------------------------------- */

CREATE TABLE CT.TRAVEL_MODE (
    TRAVEL_MODE_ID NUMBER(10) NOT NULL,
    DESCRIPTION VARCHAR2(100) NOT NULL,
    CONSTRAINT PK_TRAVEL_MODE PRIMARY KEY (TRAVEL_MODE_ID)
);

/* ---------------------------------------------------------------------- */
/* Add table "BT_TRAVEL_MODE"                                             */
/* ---------------------------------------------------------------------- */

CREATE TABLE CT.BT_TRAVEL_MODE (
    TRAVEL_MODE_ID NUMBER(10) NOT NULL,
    BT_TRAVEL_MODE_ID NUMBER(10) NOT NULL,
    DESCRIPTION VARCHAR2(100),
    EF_PER_KM NUMBER(20,10) NOT NULL,
    EIO_KG_CO2_PER_GBP NUMBER(20,10) NOT NULL,
    CONSTRAINT PK_BT_TR_MD PRIMARY KEY (TRAVEL_MODE_ID, BT_TRAVEL_MODE_ID)
);

ALTER TABLE CT.BT_TRAVEL_MODE ADD CONSTRAINT CC_BT_TR_MD_EF_PER_KM 
    CHECK (EF_PER_KM >= 0);

ALTER TABLE CT.BT_TRAVEL_MODE ADD CONSTRAINT CC_BT_TR_MD_EIO_KG_CO2 
    CHECK (EIO_KG_CO2_PER_GBP >= 0);

/* ---------------------------------------------------------------------- */
/* Add table "BT_FUEL"                                                    */
/* ---------------------------------------------------------------------- */

CREATE TABLE CT.BT_FUEL (
    BT_FUEL_ID NUMBER(10) NOT NULL,
    DESCRIPTION VARCHAR2(500) NOT NULL,
    CONSTRAINT PK_BT_FUEL PRIMARY KEY (BT_FUEL_ID)
);

/* ---------------------------------------------------------------------- */
/* Add table "VOLUME_UNIT"                                                */
/* ---------------------------------------------------------------------- */

CREATE TABLE CT.VOLUME_UNIT (
    VOLUME_UNIT_ID NUMBER(10) NOT NULL,
    DESCRIPTION VARCHAR2(100) NOT NULL,
    SYMBOL VARCHAR2(40) NOT NULL,
    CONVERSION_TO_LITRES NUMBER(20,10) NOT NULL,
    CONSTRAINT PK_VOLUME_UNIT PRIMARY KEY (VOLUME_UNIT_ID)
);

ALTER TABLE CT.VOLUME_UNIT ADD
    CHECK (CONVERSION_TO_LITRES > 0);

/* ---------------------------------------------------------------------- */
/* Add table "DISTANCE_UNIT"                                              */
/* ---------------------------------------------------------------------- */

CREATE TABLE CT.DISTANCE_UNIT (
    DISTANCE_UNIT_ID NUMBER(10) NOT NULL,
    DESCRIPTION VARCHAR2(100) NOT NULL,
    SYMBOL VARCHAR2(40) NOT NULL,
    CONVERSION_TO_KM NUMBER(20,10) NOT NULL,
    CONSTRAINT PK_DIST_UNIT PRIMARY KEY (DISTANCE_UNIT_ID)
);

ALTER TABLE CT.DISTANCE_UNIT ADD CONSTRAINT CC_DIST_UNIT_CONV_TO_KM 
    CHECK (CONVERSION_TO_KM > 0);

/* ---------------------------------------------------------------------- */
/* Add table "BT_ESTIMATE_TYPE"                                           */
/* ---------------------------------------------------------------------- */

CREATE TABLE CT.BT_ESTIMATE_TYPE (
    BT_ESTIMATE_TYPE_ID NUMBER(10) NOT NULL,
    DESCRIPTION VARCHAR2(100) NOT NULL,
    CONSTRAINT PK_BT_EST_TYPE PRIMARY KEY (BT_ESTIMATE_TYPE_ID)
);

/* ---------------------------------------------------------------------- */
/* Add table "BT_CAR_TRIP"                                                */
/* ---------------------------------------------------------------------- */

CREATE TABLE CT.BT_CAR_TRIP (
    APP_SID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'APP') NOT NULL,
    COMPANY_SID NUMBER(10) NOT NULL,
    BREAKDOWN_GROUP_ID NUMBER(10) NOT NULL,
    BT_TRAVEL_MODE_ID NUMBER(10) NOT NULL,
    TRAVEL_MODE_ID NUMBER(10) NOT NULL,
    FUEL_AMOUNT NUMBER(20,10),
    BT_FUEL_ID NUMBER(10),
    FUEL_UNIT_ID NUMBER(10),
    DISTANCE_AMOUNT NUMBER(20,10),
    DISTANCE_UNIT_ID NUMBER(10),
    TIME_IN_MINS NUMBER(20,10),
    SPEND_AMOUNT NUMBER(20,10),
    CURRENCY_ID NUMBER(10),
    JOURNEY_DATE DATE,
    TRANSACTION_DATE DATE,
    LAST_EDITED_DTM DATE DEFAULT SYSDATE NOT NULL,
    LAST_EDITED_BY_SID NUMBER(10) NOT NULL,
    BT_ESTIMATE_TYPE_ID NUMBER(10) NOT NULL,
    PRIMARY KEY (APP_SID, COMPANY_SID, BREAKDOWN_GROUP_ID),
    CONSTRAINT TCC_BT_CAR_TRIP_COMPLETE CHECK (((BT_ESTIMATE_TYPE_ID = 1) AND (FUEL_AMOUNT IS NOT NULL) AND (BT_FUEL_ID IS NOT NULL) AND (FUEL_UNIT_ID IS NOT NULL)) OR ((BT_ESTIMATE_TYPE_ID = 2) AND (DISTANCE_AMOUNT IS NOT NULL) AND (DISTANCE_UNIT_ID IS NOT NULL)) OR ((BT_ESTIMATE_TYPE_ID = 3) AND (TIME_IN_MINS IS NOT NULL)) OR ((BT_ESTIMATE_TYPE_ID = 4) AND (SPEND_AMOUNT IS NOT NULL) AND (CURRENCY_ID IS NOT NULL)))
);

ALTER TABLE CT.BT_CAR_TRIP ADD
    CHECK (SPEND_AMOUNT > 0);

ALTER TABLE CT.BT_CAR_TRIP ADD
    CHECK (TIME_IN_MINS > 0);

ALTER TABLE CT.BT_CAR_TRIP ADD CONSTRAINT CC_BT_CAR_TRIP_DISTANCE_AMOUNT 
    CHECK (DISTANCE_AMOUNT > 0);

ALTER TABLE CT.BT_CAR_TRIP ADD CONSTRAINT CC_BT_CAR_TRIP_FUEL_AMOUNT 
    CHECK (FUEL_AMOUNT > 0);

/* ---------------------------------------------------------------------- */
/* Add table "BT_BUS_TRIP"                                                */
/* ---------------------------------------------------------------------- */

CREATE TABLE CT.BT_BUS_TRIP (
    APP_SID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'APP') NOT NULL,
    COMPANY_SID NUMBER(10) NOT NULL,
    BREAKDOWN_GROUP_ID NUMBER(10) NOT NULL,
    BT_TRAVEL_MODE_ID NUMBER(10) NOT NULL,
    TRAVEL_MODE_ID NUMBER(10) NOT NULL,
    DISTANCE_AMOUNT NUMBER(20,10),
    DISTANCE_UNIT_ID NUMBER(10),
    TIME_IN_MINS NUMBER(20,10),
    JOURNEY_DATE DATE,
    TRANSACTION_DATE DATE,
    LAST_EDITED_DTM DATE DEFAULT SYSDATE NOT NULL,
    LAST_EDITED_BY_SID NUMBER(10) NOT NULL,
    BT_ESTIMATE_TYPE_ID NUMBER(10) NOT NULL,
    PRIMARY KEY (APP_SID, COMPANY_SID, BREAKDOWN_GROUP_ID),
    CONSTRAINT TCC_BT_BUS_TRIP_COMPLETE CHECK (((BT_ESTIMATE_TYPE_ID = 2) AND (DISTANCE_AMOUNT IS NOT NULL) AND (DISTANCE_UNIT_ID IS NOT NULL)) OR ((BT_ESTIMATE_TYPE_ID = 3) AND (TIME_IN_MINS IS NOT NULL)))
);

ALTER TABLE CT.BT_BUS_TRIP ADD CONSTRAINT CC_BT_BUS_TRIP_BT_EST_TYPE_ID 
    CHECK (BT_ESTIMATE_TYPE_ID IN (2,3));

ALTER TABLE CT.BT_BUS_TRIP ADD CONSTRAINT CC_BT_BUS_TRIP_DISTANCE_AMOUNT 
    CHECK (DISTANCE_AMOUNT > 0);

ALTER TABLE CT.BT_BUS_TRIP ADD CONSTRAINT CC_BT_BUS_TRIP_TIME_IN_MINS 
    CHECK (TIME_IN_MINS > 0);

/* ---------------------------------------------------------------------- */
/* Add table "BT_TRAIN_TRIP"                                              */
/* ---------------------------------------------------------------------- */

CREATE TABLE CT.BT_TRAIN_TRIP (
    APP_SID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'APP') NOT NULL,
    COMPANY_SID NUMBER(10) NOT NULL,
    BREAKDOWN_GROUP_ID NUMBER(10) NOT NULL,
    BT_TRAVEL_MODE_ID NUMBER(10) NOT NULL,
    TRAVEL_MODE_ID NUMBER(10) NOT NULL,
    DISTANCE_AMOUNT NUMBER(20,10),
    DISTANCE_UNIT_ID NUMBER(10),
    TIME_IN_MINS NUMBER(20,10),
    JOURNEY_DATE DATE,
    TRANSACTION_DATE DATE,
    LAST_EDITED_DTM DATE DEFAULT SYSDATE NOT NULL,
    LAST_EDITED_BY_SID NUMBER(10) NOT NULL,
    BT_ESTIMATE_TYPE_ID NUMBER(10) NOT NULL,
    PRIMARY KEY (APP_SID, COMPANY_SID, BREAKDOWN_GROUP_ID),
    CONSTRAINT TCC_BT_TR_TRIP_COMPLETE CHECK (((BT_ESTIMATE_TYPE_ID = 2) AND (DISTANCE_AMOUNT IS NOT NULL) AND (DISTANCE_UNIT_ID IS NOT NULL)) OR ((BT_ESTIMATE_TYPE_ID = 3) AND (TIME_IN_MINS IS NOT NULL)))
);

ALTER TABLE CT.BT_TRAIN_TRIP ADD CONSTRAINT CC_BT_TR_TRIP_BT_EST_TYPE_ID 
    CHECK (BT_ESTIMATE_TYPE_ID IN (2,3));

ALTER TABLE CT.BT_TRAIN_TRIP ADD CONSTRAINT CC_BT_TR_TRIP_DISTANCE_AMOUNT 
    CHECK (DISTANCE_AMOUNT > 0);

ALTER TABLE CT.BT_TRAIN_TRIP ADD CONSTRAINT CC_BT_TR_TRIP_TIME_IN_MINS 
    CHECK (TIME_IN_MINS > 0);

/* ---------------------------------------------------------------------- */
/* Add table "BT_AIR_TRIP"                                                */
/* ---------------------------------------------------------------------- */

CREATE TABLE CT.BT_AIR_TRIP (
    APP_SID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'APP') NOT NULL,
    COMPANY_SID NUMBER(10) NOT NULL,
    BREAKDOWN_GROUP_ID NUMBER(10) NOT NULL,
    BT_TRAVEL_MODE_ID NUMBER(10) NOT NULL,
    TRAVEL_MODE_ID NUMBER(10) NOT NULL,
    DISTANCE_AMOUNT NUMBER(20,10),
    DISTANCE_UNIT_ID NUMBER(10),
    TIME_IN_MINS NUMBER(20,10),
    JOURNEY_DATE DATE,
    TRANSACTION_DATE DATE,
    LAST_EDITED_DTM DATE DEFAULT SYSDATE NOT NULL,
    LAST_EDITED_BY_SID NUMBER(10) NOT NULL,
    BT_ESTIMATE_TYPE_ID NUMBER(10),
    PRIMARY KEY (APP_SID, COMPANY_SID, BREAKDOWN_GROUP_ID),
    CONSTRAINT TCC_BT_AIR_TRIP_COMPLETE CHECK (((BT_ESTIMATE_TYPE_ID = 2) AND (DISTANCE_AMOUNT IS NOT NULL) AND (DISTANCE_UNIT_ID IS NOT NULL)) OR ((BT_ESTIMATE_TYPE_ID = 3) AND (TIME_IN_MINS IS NOT NULL)))
);

ALTER TABLE CT.BT_AIR_TRIP ADD CONSTRAINT CC_BT_AIR_TRIP_APP_SID 
    CHECK (APP_SID IN (2,3));

ALTER TABLE CT.BT_AIR_TRIP ADD CONSTRAINT CC_BT_AIR_TRIP_BT_EST_TYPE_ID 
    CHECK (BT_ESTIMATE_TYPE_ID IN (2, 3));

ALTER TABLE CT.BT_AIR_TRIP ADD CONSTRAINT CC_BT_AIR_TRIP_DISTANCE_AMOUNT 
    CHECK (DISTANCE_AMOUNT > 0);

ALTER TABLE CT.BT_AIR_TRIP ADD CONSTRAINT CC_BT_AIR_TRIP_TIME_IN_MINS 
    CHECK (TIME_IN_MINS > 0);

/* ---------------------------------------------------------------------- */
/* Add table "BT_CAB_TRIP"                                                */
/* ---------------------------------------------------------------------- */

CREATE TABLE CT.BT_CAB_TRIP (
    APP_SID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'APP') NOT NULL,
    COMPANY_SID NUMBER(10) NOT NULL,
    BREAKDOWN_GROUP_ID NUMBER(10) NOT NULL,
    BT_TRAVEL_MODE_ID NUMBER(10) NOT NULL,
    TRAVEL_MODE_ID NUMBER(10) NOT NULL,
    SPEND_AMOUNT NUMBER(20,10),
    CURRENCY_ID NUMBER(10),
    TIME_IN_MINS NUMBER(20,10),
    JOURNEY_DATE DATE,
    TRANSACTION_DATE DATE,
    LAST_EDITED_DTM DATE DEFAULT SYSDATE NOT NULL,
    LAST_EDITED_BY_SID NUMBER(10) NOT NULL,
    BT_ESTIMATE_TYPE_ID NUMBER(10) NOT NULL,
    PRIMARY KEY (APP_SID, COMPANY_SID, BREAKDOWN_GROUP_ID),
    CONSTRAINT TCC_BT_CAB_TRIP_COMPLETE CHECK (((BT_ESTIMATE_TYPE_ID = 3) AND (TIME_IN_MINS IS NOT NULL)) OR ((BT_ESTIMATE_TYPE_ID = 4) AND (SPEND_AMOUNT IS NOT NULL) AND (CURRENCY_ID IS NOT NULL)) )
);

ALTER TABLE CT.BT_CAB_TRIP ADD CONSTRAINT CC_BT_CAB_TRIP_SPEND_AMOUNT 
    CHECK (SPEND_AMOUNT > 0);

ALTER TABLE CT.BT_CAB_TRIP ADD CONSTRAINT CC_BT_CAB_TRIP_TIME_IN_MINS 
    CHECK (TIME_IN_MINS > 0);

/* ---------------------------------------------------------------------- */
/* Add table "BT_MOTORBIKE_TRIP"                                          */
/* ---------------------------------------------------------------------- */

CREATE TABLE CT.BT_MOTORBIKE_TRIP (
    APP_SID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'APP') NOT NULL,
    COMPANY_SID NUMBER(10) NOT NULL,
    BREAKDOWN_GROUP_ID NUMBER(10) NOT NULL,
    BT_TRAVEL_MODE_ID NUMBER(10) NOT NULL,
    TRAVEL_MODE_ID NUMBER(10) NOT NULL,
    FUEL_AMOUNT NUMBER(20,10) NOT NULL,
    BT_FUEL_ID NUMBER(10),
    FUEL_UNIT_ID NUMBER(10),
    DISTANCE_AMOUNT NUMBER(20,10),
    DISTANCE_UNIT_ID NUMBER(10),
    TIME_IN_MINS NUMBER(20,10),
    SPEND_AMOUNT NUMBER(20,10),
    CURRENCY_ID NUMBER(10),
    JOURNEY_DATE DATE,
    TRANSACTION_DATE DATE,
    LAST_EDITED_DTM DATE DEFAULT SYSDATE NOT NULL,
    LAST_EDITED_BY_SID NUMBER(10) NOT NULL,
    BT_ESTIMATE_TYPE_ID NUMBER(10) NOT NULL,
    PRIMARY KEY (APP_SID, COMPANY_SID, BREAKDOWN_GROUP_ID),
    CONSTRAINT TCC_BT_MB_TRIP_COMPLETE CHECK (((BT_ESTIMATE_TYPE_ID = 1) AND (FUEL_AMOUNT IS NOT NULL) AND (BT_FUEL_ID IS NOT NULL) AND (FUEL_UNIT_ID IS NOT NULL)) OR ((BT_ESTIMATE_TYPE_ID = 2) AND (DISTANCE_AMOUNT IS NOT NULL) AND (DISTANCE_UNIT_ID IS NOT NULL)) OR ((BT_ESTIMATE_TYPE_ID = 3) AND (TIME_IN_MINS IS NOT NULL)) OR ((BT_ESTIMATE_TYPE_ID = 4) AND (SPEND_AMOUNT IS NOT NULL) AND (CURRENCY_ID IS NOT NULL)))
);

ALTER TABLE CT.BT_MOTORBIKE_TRIP ADD CONSTRAINT CC_BT_MB_TRIP_DISTANCE_AMOUNT 
    CHECK (DISTANCE_AMOUNT > 0);

ALTER TABLE CT.BT_MOTORBIKE_TRIP ADD CONSTRAINT CC_BT_MB_TRIP_FUEL_AMOUNT 
    CHECK (FUEL_AMOUNT > 0);

ALTER TABLE CT.BT_MOTORBIKE_TRIP ADD CONSTRAINT CC_BT_MB_TRIP_SPEND_AMOUNT 
    CHECK (SPEND_AMOUNT > 0);

ALTER TABLE CT.BT_MOTORBIKE_TRIP ADD CONSTRAINT CC_BT_MB_TRIP_TIME_IN_MINS 
    CHECK (TIME_IN_MINS > 0);

/* ---------------------------------------------------------------------- */
/* Add table "BREAKDOWN_GROUP"                                            */
/* ---------------------------------------------------------------------- */

CREATE TABLE CT.BREAKDOWN_GROUP (
    APP_SID NUMBER(10) NOT NULL,
    COMPANY_SID NUMBER(10) NOT NULL,
    BREAKDOWN_GROUP_ID NUMBER(10) NOT NULL,
    BREAKDOWN_TYPE_ID NUMBER(10) NOT NULL,
    CONSTRAINT PK_BD_GROUP PRIMARY KEY (APP_SID, COMPANY_SID, BREAKDOWN_GROUP_ID)
);

/* ---------------------------------------------------------------------- */
/* Add table "BREAKDOWN_REGION_GROUP"                                     */
/* ---------------------------------------------------------------------- */

CREATE TABLE CT.BREAKDOWN_REGION_GROUP (
    APP_SID NUMBER(10) NOT NULL,
    BREAKDOWN_GROUP_ID NUMBER(10) NOT NULL,
    BREAKDOWN_ID NUMBER(10) NOT NULL,
    REGION_ID NUMBER(10) NOT NULL,
    COMPANY_SID NUMBER(10) NOT NULL,
    CONSTRAINT PK_BD_REGION_GROUP PRIMARY KEY (APP_SID, BREAKDOWN_GROUP_ID, BREAKDOWN_ID, REGION_ID, COMPANY_SID)
);

/* ---------------------------------------------------------------------- */
/* Add table "EC_QUESTIONNAIRE"                                           */
/* ---------------------------------------------------------------------- */

CREATE TABLE CT.EC_QUESTIONNAIRE (
    APP_SID NUMBER(10) NOT NULL,
    COMPANY_SID NUMBER(10) NOT NULL,
    EC_QUESTIONNAIRE_ID NUMBER(10) NOT NULL,
    BREAKDOWN_GROUP_ID NUMBER(10) NOT NULL,
    GUID RAW(16) NOT NULL,
    CONSTRAINT PK_EC_QUESTIONNAIRE PRIMARY KEY (APP_SID, COMPANY_SID, EC_QUESTIONNAIRE_ID)
);

/* ---------------------------------------------------------------------- */
/* Add foreign key constraints                                            */
/* ---------------------------------------------------------------------- */

ALTER TABLE CT.BREAKDOWN ADD CONSTRAINT BD_TYPE_BREAKDOWN 
    FOREIGN KEY (APP_SID, BREAKDOWN_TYPE_ID) REFERENCES CT.BREAKDOWN_TYPE (APP_SID,BREAKDOWN_TYPE_ID);

ALTER TABLE CT.BREAKDOWN ADD CONSTRAINT COMPANY_BREAKDOWN 
    FOREIGN KEY (APP_SID, COMPANY_SID) REFERENCES CT.COMPANY (APP_SID,COMPANY_SID);

ALTER TABLE CT.BREAKDOWN ADD CONSTRAINT REGION_BREAKDOWN 
    FOREIGN KEY (REGION_ID) REFERENCES CT.REGION (REGION_ID);

ALTER TABLE CT.BREAKDOWN_REGION_EIO ADD CONSTRAINT EIO_B_R_E 
    FOREIGN KEY (EIO_ID) REFERENCES CT.EIO (EIO_ID);

ALTER TABLE CT.BREAKDOWN_REGION_EIO ADD CONSTRAINT B_R_B_R_E 
    FOREIGN KEY (APP_SID, BREAKDOWN_ID, REGION_ID) REFERENCES CT.BREAKDOWN_REGION (APP_SID,BREAKDOWN_ID,REGION_ID);

ALTER TABLE CT.BREAKDOWN_TYPE ADD CONSTRAINT CUSTOMER_OPTIONS_BD_TYPE 
    FOREIGN KEY (APP_SID) REFERENCES CT.CUSTOMER_OPTIONS (APP_SID);

ALTER TABLE CT.BREAKDOWN_TYPE ADD CONSTRAINT COMPANY_BD_TYPE 
    FOREIGN KEY (APP_SID, COMPANY_SID) REFERENCES CT.COMPANY (APP_SID,COMPANY_SID);

ALTER TABLE CT.EC_CAR_MODEL ADD CONSTRAINT EC_CAR_MAN_EC_CAR_MOD 
    FOREIGN KEY (MANUFACTURER_ID) REFERENCES CT.EC_CAR_MANUFACTURER (MANUFACTURER_ID);

ALTER TABLE CT.COMPANY ADD CONSTRAINT CHAIN_COMPANY_COMPANY 
    FOREIGN KEY (APP_SID, COMPANY_SID) REFERENCES CHAIN.COMPANY (APP_SID,COMPANY_SID);

ALTER TABLE CT.COMPANY ADD CONSTRAINT CURRENCY_PERIOD_COMPANY 
    FOREIGN KEY (PERIOD_ID, CURRENCY_ID) REFERENCES CT.CURRENCY_PERIOD (PERIOD_ID,CURRENCY_ID);

ALTER TABLE CT.COMPANY ADD CONSTRAINT BUSINESS_TYPE_COMPANY 
    FOREIGN KEY (BUSINESS_TYPE_ID) REFERENCES CT.BUSINESS_TYPE (BUSINESS_TYPE_ID);

ALTER TABLE CT.COMPANY ADD CONSTRAINT EIO_COMPANY 
    FOREIGN KEY (EIO_ID) REFERENCES CT.EIO (EIO_ID);

ALTER TABLE CT.COMPANY ADD CONSTRAINT SCOPE_INPUT_TYPE_COMPANY 
    FOREIGN KEY (SCOPE_INPUT_TYPE_ID) REFERENCES CT.SCOPE_INPUT_TYPE (SCOPE_INPUT_TYPE_ID);

ALTER TABLE CT.COMPANY ADD CONSTRAINT CUSTOMER_OPTIONS_COMPANY 
    FOREIGN KEY (APP_SID) REFERENCES CT.CUSTOMER_OPTIONS (APP_SID);

ALTER TABLE CT.COMPANY_CONSUMPTION_TYPE ADD CONSTRAINT COMPANY_COMPANY_CONS_TYPE 
    FOREIGN KEY (APP_SID, COMPANY_SID) REFERENCES CT.COMPANY (APP_SID,COMPANY_SID);

ALTER TABLE CT.COMPANY_CONSUMPTION_TYPE ADD CONSTRAINT CONS_TYPE_COMPANY_CONS_TYPE 
    FOREIGN KEY (CONSUMPTION_TYPE_ID) REFERENCES CT.CONSUMPTION_TYPE (CONSUMPTION_TYPE_ID);

ALTER TABLE CT.CURRENCY_PERIOD ADD CONSTRAINT CURRENCY_CURRENCY_PERIOD 
    FOREIGN KEY (CURRENCY_ID) REFERENCES CT.CURRENCY (CURRENCY_ID);

ALTER TABLE CT.CURRENCY_PERIOD ADD CONSTRAINT PERIOD_CURRENCY_PERIOD 
    FOREIGN KEY (PERIOD_ID) REFERENCES CT.PERIOD (PERIOD_ID);

ALTER TABLE CT.CUSTOMER_OPTIONS ADD CONSTRAINT CHAIN_CO_CUSTOMER_OPTIONS 
    FOREIGN KEY (APP_SID) REFERENCES CHAIN.CUSTOMER_OPTIONS (APP_SID);

ALTER TABLE CT.CUSTOMER_OPTIONS ADD CONSTRAINT CSR_CUSTOMER_CUSTOMER_OPTIONS 
    FOREIGN KEY (APP_SID) REFERENCES CSR.CUSTOMER (APP_SID);

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS ADD CONSTRAINT EC_CAR_MOD_EC_QA 
    FOREIGN KEY (CAR_ID) REFERENCES CT.EC_CAR_MODEL (CAR_ID);

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS ADD CONSTRAINT CR_DIST_UNIT_EC_QA 
    FOREIGN KEY (CAR_DISTANCE_UNIT_ID) REFERENCES CT.DISTANCE_UNIT (DISTANCE_UNIT_ID);

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS ADD CONSTRAINT BS_DIST_UNIT_EC_QA 
    FOREIGN KEY (BUS_DISTANCE_UNIT_ID) REFERENCES CT.DISTANCE_UNIT (DISTANCE_UNIT_ID);

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS ADD CONSTRAINT TR_DIST_UNIT_EC_QA 
    FOREIGN KEY (TRAIN_DISTANCE_UNIT_ID) REFERENCES CT.DISTANCE_UNIT (DISTANCE_UNIT_ID);

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS ADD CONSTRAINT MB_DIST_UNIT_EC_QA 
    FOREIGN KEY (MOTORBIKE_DISTANCE_UNIT_ID) REFERENCES CT.DISTANCE_UNIT (DISTANCE_UNIT_ID);

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS ADD CONSTRAINT BK_DIST_UNIT_EC_QA 
    FOREIGN KEY (BIKE_DISTANCE_UNIT_ID) REFERENCES CT.DISTANCE_UNIT (DISTANCE_UNIT_ID);

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS ADD CONSTRAINT WK_DIST_UNIT_EC_QA 
    FOREIGN KEY (WALK_DISTANCE_UNIT_ID) REFERENCES CT.DISTANCE_UNIT (DISTANCE_UNIT_ID);

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS ADD CONSTRAINT EC_BUS_TY_EC_QA 
    FOREIGN KEY (BUS_TYPE_ID) REFERENCES CT.EC_BUS_TYPE (BUS_TYPE_ID);

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS ADD CONSTRAINT EC_TRAIN_TY_EC_QA 
    FOREIGN KEY (TRAIN_TYPE_ID) REFERENCES CT.EC_TRAIN_TYPE (TRAIN_TYPE_ID);

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS ADD CONSTRAINT EC_MB_TY_EC_QA 
    FOREIGN KEY (MOTORBIKE_TYPE_ID) REFERENCES CT.EC_MOTORBIKE_TYPE (MOTORBIKE_TYPE_ID);

ALTER TABLE CT.EC_QUESTIONNAIRE_ANSWERS ADD CONSTRAINT EC_QUESTIONNAIRE_EC_QA 
    FOREIGN KEY (APP_SID, COMPANY_SID, EC_QUESTIONNAIRE_ID) REFERENCES CT.EC_QUESTIONNAIRE (APP_SID,COMPANY_SID,EC_QUESTIONNAIRE_ID);

ALTER TABLE CT.EC_REGION_FACTORS ADD CONSTRAINT REGION_ERF 
    FOREIGN KEY (REGION_ID) REFERENCES CT.REGION (REGION_ID);

ALTER TABLE CT.HOT_REGION ADD CONSTRAINT REGION_HOT_REGION 
    FOREIGN KEY (REGION_ID) REFERENCES CT.REGION (REGION_ID);

ALTER TABLE CT.REGION ADD CONSTRAINT POSTCODE_COUNTRY_REGION 
    FOREIGN KEY (COUNTRY) REFERENCES POSTCODE.COUNTRY (COUNTRY);

ALTER TABLE CT.BREAKDOWN_REGION ADD CONSTRAINT BREAKDOWN_B_R 
    FOREIGN KEY (APP_SID, BREAKDOWN_ID) REFERENCES CT.BREAKDOWN (APP_SID,BREAKDOWN_ID);

ALTER TABLE CT.BREAKDOWN_REGION ADD CONSTRAINT REGION_B_R 
    FOREIGN KEY (REGION_ID) REFERENCES CT.REGION (REGION_ID);

ALTER TABLE CT.HOTSPOT_RESULT ADD CONSTRAINT B_R_E_H_R 
    FOREIGN KEY (APP_SID, REGION_ID, BREAKDOWN_ID, EIO_ID) REFERENCES CT.BREAKDOWN_REGION_EIO (APP_SID,REGION_ID,BREAKDOWN_ID,EIO_ID);

ALTER TABLE CT.HOTSPOT_RESULT ADD CONSTRAINT COMPANY_H_R 
    FOREIGN KEY (APP_SID, COMPANY_SID) REFERENCES CT.COMPANY (APP_SID,COMPANY_SID);

ALTER TABLE CT.EC_PROFILE ADD CONSTRAINT CR_DIST_UNIT_EC_PROFILE 
    FOREIGN KEY (CAR_DISTANCE_UNIT_ID) REFERENCES CT.DISTANCE_UNIT (DISTANCE_UNIT_ID);

ALTER TABLE CT.EC_PROFILE ADD CONSTRAINT BS_DIST_UNIT_EC_PROFILE 
    FOREIGN KEY (BUS_DISTANCE_UNIT_ID) REFERENCES CT.DISTANCE_UNIT (DISTANCE_UNIT_ID);

ALTER TABLE CT.EC_PROFILE ADD CONSTRAINT TR_DIST_UNIT_EC_PROFILE 
    FOREIGN KEY (TRAIN_DISTANCE_UNIT_ID) REFERENCES CT.DISTANCE_UNIT (DISTANCE_UNIT_ID);

ALTER TABLE CT.EC_PROFILE ADD CONSTRAINT MB_DIST_UNIT_EC_PROFILE 
    FOREIGN KEY (MOTORBIKE_DISTANCE_UNIT_ID) REFERENCES CT.DISTANCE_UNIT (DISTANCE_UNIT_ID);

ALTER TABLE CT.EC_PROFILE ADD CONSTRAINT BK_DIST_UNIT_EC_PROFILE 
    FOREIGN KEY (BIKE_DISTANCE_UNIT_ID) REFERENCES CT.DISTANCE_UNIT (DISTANCE_UNIT_ID);

ALTER TABLE CT.EC_PROFILE ADD CONSTRAINT WK_DIST_UNIT_EC_PROFILE 
    FOREIGN KEY (WALK_DISTANCE_UNIT_ID) REFERENCES CT.DISTANCE_UNIT (DISTANCE_UNIT_ID);

ALTER TABLE CT.EC_PROFILE ADD CONSTRAINT BD_GROUP_EC_PROFILE 
    FOREIGN KEY (APP_SID, COMPANY_SID, BREAKDOWN_GROUP_ID) REFERENCES CT.BREAKDOWN_GROUP (APP_SID,COMPANY_SID,BREAKDOWN_GROUP_ID);

ALTER TABLE CT.EC_CAR_ENTRY ADD CONSTRAINT EC_CAR_TY_EC_CAR_ENTRY 
    FOREIGN KEY (CAR_TYPE_ID) REFERENCES CT.EC_CAR_TYPE (CAR_TYPE_ID);

ALTER TABLE CT.EC_CAR_ENTRY ADD CONSTRAINT EC_PROFILE_EC_CAR_ENTRY 
    FOREIGN KEY (APP_SID, COMPANY_SID, BREAKDOWN_GROUP_ID) REFERENCES CT.EC_PROFILE (APP_SID,COMPANY_SID,BREAKDOWN_GROUP_ID);

ALTER TABLE CT.EC_BUS_ENTRY ADD CONSTRAINT EC_PROFILE_EC_BUS_ENTRY 
    FOREIGN KEY (APP_SID, COMPANY_SID, BREAKDOWN_GROUP_ID) REFERENCES CT.EC_PROFILE (APP_SID,COMPANY_SID,BREAKDOWN_GROUP_ID);

ALTER TABLE CT.EC_BUS_ENTRY ADD CONSTRAINT EC_BUS_TY_EC_BUS_ENTRY 
    FOREIGN KEY (BUS_TYPE_ID) REFERENCES CT.EC_BUS_TYPE (BUS_TYPE_ID);

ALTER TABLE CT.EC_TRAIN_ENTRY ADD CONSTRAINT EC_PROFILE_EC_TRAIN_ENTRY 
    FOREIGN KEY (APP_SID, COMPANY_SID, BREAKDOWN_GROUP_ID) REFERENCES CT.EC_PROFILE (APP_SID,COMPANY_SID,BREAKDOWN_GROUP_ID);

ALTER TABLE CT.EC_TRAIN_ENTRY ADD CONSTRAINT EC_TRAIN_TY_EC_TRAIN_ENTRY 
    FOREIGN KEY (TRAIN_TYPE_ID) REFERENCES CT.EC_TRAIN_TYPE (TRAIN_TYPE_ID);

ALTER TABLE CT.EC_MOTORBIKE_ENTRY ADD CONSTRAINT EC_PROFILE_EC_MB_ENTRY 
    FOREIGN KEY (APP_SID, COMPANY_SID, BREAKDOWN_GROUP_ID) REFERENCES CT.EC_PROFILE (APP_SID,COMPANY_SID,BREAKDOWN_GROUP_ID);

ALTER TABLE CT.EC_MOTORBIKE_ENTRY ADD CONSTRAINT EC_MB_TY_EC_MB_ENTRY 
    FOREIGN KEY (MOTORBIKE_TYPE_ID) REFERENCES CT.EC_MOTORBIKE_TYPE (MOTORBIKE_TYPE_ID);

ALTER TABLE CT.WORKSHEET ADD CONSTRAINT FILE_UPLOAD_WORKSHEET 
    FOREIGN KEY (APP_SID, FILE_UPLOAD_SID) REFERENCES CHAIN.FILE_UPLOAD (APP_SID,FILE_UPLOAD_SID);

ALTER TABLE CT.WORKSHEET ADD CONSTRAINT WORKSHEET_ROW_WORKSHEET 
    FOREIGN KEY (APP_SID, HEADER_WORKSHEET_ROW_ID) REFERENCES CT.WORKSHEET_ROW (APP_SID,WORKSHEET_ROW_ID);

ALTER TABLE CT.BRICK ADD CONSTRAINT COMPANY_BRICK 
    FOREIGN KEY (APP_SID, COMPANY_SID) REFERENCES CT.COMPANY (APP_SID,COMPANY_SID);

ALTER TABLE CT.BRICK ADD CONSTRAINT BRICK_BRICK 
    FOREIGN KEY (PARENT_BRICK_ID, APP_SID) REFERENCES CT.BRICK (BRICK_ID,APP_SID);

ALTER TABLE CT.BRICK ADD CONSTRAINT CUSTOMER_OPTIONS_BRICK 
    FOREIGN KEY (APP_SID) REFERENCES CT.CUSTOMER_OPTIONS (APP_SID);

ALTER TABLE CT.BRICK ADD CONSTRAINT EIO_BRICK 
    FOREIGN KEY (EIO_ID) REFERENCES CT.EIO (EIO_ID);

ALTER TABLE CT.UP_PRODUCT ADD CONSTRAINT COMPANY_UP_PRODUCT 
    FOREIGN KEY (APP_SID, COMPANY_SID) REFERENCES CT.COMPANY (APP_SID,COMPANY_SID);

ALTER TABLE CT.UP_PRODUCT ADD CONSTRAINT BRICK_UP_PRODUCT 
    FOREIGN KEY (APP_SID, BRICK_ID) REFERENCES CT.BRICK (APP_SID,BRICK_ID);

ALTER TABLE CT.WORKSHEET_ROW ADD CONSTRAINT WORKSHEET_WORKSHEET_ROW 
    FOREIGN KEY (APP_SID, FILE_UPLOAD_SID, SHEET_INDEX) REFERENCES CT.WORKSHEET (APP_SID,FILE_UPLOAD_SID,SHEET_INDEX);

ALTER TABLE CT.WORKSHEET_ROW ADD CONSTRAINT CHAIN_CO_WORKSHEET_ROW 
    FOREIGN KEY (APP_SID) REFERENCES CHAIN.CUSTOMER_OPTIONS (APP_SID);

ALTER TABLE CT.BT_REGION_FACTORS ADD CONSTRAINT REGION_BTRF 
    FOREIGN KEY (REGION_ID) REFERENCES CT.REGION (REGION_ID);

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT CR_BT_EST_TYPE_BT_PRF 
    FOREIGN KEY (CAR_ESTIMATE_TYPE_ID) REFERENCES CT.BT_ESTIMATE_TYPE (BT_ESTIMATE_TYPE_ID);

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT BS_BT_EST_TYPE_BT_PRF 
    FOREIGN KEY (BUS_ESTIMATE_TYPE_ID) REFERENCES CT.BT_ESTIMATE_TYPE (BT_ESTIMATE_TYPE_ID);

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT TR_BT_EST_TYPE_BT_PRF 
    FOREIGN KEY (TRAIN_ESTIMATE_TYPE_ID) REFERENCES CT.BT_ESTIMATE_TYPE (BT_ESTIMATE_TYPE_ID);

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT MB_BT_EST_TYPE_BT_PRF 
    FOREIGN KEY (MOTORBIKE_ESTIMATE_TYPE_ID) REFERENCES CT.BT_ESTIMATE_TYPE (BT_ESTIMATE_TYPE_ID);

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT BK_BT_EST_TYPE_BT_PRF 
    FOREIGN KEY (BIKE_ESTIMATE_TYPE_ID) REFERENCES CT.BT_ESTIMATE_TYPE (BT_ESTIMATE_TYPE_ID);

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT WK_BT_EST_TYPE_BT_PRF 
    FOREIGN KEY (WALK_ESTIMATE_TYPE_ID) REFERENCES CT.BT_ESTIMATE_TYPE (BT_ESTIMATE_TYPE_ID);

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT AR_BT_EST_TYPE_BT_PRF 
    FOREIGN KEY (AIR_ESTIMATE_TYPE_ID) REFERENCES CT.BT_ESTIMATE_TYPE (BT_ESTIMATE_TYPE_ID);

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT CR_DIST_UNIT_BT_PRF 
    FOREIGN KEY (CAR_DISTANCE_UNIT_ID) REFERENCES CT.DISTANCE_UNIT (DISTANCE_UNIT_ID);

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT BS_DIST_UNIT_BT_PRF 
    FOREIGN KEY (BUS_DISTANCE_UNIT_ID) REFERENCES CT.DISTANCE_UNIT (DISTANCE_UNIT_ID);

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT BK_DIST_UNIT_BT_PRF 
    FOREIGN KEY (BIKE_DISTANCE_UNIT_ID) REFERENCES CT.DISTANCE_UNIT (DISTANCE_UNIT_ID);

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT WK_DIST_UNIT_BT_PRF 
    FOREIGN KEY (WALK_DISTANCE_UNIT_ID) REFERENCES CT.DISTANCE_UNIT (DISTANCE_UNIT_ID);

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT AR_DIST_UNIT_BT_PRF 
    FOREIGN KEY (AIR_DISTANCE_UNIT_ID) REFERENCES CT.DISTANCE_UNIT (DISTANCE_UNIT_ID);

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT TR_DIST_UNIT_BT_PRF 
    FOREIGN KEY (TRAIN_DISTANCE_UNIT_ID) REFERENCES CT.DISTANCE_UNIT (DISTANCE_UNIT_ID);

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT MB_DIST_UNIT_BT_PRF 
    FOREIGN KEY (MOTORBIKE_DISTANCE_UNIT_ID) REFERENCES CT.DISTANCE_UNIT (DISTANCE_UNIT_ID);

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT COMPANY_BT_PRF 
    FOREIGN KEY (APP_SID, COMPANY_SID) REFERENCES CT.COMPANY (APP_SID,COMPANY_SID);

ALTER TABLE CT.BT_PROFILE ADD CONSTRAINT B_R_BT_PRF 
    FOREIGN KEY (APP_SID, BREAKDOWN_ID, REGION_ID) REFERENCES CT.BREAKDOWN_REGION (APP_SID,BREAKDOWN_ID,REGION_ID);

ALTER TABLE CT.DATA_SOURCE_URL ADD CONSTRAINT DATA_SOURCE_ 
    FOREIGN KEY (DATA_SOURCE_ID) REFERENCES CT.DATA_SOURCE (DATA_SOURCE_ID);

ALTER TABLE CT.BT_TRAVEL_MODE ADD CONSTRAINT TRAVEL_MODE_BT_TR_MD 
    FOREIGN KEY (TRAVEL_MODE_ID) REFERENCES CT.TRAVEL_MODE (TRAVEL_MODE_ID);

ALTER TABLE CT.BT_CAR_TRIP ADD CONSTRAINT BT_TR_MD_BT_CAR_TRIP 
    FOREIGN KEY (BT_TRAVEL_MODE_ID, TRAVEL_MODE_ID) REFERENCES CT.BT_TRAVEL_MODE (BT_TRAVEL_MODE_ID,TRAVEL_MODE_ID);

ALTER TABLE CT.BT_CAR_TRIP ADD CONSTRAINT CHAIN_USER_BT_CAR_TRIP 
    FOREIGN KEY (APP_SID, LAST_EDITED_BY_SID) REFERENCES CHAIN.CHAIN_USER (APP_SID,USER_SID);

ALTER TABLE CT.BT_CAR_TRIP ADD CONSTRAINT CURRENCY_BT_CAR_TRIP 
    FOREIGN KEY (CURRENCY_ID) REFERENCES CT.CURRENCY (CURRENCY_ID);

ALTER TABLE CT.BT_CAR_TRIP ADD CONSTRAINT DIST_UNIT_BT_CAR_TRIP 
    FOREIGN KEY (DISTANCE_UNIT_ID) REFERENCES CT.DISTANCE_UNIT (DISTANCE_UNIT_ID);

ALTER TABLE CT.BT_CAR_TRIP ADD CONSTRAINT VOLUME_UNIT_BT_CAR_TRIP 
    FOREIGN KEY (FUEL_UNIT_ID) REFERENCES CT.VOLUME_UNIT (VOLUME_UNIT_ID);

ALTER TABLE CT.BT_CAR_TRIP ADD CONSTRAINT BT_FUEL_BT_CAR_TRIP 
    FOREIGN KEY (BT_FUEL_ID) REFERENCES CT.BT_FUEL (BT_FUEL_ID);

ALTER TABLE CT.BT_CAR_TRIP ADD CONSTRAINT BT_EST_TYPE_BT_CAR_TRIP 
    FOREIGN KEY (BT_ESTIMATE_TYPE_ID) REFERENCES CT.BT_ESTIMATE_TYPE (BT_ESTIMATE_TYPE_ID);

ALTER TABLE CT.BT_CAR_TRIP ADD CONSTRAINT BD_GROUP_BT_CAR_TRIP 
    FOREIGN KEY (APP_SID, COMPANY_SID, BREAKDOWN_GROUP_ID) REFERENCES CT.BREAKDOWN_GROUP (APP_SID,COMPANY_SID,BREAKDOWN_GROUP_ID);

ALTER TABLE CT.BT_BUS_TRIP ADD CONSTRAINT BT_TR_MD_BT_BUS_TRIP 
    FOREIGN KEY (TRAVEL_MODE_ID, BT_TRAVEL_MODE_ID) REFERENCES CT.BT_TRAVEL_MODE (TRAVEL_MODE_ID,BT_TRAVEL_MODE_ID);

ALTER TABLE CT.BT_BUS_TRIP ADD CONSTRAINT CHAIN_USER_BT_BUS_TRIP 
    FOREIGN KEY (APP_SID, LAST_EDITED_BY_SID) REFERENCES CHAIN.CHAIN_USER (APP_SID,USER_SID);

ALTER TABLE CT.BT_BUS_TRIP ADD CONSTRAINT DIST_UNIT_BT_BUS_TRIP 
    FOREIGN KEY (DISTANCE_UNIT_ID) REFERENCES CT.DISTANCE_UNIT (DISTANCE_UNIT_ID);

ALTER TABLE CT.BT_BUS_TRIP ADD CONSTRAINT BT_EST_TYPE_BT_BUS_TRIP 
    FOREIGN KEY (BT_ESTIMATE_TYPE_ID) REFERENCES CT.BT_ESTIMATE_TYPE (BT_ESTIMATE_TYPE_ID);

ALTER TABLE CT.BT_BUS_TRIP ADD CONSTRAINT BD_GROUP_BT_BUS_TRIP 
    FOREIGN KEY (APP_SID, COMPANY_SID, BREAKDOWN_GROUP_ID) REFERENCES CT.BREAKDOWN_GROUP (APP_SID,COMPANY_SID,BREAKDOWN_GROUP_ID);

ALTER TABLE CT.BT_TRAIN_TRIP ADD CONSTRAINT BT_TR_MD_BT_TR_TRIP 
    FOREIGN KEY (TRAVEL_MODE_ID, BT_TRAVEL_MODE_ID) REFERENCES CT.BT_TRAVEL_MODE (TRAVEL_MODE_ID,BT_TRAVEL_MODE_ID);

ALTER TABLE CT.BT_TRAIN_TRIP ADD CONSTRAINT CHAIN_USER_BT_TR_TRIP 
    FOREIGN KEY (APP_SID, LAST_EDITED_BY_SID) REFERENCES CHAIN.CHAIN_USER (APP_SID,USER_SID);

ALTER TABLE CT.BT_TRAIN_TRIP ADD CONSTRAINT DIST_UNIT_BT_TR_TRIP 
    FOREIGN KEY (DISTANCE_UNIT_ID) REFERENCES CT.DISTANCE_UNIT (DISTANCE_UNIT_ID);

ALTER TABLE CT.BT_TRAIN_TRIP ADD CONSTRAINT BT_EST_TYPE_BT_TR_TRIP 
    FOREIGN KEY (BT_ESTIMATE_TYPE_ID) REFERENCES CT.BT_ESTIMATE_TYPE (BT_ESTIMATE_TYPE_ID);

ALTER TABLE CT.BT_TRAIN_TRIP ADD CONSTRAINT BD_GROUP_BT_TR_TRIP 
    FOREIGN KEY (APP_SID, COMPANY_SID, BREAKDOWN_GROUP_ID) REFERENCES CT.BREAKDOWN_GROUP (APP_SID,COMPANY_SID,BREAKDOWN_GROUP_ID);

ALTER TABLE CT.BT_AIR_TRIP ADD CONSTRAINT BT_TR_MD_BT_AIR_TRIP 
    FOREIGN KEY (TRAVEL_MODE_ID, BT_TRAVEL_MODE_ID) REFERENCES CT.BT_TRAVEL_MODE (TRAVEL_MODE_ID,BT_TRAVEL_MODE_ID);

ALTER TABLE CT.BT_AIR_TRIP ADD CONSTRAINT CHAIN_USER_BT_AIR_TRIP 
    FOREIGN KEY (APP_SID, LAST_EDITED_BY_SID) REFERENCES CHAIN.CHAIN_USER (APP_SID,USER_SID);

ALTER TABLE CT.BT_AIR_TRIP ADD CONSTRAINT DIST_UNIT_BT_AIR_TRIP 
    FOREIGN KEY (DISTANCE_UNIT_ID) REFERENCES CT.DISTANCE_UNIT (DISTANCE_UNIT_ID);

ALTER TABLE CT.BT_AIR_TRIP ADD CONSTRAINT BT_EST_TYPE_BT_AIR_TRIP 
    FOREIGN KEY (BT_ESTIMATE_TYPE_ID) REFERENCES CT.BT_ESTIMATE_TYPE (BT_ESTIMATE_TYPE_ID);

ALTER TABLE CT.BT_AIR_TRIP ADD CONSTRAINT BD_GROUP_BT_AIR_TRIP 
    FOREIGN KEY (APP_SID, COMPANY_SID, BREAKDOWN_GROUP_ID) REFERENCES CT.BREAKDOWN_GROUP (APP_SID,COMPANY_SID,BREAKDOWN_GROUP_ID);

ALTER TABLE CT.BT_CAB_TRIP ADD CONSTRAINT BT_TR_MD_BT_CAB_TRIP 
    FOREIGN KEY (TRAVEL_MODE_ID, BT_TRAVEL_MODE_ID) REFERENCES CT.BT_TRAVEL_MODE (TRAVEL_MODE_ID,BT_TRAVEL_MODE_ID);

ALTER TABLE CT.BT_CAB_TRIP ADD CONSTRAINT CHAIN_USER_BT_CAB_TRIP 
    FOREIGN KEY (APP_SID, LAST_EDITED_BY_SID) REFERENCES CHAIN.CHAIN_USER (APP_SID,USER_SID);

ALTER TABLE CT.BT_CAB_TRIP ADD CONSTRAINT CURRENCY_BT_CAB_TRIP 
    FOREIGN KEY (CURRENCY_ID) REFERENCES CT.CURRENCY (CURRENCY_ID);

ALTER TABLE CT.BT_CAB_TRIP ADD CONSTRAINT BT_EST_TYPE_BT_CAB_TRIP 
    FOREIGN KEY (BT_ESTIMATE_TYPE_ID) REFERENCES CT.BT_ESTIMATE_TYPE (BT_ESTIMATE_TYPE_ID);

ALTER TABLE CT.BT_CAB_TRIP ADD CONSTRAINT BD_GROUP_BT_CAB_TRIP 
    FOREIGN KEY (APP_SID, COMPANY_SID, BREAKDOWN_GROUP_ID) REFERENCES CT.BREAKDOWN_GROUP (APP_SID,COMPANY_SID,BREAKDOWN_GROUP_ID);

ALTER TABLE CT.BT_MOTORBIKE_TRIP ADD CONSTRAINT BT_TR_MD_BT_MB_TRIP 
    FOREIGN KEY (TRAVEL_MODE_ID, BT_TRAVEL_MODE_ID) REFERENCES CT.BT_TRAVEL_MODE (TRAVEL_MODE_ID,BT_TRAVEL_MODE_ID);

ALTER TABLE CT.BT_MOTORBIKE_TRIP ADD CONSTRAINT CHAIN_USER_BT_MB_TRIP 
    FOREIGN KEY (APP_SID, LAST_EDITED_BY_SID) REFERENCES CHAIN.CHAIN_USER (APP_SID,USER_SID);

ALTER TABLE CT.BT_MOTORBIKE_TRIP ADD CONSTRAINT CURRENCY_BT_MB_TRIP 
    FOREIGN KEY (CURRENCY_ID) REFERENCES CT.CURRENCY (CURRENCY_ID);

ALTER TABLE CT.BT_MOTORBIKE_TRIP ADD CONSTRAINT DIST_UNIT_BT_MB_TRIP 
    FOREIGN KEY (DISTANCE_UNIT_ID) REFERENCES CT.DISTANCE_UNIT (DISTANCE_UNIT_ID);

ALTER TABLE CT.BT_MOTORBIKE_TRIP ADD CONSTRAINT VOLUME_UNIT_BT_MB_TRIP 
    FOREIGN KEY (FUEL_UNIT_ID) REFERENCES CT.VOLUME_UNIT (VOLUME_UNIT_ID);

ALTER TABLE CT.BT_MOTORBIKE_TRIP ADD CONSTRAINT BT_FUEL_BT_MB_TRIP 
    FOREIGN KEY (BT_FUEL_ID) REFERENCES CT.BT_FUEL (BT_FUEL_ID);

ALTER TABLE CT.BT_MOTORBIKE_TRIP ADD CONSTRAINT BT_EST_TYPE_BT_MB_TRIP 
    FOREIGN KEY (BT_ESTIMATE_TYPE_ID) REFERENCES CT.BT_ESTIMATE_TYPE (BT_ESTIMATE_TYPE_ID);

ALTER TABLE CT.BT_MOTORBIKE_TRIP ADD CONSTRAINT BD_GROUP_BT_MB_TRIP 
    FOREIGN KEY (APP_SID, COMPANY_SID, BREAKDOWN_GROUP_ID) REFERENCES CT.BREAKDOWN_GROUP (APP_SID,COMPANY_SID,BREAKDOWN_GROUP_ID);

ALTER TABLE CT.BREAKDOWN_GROUP ADD CONSTRAINT BD_TYPE_BD_GROUP 
    FOREIGN KEY (APP_SID, BREAKDOWN_TYPE_ID) REFERENCES CT.BREAKDOWN_TYPE (APP_SID,BREAKDOWN_TYPE_ID);

ALTER TABLE CT.BREAKDOWN_GROUP ADD CONSTRAINT COMPANY_BD_GROUP 
    FOREIGN KEY (APP_SID, COMPANY_SID) REFERENCES CT.COMPANY (APP_SID,COMPANY_SID);

ALTER TABLE CT.BREAKDOWN_REGION_GROUP ADD CONSTRAINT BD_GROUP_BD_REGION_GROUP 
    FOREIGN KEY (APP_SID, BREAKDOWN_GROUP_ID, COMPANY_SID) REFERENCES CT.BREAKDOWN_GROUP (APP_SID,BREAKDOWN_GROUP_ID,COMPANY_SID);

ALTER TABLE CT.BREAKDOWN_REGION_GROUP ADD CONSTRAINT B_R_BD_REGION_GROUP 
    FOREIGN KEY (APP_SID, BREAKDOWN_ID, REGION_ID) REFERENCES CT.BREAKDOWN_REGION (APP_SID,BREAKDOWN_ID,REGION_ID);

ALTER TABLE CT.EC_QUESTIONNAIRE ADD CONSTRAINT COMPANY_EC_QUESTIONNAIRE 
    FOREIGN KEY (APP_SID, COMPANY_SID) REFERENCES CT.COMPANY (APP_SID,COMPANY_SID);

ALTER TABLE CT.EIO ADD CONSTRAINT EIO_GROUP_EIO 
    FOREIGN KEY (EIO_GROUP_ID) REFERENCES CT.EIO_GROUP (EIO_GROUP_ID);

ALTER TABLE CT.EIO_GROUP_ADVICE ADD CONSTRAINT EIO_GROUP_E_G_A 
    FOREIGN KEY (EIO_GROUP_ID) REFERENCES CT.EIO_GROUP (EIO_GROUP_ID);

ALTER TABLE CT.REPORT_TEMPLATE ADD CONSTRAINT TEMPLATE_KEY_REPORT_TPL 
    FOREIGN KEY (LOOKUP_KEY) REFERENCES CT.TEMPLATE_KEY (LOOKUP_KEY);
/* ---------------------------------------------------------------------- */
/* Drop table "ECQ_BUS_TYPE"                                              */
/* ---------------------------------------------------------------------- */

/* Drop constraints */

ALTER TABLE CT.ECQ_BUS_TYPE DROP CONSTRAINT PK_ECQ_BUS_TYPE;

/* Drop table */

DROP TABLE CT.ECQ_BUS_TYPE;

/* ---------------------------------------------------------------------- */
/* Drop table "ECQ_CAR_TYPE"                                              */
/* ---------------------------------------------------------------------- */

/* Drop constraints */

ALTER TABLE CT.ECQ_CAR_TYPE DROP CONSTRAINT PK_ECQ_CAR_TYPE;

/* Drop table */

DROP TABLE CT.ECQ_CAR_TYPE;

/* ---------------------------------------------------------------------- */
/* Drop table "ECQ_MOTORBIKE_TYPE"                                        */
/* ---------------------------------------------------------------------- */

/* Drop constraints */

ALTER TABLE CT.ECQ_MOTORBIKE_TYPE DROP CONSTRAINT PK_ECQ_MOTORBIKE_TYPE;

/* Drop table */

DROP TABLE CT.ECQ_MOTORBIKE_TYPE;

/* ---------------------------------------------------------------------- */
/* Drop table "ECQ_TRAIN_TYPE"                                            */
/* ---------------------------------------------------------------------- */

/* Drop constraints */

ALTER TABLE CT.ECQ_TRAIN_TYPE DROP CONSTRAINT PK_ECQ_TRAIN_TYPE;

/* Drop table */

DROP TABLE CT.ECQ_TRAIN_TYPE;

/* ---------------------------------------------------------------------- */
/* Drop table "FUEL_TYPE"                                                 */
/* ---------------------------------------------------------------------- */

/* Drop constraints */

ALTER TABLE CT.FUEL_TYPE DROP CONSTRAINT PK_FUEL_TYPE;

/* Drop table */

DROP TABLE CT.FUEL_TYPE;

UPDATE CT.BREAKDOWN_TYPE SET IS_HOTSPOT = 1;

@..\ct\create_views
@..\ct\admin_pkg
@..\ct\admin_body
@..\ct\breakdown_pkg
@..\ct\breakdown_body
@..\ct\business_travel_pkg
@..\ct\business_travel_body
@..\ct\emp_commute_pkg
@..\ct\emp_commute_body
@..\ct\hotspot_pkg
@..\ct\hotspot_body
@..\ct\link_pkg
@..\ct\link_body

@update_tail
