-- Please update version.sql too -- this keeps clean builds in sync
define version=425
@update_header


ALTER TABLE DELEGATION_TAG RENAME TO DELEGATION_IND_TAG_LIST;

ALTER TABLE DELEGATION_IND_TAG_LIST RENAME CONSTRAINT PK_DELEGATION_TAG TO PK_DELEGATION_IND_TAG_LIST;


CREATE TABLE DELEGATION_TAG(
	APP_SID         NUMBER(10, 0)    DEFAULT SYS_CONTEXT('SECURITY','APP') NOT NULL,
	DELEGATION_SID  NUMBER(10) NOT NULL,
	TAG_ID          NUMBER(10) NOT NULL,
	CONSTRAINT PK_DELEGATION__TAG PRIMARY KEY (APP_SID, DELEGATION_SID, TAG_ID)
);


ALTER TABLE DELEGATION_TAG ADD CONSTRAINT RefDRT1
	FOREIGN KEY (APP_SID, DELEGATION_SID)
	REFERENCES DELEGATION(APP_SID, DELEGATION_SID)
;

ALTER TABLE DELEGATION_TAG ADD CONSTRAINT RefDRT2
	FOREIGN KEY (APP_SID, TAG_ID)
	REFERENCES TAG(APP_SID, TAG_ID)
;

@../role_pkg
@../role_body
@../region_pkg
@../region_body
@../deleg_admin_pkg
@../deleg_admin_body

@update_tail
