-- Please update version.sql too -- this keeps clean builds in sync
define version=2138
@update_header

-- 
-- TABLE: CSR.IMG_CHART_REGION
--

CREATE TABLE CSR.IMG_CHART_REGION(
    APP_SID                  NUMBER(10, 0)     DEFAULT SYS_CONTEXT('SECURITY','APP') NOT NULL,
    IMG_CHART_SID            NUMBER(10, 0)     NOT NULL,
    REGION_SID                  NUMBER(10, 0)     NOT NULL,
    DESCRIPTION              VARCHAR2(1023),
    X                        NUMBER(10, 0)     NOT NULL,
    Y                        NUMBER(10, 0)     NOT NULL,
    BACKGROUND_COLOR         NUMBER(10, 0)     NOT NULL,
    BORDER_COLOR             NUMBER(10, 0)     NOT NULL,
    CONSTRAINT PK_IMG_CHART_REGION PRIMARY KEY (APP_SID, IMG_CHART_SID, REGION_SID)
);

 
-- 
-- TABLE: CSR.IMG_CHART_IND 
--

ALTER TABLE CSR.IMG_CHART_REGION ADD CONSTRAINT FK_IMG_CHART_REG_IMG_CH_SID
    FOREIGN KEY (APP_SID, IMG_CHART_SID)
    REFERENCES CSR.IMG_CHART(APP_SID, IMG_CHART_SID);

ALTER TABLE CSR.IMG_CHART_REGION ADD CONSTRAINT FK_REGION_IMG_CHART_IND 
    FOREIGN KEY (APP_SID, REGION_SID)
    REFERENCES CSR.REGION(APP_SID, REGION_SID);

INSERT INTO CSR.USER_SETTING (CATEGORY, SETTING, DATA_TYPE, DESCRIPTION) VALUES ('CREDIT360.PORTLETS.INDICATORPICKER', 'selectedIndSid', 'NUMBER', 'stores the last indicator that was selected in the picker');

@../img_chart_pkg
@../img_chart_body

@update_tail
