-- Please update version.sql too -- this keeps clean builds in sync
define version=2954
define minor_version=4
@update_header

-- *** DDL ***
-- Create tables

-- Some initiatives tables apear to be empty, with no packages to insert into them, and no sequences to 
-- generate ids. It seems kind of pointless, but we need to create the sequences anyway to support the 
-- mapping table population. If these tables are actually obsolete they will never get used.
CREATE SEQUENCE CSR.INITIATIV_PERIOD_STATUS_ID_SEQ START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE CSR.INITIATIVE_GROUP_ID_SEQ START WITH 1 INCREMENT BY 1;

CREATE TABLE CSRIMP.INITIATIVE (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	INITIATIVE_SID NUMBER(10,0) NOT NULL,
	CREATED_BY_SID NUMBER(10,0) NOT NULL,
	CREATED_DTM DATE NOT NULL,
	DOC_LIBRARY_SID NUMBER(10,0),
	FIELDS_XML CLOB,
	FLOW_ITEM_ID NUMBER(10,0) NOT NULL,
	FLOW_SID NUMBER(10,0) NOT NULL,
	INTERNAL_REF VARCHAR2(255),
	IS_RAMPED NUMBER(1,0) NOT NULL,
	NAME VARCHAR2(1024) NOT NULL,
	PARENT_SID NUMBER(10,0),
	PERIOD_DURATION NUMBER(10,0) NOT NULL,
	PROJECT_END_DTM DATE,
	PROJECT_SID NUMBER(10,0) NOT NULL,
	PROJECT_START_DTM DATE,
	RAG_STATUS_ID NUMBER(10,0),
	RUNNING_END_DTM DATE,
	RUNNING_START_DTM DATE,
	SAVING_TYPE_ID NUMBER(10,0) NOT NULL,
	CONSTRAINT PK_INITIATIVE PRIMARY KEY (CSRIMP_SESSION_ID, INITIATIVE_SID),
	CONSTRAINT FK_INITIATIVE_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.INITIATIVE_METRIC (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	INITIATIVE_METRIC_ID NUMBER(10,0) NOT NULL,
	DIVISIBILITY NUMBER(10,0) NOT NULL,
	IS_DURING NUMBER(1,0) NOT NULL,
	IS_EXTERNAL NUMBER(1,0) NOT NULL,
	IS_RAMPABLE NUMBER(1,0) NOT NULL,
	IS_RUNNING NUMBER(1,0) NOT NULL,
	IS_SAVING NUMBER(10,0) NOT NULL,
	LABEL VARCHAR2(1024) NOT NULL,
	LOOKUP_KEY VARCHAR2(255),
	MEASURE_SID NUMBER(10,0) NOT NULL,
	ONE_OFF_PERIOD NUMBER(10,0),
	PER_PERIOD_DURATION NUMBER(10,0),
	CONSTRAINT PK_INITIATIVE_METRIC PRIMARY KEY (CSRIMP_SESSION_ID, INITIATIVE_METRIC_ID),
	CONSTRAINT FK_INITIATIVE_METRIC_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.INITIATIVE_PROJECT (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	PROJECT_SID NUMBER(10,0) NOT NULL,
	ABBREVIATION VARCHAR2(16),
	CATEGORY_LEVEL NUMBER(10,0),
	END_DTM DATE,
	FIELDS_XML XMLTYPE NOT NULL,
	FLOW_SID NUMBER(10,0) NOT NULL,
	HELPER_PKG VARCHAR2(255),
	ICON VARCHAR2(256),
	LIVE_FLOW_STATE_ID NUMBER(10,0) NOT NULL,
	NAME VARCHAR2(1024) NOT NULL,
	PERIOD_FIELDS_XML XMLTYPE NOT NULL,
	POS NUMBER(10,0),
	POS_GROUP NUMBER(10,0),
	START_DTM DATE,
	TAB_SID NUMBER(10,0),
	CONSTRAINT PK_INITIATIVE_PROJECT PRIMARY KEY (CSRIMP_SESSION_ID, PROJECT_SID),
	CONSTRAINT FK_INITIATIVE_PROJECT_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.INITIA_PROJEC_RAG_STATUS (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	PROJECT_SID NUMBER(10,0) NOT NULL,
	RAG_STATUS_ID NUMBER(10,0) NOT NULL,
	POS NUMBER(10,0) NOT NULL,
	CONSTRAINT PK_INITIA_PROJEC_RAG_STATUS PRIMARY KEY (CSRIMP_SESSION_ID, PROJECT_SID, RAG_STATUS_ID),
	CONSTRAINT FK_INITIA_PROJEC_RAG_STATUS_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.CUSTOMER_INIT_SAVING_TYPE (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	SAVING_TYPE_ID NUMBER(10,0) NOT NULL,
	IS_DURING NUMBER(1,0),
	IS_RUNNING NUMBER(1,0),
	CONSTRAINT PK_CUSTOME_INIT_SAVING_TYPE PRIMARY KEY (CSRIMP_SESSION_ID, SAVING_TYPE_ID),
	CONSTRAINT FK_CUSTOME_INIT_SAVING_TYPE_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.INITIATIVE_METRIC_GROUP (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	PROJECT_SID NUMBER(10,0) NOT NULL,
	POS_GROUP NUMBER(10,0) NOT NULL,
	INFO_TEXT VARCHAR2(4000),
	IS_GROUP_MANDATORY NUMBER(1,0) NOT NULL,
	LABEL VARCHAR2(1024),
	CONSTRAINT PK_INITIATIVE_METRIC_GROUP PRIMARY KEY (CSRIMP_SESSION_ID, PROJECT_SID, POS_GROUP),
	CONSTRAINT FK_INITIATIVE_METRIC_GROUP_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.PROJECT_INITIATIVE_METRIC (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	PROJECT_SID NUMBER(10,0) NOT NULL,
	INITIATIVE_METRIC_ID NUMBER(10,0) NOT NULL,
	DEFAULT_VALUE NUMBER(24,10),
	DISPLAY_CONTEXT VARCHAR2(255),
	FLOW_SID NUMBER(10,0) NOT NULL,
	INFO_TEXT VARCHAR2(4000),
	INPUT_DP NUMBER(10,0) NOT NULL,
	POS NUMBER(10,0) NOT NULL,
	POS_GROUP NUMBER(10,0) NOT NULL,
	UPDATE_PER_PERIOD NUMBER(1,0) NOT NULL,
	CONSTRAINT PK_PROJECT_INITIATIV_METRIC PRIMARY KEY (CSRIMP_SESSION_ID, PROJECT_SID, INITIATIVE_METRIC_ID),
	CONSTRAINT FK_PROJECT_INITIATIV_METRIC_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.INITIATIVE_METRIC_ASSOC (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	PROJECT_SID NUMBER(10,0) NOT NULL,
	PROPOSED_METRIC_ID NUMBER(10,0) NOT NULL,
	MEASURED_METRIC_ID NUMBER(10,0) NOT NULL,
	CONSTRAINT PK_INITIATIVE_METRIC_ASSOC PRIMARY KEY (CSRIMP_SESSION_ID, PROJECT_SID, PROPOSED_METRIC_ID, MEASURED_METRIC_ID),
	CONSTRAINT FK_INITIATIVE_METRIC_ASSOC_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.PROJ_INIT_METR_FLOW_STAT (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	INITIATIVE_METRIC_ID NUMBER(10,0) NOT NULL,
	FLOW_STATE_ID NUMBER(10,0) NOT NULL,
	PROJECT_SID NUMBER(10,0) NOT NULL,
	FLOW_SID NUMBER(10,0) NOT NULL,
	MANDATORY NUMBER(1,0) NOT NULL,
	VISIBLE NUMBER(1,0) NOT NULL,
	CONSTRAINT PK_PROJ_INIT_METR_FLOW_STAT PRIMARY KEY (CSRIMP_SESSION_ID, INITIATIVE_METRIC_ID, FLOW_STATE_ID, PROJECT_SID),
	CONSTRAINT FK_PROJ_INIT_METR_FLOW_STAT_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.INITIAT_METRIC_STATE_IND (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	INITIATIVE_METRIC_ID NUMBER(10,0) NOT NULL,
	FLOW_STATE_GROUP_ID NUMBER(10,0) NOT NULL,
	IND_SID NUMBER(10,0) NOT NULL,
	MEASURE_SID NUMBER(10,0) NOT NULL,
	NET_PERIOD NUMBER(10,0),
	CONSTRAINT PK_INITIAT_METRIC_STATE_IND PRIMARY KEY (CSRIMP_SESSION_ID, INITIATIVE_METRIC_ID, FLOW_STATE_GROUP_ID, IND_SID),
	CONSTRAINT FK_INITIAT_METRIC_STATE_IND_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.AGGR_TAG_GROUP (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	AGGR_TAG_GROUP_ID NUMBER(10,0) NOT NULL,
	COUNT_IND_SID NUMBER(10,0),
	LABEL VARCHAR2(1024) NOT NULL,
	LOOKUP_KEY VARCHAR2(256) NOT NULL,
	CONSTRAINT PK_AGGR_TAG_GROUP PRIMARY KEY (CSRIMP_SESSION_ID, AGGR_TAG_GROUP_ID),
	CONSTRAINT FK_AGGR_TAG_GROUP_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.INITIATIV_METRIC_TAG_IND (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	INITIATIVE_METRIC_ID NUMBER(10,0) NOT NULL,
	AGGR_TAG_GROUP_ID NUMBER(10,0) NOT NULL,
	IND_SID NUMBER(10,0) NOT NULL,
	MEASURE_SID NUMBER(10,0) NOT NULL,
	CONSTRAINT PK_INITIATIV_METRIC_TAG_IND PRIMARY KEY (CSRIMP_SESSION_ID, INITIATIVE_METRIC_ID, AGGR_TAG_GROUP_ID, IND_SID),
	CONSTRAINT FK_INITIATIV_METRIC_TAG_IND_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.AGGR_TAG_GROUP_MEMBER (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	AGGR_TAG_GROUP_ID NUMBER(10,0) NOT NULL,
	TAG_ID NUMBER(10,0) NOT NULL,
	CONSTRAINT PK_AGGR_TAG_GROUP_MEMBER PRIMARY KEY (CSRIMP_SESSION_ID, AGGR_TAG_GROUP_ID, TAG_ID),
	CONSTRAINT FK_AGGR_TAG_GROUP_MEMBER_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.FLOW_STATE_GROUP (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	FLOW_STATE_GROUP_ID NUMBER(10,0) NOT NULL,
	COUNT_IND_SID NUMBER(10,0),
	LABEL VARCHAR2(1024) NOT NULL,
	LOOKUP_KEY VARCHAR2(256) NOT NULL,
	CONSTRAINT PK_FLOW_STATE_GROUP PRIMARY KEY (CSRIMP_SESSION_ID, FLOW_STATE_GROUP_ID),
	CONSTRAINT FK_FLOW_STATE_GROUP_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.FLOW_STATE_GROUP_MEMBER (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	FLOW_STATE_GROUP_ID NUMBER(10,0) NOT NULL,
	FLOW_STATE_ID NUMBER(10,0) NOT NULL,
	AFTER_REPORT_DATE NUMBER(1,0) NOT NULL,
	BEFORE_REPORT_DATE NUMBER(1,0) NOT NULL,
	CONSTRAINT PK_FLOW_STATE_GROUP_MEMBER PRIMARY KEY (CSRIMP_SESSION_ID, FLOW_STATE_GROUP_ID, FLOW_STATE_ID),
	CONSTRAINT FK_FLOW_STATE_GROUP_MEMBER_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.INITIATIVE_COMMENT (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	INITIATIVE_COMMENT_ID NUMBER(10,0) NOT NULL,
	COMMENT_TEXT CLOB,
	INITIATIVE_SID NUMBER(10,0),
	POSTED_DTM DATE NOT NULL,
	USER_SID NUMBER(10,0) NOT NULL,
	CONSTRAINT PK_INITIATIVE_COMMENT PRIMARY KEY (CSRIMP_SESSION_ID, INITIATIVE_COMMENT_ID),
	CONSTRAINT FK_INITIATIVE_COMMENT_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.INITIATIVE_EVENT (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	INITIATIVE_EVENT_ID NUMBER(10,0) NOT NULL,
	CREATED_BY_SID NUMBER(10,0) NOT NULL,
	CREATED_DTM DATE NOT NULL,
	DESCRIPTION VARCHAR2(4000),
	END_DTM DATE,
	INITIATIVE_SID NUMBER(10,0) NOT NULL,
	LOCATION VARCHAR2(1000),
	START_DTM DATE NOT NULL,
	CONSTRAINT PK_INITIATIVE_EVENT PRIMARY KEY (CSRIMP_SESSION_ID, INITIATIVE_EVENT_ID),
	CONSTRAINT FK_INITIATIVE_EVENT_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.INITIATIVE_GROUP (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	INITIATIVE_GROUP_ID NUMBER(10,0) NOT NULL,
	IS_PUBLIC NUMBER(1,0) NOT NULL,
	NAME VARCHAR2(256) NOT NULL,
	CONSTRAINT PK_INITIATIVE_GROUP PRIMARY KEY (CSRIMP_SESSION_ID, INITIATIVE_GROUP_ID),
	CONSTRAINT FK_INITIATIVE_GROUP_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.INITIAT_GROUP_FLOW_STATE (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	INITIATIVE_USER_GROUP_ID NUMBER(10,0) NOT NULL,
	FLOW_STATE_ID NUMBER(10,0) NOT NULL,
	FLOW_SID NUMBER(10,0) NOT NULL,
	GENERATE_ALERTS NUMBER(1,0) NOT NULL,
	IS_EDITABLE NUMBER(1,0) NOT NULL,
	PROJECT_SID NUMBER(10,0) NOT NULL,
	CONSTRAINT PK_INITIAT_GROUP_FLOW_STATE PRIMARY KEY (CSRIMP_SESSION_ID, INITIATIVE_USER_GROUP_ID, FLOW_STATE_ID, PROJECT_SID),
	CONSTRAINT FK_INITIAT_GROUP_FLOW_STATE_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.INITIATIVE_GROUP_MEMBER (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	INITIATIVE_GROUP_ID NUMBER(10,0) NOT NULL,
	INITIATIVE_SID NUMBER(10,0) NOT NULL,
	CONSTRAINT PK_INITIATIVE_GROUP_MEMBER PRIMARY KEY (CSRIMP_SESSION_ID, INITIATIVE_GROUP_ID, INITIATIVE_SID),
	CONSTRAINT FK_INITIATIVE_GROUP_MEMBER_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.INITIATIVE_GROUP_USER (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	INITIATIVE_GROUP_ID NUMBER(10,0) NOT NULL,
	USER_SID NUMBER(10,0) NOT NULL,
	CAN_EDIT NUMBER(1,0) NOT NULL,
	CONSTRAINT PK_INITIATIVE_GROUP_USER PRIMARY KEY (CSRIMP_SESSION_ID, INITIATIVE_GROUP_ID, USER_SID),
	CONSTRAINT FK_INITIATIVE_GROUP_USER_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.INITIATIVE_IMPORT_MAP_MRU (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	CSR_USER_SID NUMBER(10,0) NOT NULL,
	FROM_NAME VARCHAR2(1024) NOT NULL,
	TO_NAME VARCHAR2(1024) NOT NULL,
	POS NUMBER(10,0) NOT NULL,
	CONSTRAINT PK_INITIATIV_IMPORT_MAP_MRU PRIMARY KEY (CSRIMP_SESSION_ID, CSR_USER_SID, FROM_NAME, TO_NAME),
	CONSTRAINT FK_INITIATIV_IMPORT_MAP_MRU_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.INITIATI_IMPORT_TEMPLATE (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	IMPORT_TEMPLATE_ID NUMBER(10,0) NOT NULL,
	HEADING_ROW_IDX NUMBER(10,0) NOT NULL,
	IS_DEFAULT NUMBER(1,0) NOT NULL,
	NAME VARCHAR2(1024) NOT NULL,
	PROJECT_SID NUMBER(10,0),
	WORKBOOK BLOB,
	WORKSHEET_NAME VARCHAR2(1024) NOT NULL,
	CONSTRAINT PK_INITIATI_IMPORT_TEMPLATE PRIMARY KEY (CSRIMP_SESSION_ID, IMPORT_TEMPLATE_ID),
	CONSTRAINT FK_INITIATI_IMPORT_TEMPLATE_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.INITIA_IMPORT_TEMPLA_MAP (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	IMPORT_TEMPLATE_ID NUMBER(10,0) NOT NULL,
	TO_NAME VARCHAR2(1024) NOT NULL,
	FROM_IDX NUMBER(10,0) NOT NULL,
	FROM_NAME VARCHAR2(1024) NOT NULL,
	CONSTRAINT PK_INITIA_IMPORT_TEMPLA_MAP PRIMARY KEY (CSRIMP_SESSION_ID, IMPORT_TEMPLATE_ID, TO_NAME),
	CONSTRAINT FK_INITIA_IMPORT_TEMPLA_MAP_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.INITIATIVE_METRIC_VAL (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	INITIATIVE_METRIC_ID NUMBER(10,0) NOT NULL,
	INITIATIVE_SID NUMBER(10,0) NOT NULL,
	ENTRY_MEASURE_CONVERSION_ID NUMBER(10,0),
	ENTRY_VAL NUMBER(24,10),
	MEASURE_SID NUMBER(10,0),
	PROJECT_SID NUMBER(10,0) NOT NULL,
	VAL NUMBER(24,10),
	CONSTRAINT PK_INITIATIVE_METRIC_VAL PRIMARY KEY (CSRIMP_SESSION_ID, INITIATIVE_METRIC_ID, INITIATIVE_SID),
	CONSTRAINT FK_INITIATIVE_METRIC_VAL_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.INITIATIVE_PERIOD_STATUS (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	INITIATIVE_PERIOD_STATUS_ID NUMBER(10,0) NOT NULL,
	COLOUR NUMBER(10,0),
	LABEL VARCHAR2(255) NOT NULL,
	MEANS_PCT_COMPLETE NUMBER(3,2),
	CONSTRAINT PK_INITIATIVE_PERIOD_STATUS PRIMARY KEY (CSRIMP_SESSION_ID, INITIATIVE_PERIOD_STATUS_ID),
	CONSTRAINT FK_INITIATIVE_PERIOD_STATUS_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.INITIATIVE_PERIOD (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	INITIATIVE_SID NUMBER(10,0) NOT NULL,
	REGION_SID NUMBER(10,0) NOT NULL,
	START_DTM DATE NOT NULL,
	APPROVED_BY_SID NUMBER(10,0),
	APPROVED_DTM DATE,
	END_DTM DATE NOT NULL,
	ENTERED_BY_SID NUMBER(10,0) NOT NULL,
	ENTERED_DTM DATE NOT NULL,
	FIELDS_XML CLOB,
	INITIATIVE_PERIOD_STATUS_ID NUMBER(10,0) NOT NULL,
	NEEDS_AGGREGATION NUMBER(1,0) NOT NULL,
	PROJECT_SID NUMBER(10,0) NOT NULL,
	PUBLIC_COMMENT_APPROVED_BY_SID NUMBER(10,0),
	PUBLIC_COMMENT_APPROVED_DTM DATE,
	SET_FLOW_STATE_ID NUMBER(10,0),
	CONSTRAINT PK_INITIATIVE_PERIOD PRIMARY KEY (CSRIMP_SESSION_ID, INITIATIVE_SID, REGION_SID, START_DTM),
	CONSTRAINT FK_INITIATIVE_PERIOD_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.INITIATIVE_PROJECT_TAB (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	PROJECT_SID NUMBER(10,0) NOT NULL,
	PLUGIN_ID NUMBER(10,0) NOT NULL,
	PLUGIN_TYPE_ID NUMBER(10,0) NOT NULL,
	POS NUMBER(10,0) NOT NULL,
	TAB_LABEL VARCHAR2(255) NOT NULL,
	CONSTRAINT PK_INITIATIVE_PROJECT_TAB PRIMARY KEY (CSRIMP_SESSION_ID, PROJECT_SID, PLUGIN_ID),
	CONSTRAINT FK_INITIATIVE_PROJECT_TAB_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.INITIA_PROJECT_TAB_GROUP (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	PROJECT_SID NUMBER(10,0) NOT NULL,
	PLUGIN_ID NUMBER(10,0) NOT NULL,
	GROUP_SID NUMBER(10,0) NOT NULL,
	IS_READ_ONLY NUMBER(1,0) NOT NULL,
	CONSTRAINT PK_INITIA_PROJECT_TAB_GROUP PRIMARY KEY (CSRIMP_SESSION_ID, PROJECT_SID, PLUGIN_ID, GROUP_SID),
	CONSTRAINT FK_INITIA_PROJECT_TAB_GROUP_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.INITIATIVE_PROJECT_TEAM (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	EMAIL VARCHAR2(512),
	INITIATIVE_SID NUMBER(10,0) NOT NULL,
	NAME VARCHAR2(512) NOT NULL,
	CONSTRAINT FK_INITIATIVE_PROJECT_TEAM_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.INITIATIVE_REGION (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	INITIATIVE_SID NUMBER(10,0) NOT NULL,
	REGION_SID NUMBER(10,0) NOT NULL,
	USE_FOR_CALC NUMBER(1,0),
	CONSTRAINT PK_INITIATIVE_REGION PRIMARY KEY (CSRIMP_SESSION_ID, INITIATIVE_SID, REGION_SID),
	CONSTRAINT FK_INITIATIVE_REGION_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.INITIATIVE_SPONSOR (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	EMAIL VARCHAR2(512),
	INITIATIVE_SID NUMBER(10,0) NOT NULL,
	NAME VARCHAR2(512) NOT NULL,
	CONSTRAINT FK_INITIATIVE_SPONSOR_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.INITIATIVE_TAG (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	INITIATIVE_SID NUMBER(10,0) NOT NULL,
	TAG_ID NUMBER(10,0) NOT NULL,
	CONSTRAINT PK_INITIATIVE_TAG PRIMARY KEY (CSRIMP_SESSION_ID, INITIATIVE_SID, TAG_ID),
	CONSTRAINT FK_INITIATIVE_TAG_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.INITIATIVE_USER_GROUP (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	INITIATIVE_USER_GROUP_ID NUMBER(10,0) NOT NULL,
	LABEL VARCHAR2(255) NOT NULL,
	LOOKUP_KEY VARCHAR2(255),
	SYNCH_ISSUES NUMBER(1,0) NOT NULL,
	CONSTRAINT PK_INITIATIVE_USER_GROUP PRIMARY KEY (CSRIMP_SESSION_ID, INITIATIVE_USER_GROUP_ID),
	CONSTRAINT FK_INITIATIVE_USER_GROUP_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.INITIA_PROJEC_USER_GROUP (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	INITIATIVE_USER_GROUP_ID NUMBER(10,0) NOT NULL,
	PROJECT_SID NUMBER(10,0) NOT NULL,
	CONSTRAINT PK_INITIA_PROJEC_USER_GROUP PRIMARY KEY (CSRIMP_SESSION_ID, INITIATIVE_USER_GROUP_ID, PROJECT_SID),
	CONSTRAINT FK_INITIA_PROJEC_USER_GROUP_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.INITIATIVE_USER (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	INITIATIVE_SID NUMBER(10,0) NOT NULL,
	INITIATIVE_USER_GROUP_ID NUMBER(10,0) NOT NULL,
	USER_SID NUMBER(10,0) NOT NULL,
	PROJECT_SID NUMBER(10,0) NOT NULL,
	CONSTRAINT PK_INITIATIVE_USER PRIMARY KEY (CSRIMP_SESSION_ID, INITIATIVE_SID, INITIATIVE_USER_GROUP_ID, USER_SID),
	CONSTRAINT FK_INITIATIVE_USER_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.INITIATIVE_USER_MSG (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	INITIATIVE_SID NUMBER(10,0) NOT NULL,
	USER_MSG_ID NUMBER(10,0) NOT NULL,
	CONSTRAINT PK_INITIATIVE_USER_MSG PRIMARY KEY (CSRIMP_SESSION_ID, INITIATIVE_SID, USER_MSG_ID),
	CONSTRAINT FK_INITIATIVE_USER_MSG_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.INITIATIVES_OPTIONS (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	AUTO_COMPLETE_DATE NUMBER(1,0) NOT NULL,
	CURRENT_REPORT_DATE DATE,
	GANTT_PERIOD_COLOUR NUMBER(1,0) NOT NULL,
	INITIATIVES_HOST VARCHAR2(256),
	INITIATIVE_NAME_GEN_PROC VARCHAR2(256),
	INITIATIVE_NEW_DAYS NUMBER(10,0) NOT NULL,
	INITIATIVE_REMINDER_ALERTS NUMBER(1,0) NOT NULL,
	METRICS_END_YEAR NUMBER(10,0) NOT NULL,
	METRICS_START_YEAR NUMBER(10,0) NOT NULL,
	MY_INITIATIVES_OPTIONS VARCHAR2(1024),
	UPDATE_REF_ON_AMEND NUMBER(1,0) NOT NULL,
	CONSTRAINT FK_INITIATIVES_OPTIONS_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.USER_MSG (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	USER_MSG_ID NUMBER(10,0) NOT NULL,
	MSG_DTM DATE NOT NULL,
	MSG_TEXT CLOB NOT NULL,
	REPLY_TO_MSG_ID NUMBER(10,0),
	USER_SID NUMBER(10,0) NOT NULL,
	CONSTRAINT PK_USER_MSG PRIMARY KEY (CSRIMP_SESSION_ID, USER_MSG_ID),
	CONSTRAINT FK_USER_MSG_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.PROJE_INITIA_PERIOD_STAT (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	PROJECT_SID NUMBER(10,0) NOT NULL,
	INITIATIVE_PERIOD_STATUS_ID NUMBER(10,0) NOT NULL,
	CONSTRAINT PK_PROJE_INITIA_PERIOD_STAT PRIMARY KEY (CSRIMP_SESSION_ID, PROJECT_SID, INITIATIVE_PERIOD_STATUS_ID),
	CONSTRAINT FK_PROJE_INITIA_PERIOD_STAT_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.DEFAUL_INITIA_USER_STATE (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	FLOW_STATE_ID NUMBER(10,0) NOT NULL,
	FLOW_SID NUMBER(10,0),
	IS_EDITABLE NUMBER(1,0) NOT NULL,
	CONSTRAINT PK_DEFAUL_INITIA_USER_STATE PRIMARY KEY (CSRIMP_SESSION_ID, FLOW_STATE_ID),
	CONSTRAINT FK_DEFAUL_INITIA_USER_STATE_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.ISSUE_INITIATIVE (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	ISSUE_INITIATIVE_ID NUMBER(10,0) NOT NULL,
	INITIATIVE_SID NUMBER(10,0) NOT NULL,
	CONSTRAINT PK_ISSUE_INITIATIVE PRIMARY KEY (CSRIMP_SESSION_ID, ISSUE_INITIATIVE_ID),
	CONSTRAINT FK_ISSUE_INITIATIVE_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.AGGR_REGION (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	REGION_SID NUMBER(10,0) NOT NULL,
	AGGR_REGION_SID NUMBER(10,0) NOT NULL,
	CONSTRAINT PK_AGGR_REGION PRIMARY KEY (CSRIMP_SESSION_ID, REGION_SID),
	CONSTRAINT FK_AGGR_REGION_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.ALERT_BATCH_RUN (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	CUSTOMER_ALERT_TYPE_ID NUMBER(10,0) NOT NULL,
	CSR_USER_SID NUMBER(10,0) NOT NULL,
	NEXT_FIRE_TIME TIMESTAMP(6) NOT NULL,
	PREV_FIRE_TIME TIMESTAMP(6),
	CONSTRAINT PK_ALERT_BATCH_RUN PRIMARY KEY (CSRIMP_SESSION_ID, CUSTOMER_ALERT_TYPE_ID, CSR_USER_SID),
	CONSTRAINT FK_ALERT_BATCH_RUN_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.PROJECT_DOC_FOLDER (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	PROJECT_SID NUMBER(10,0) NOT NULL,
	NAME VARCHAR2(256) NOT NULL,
	INFO_TEXT VARCHAR2(4000),
	LABEL VARCHAR2(1024) NOT NULL,
	CONSTRAINT PK_PROJECT_DOC_FOLDER PRIMARY KEY (CSRIMP_SESSION_ID, PROJECT_SID, NAME),
	CONSTRAINT FK_PROJECT_DOC_FOLDER_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.PROJECT_TAG_GROUP (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	PROJECT_SID NUMBER(10,0) NOT NULL,
	TAG_GROUP_ID NUMBER(10,0) NOT NULL,
	DEFAULT_TAG_ID NUMBER(10,0),
	POS NUMBER(10,0) NOT NULL,
	CONSTRAINT PK_PROJECT_TAG_GROUP PRIMARY KEY (CSRIMP_SESSION_ID, PROJECT_SID, TAG_GROUP_ID),
	CONSTRAINT FK_PROJECT_TAG_GROUP_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.PROJECT_TAG_FILTER (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	PROJECT_SID NUMBER(10,0) NOT NULL,
	TAG_GROUP_ID NUMBER(10,0) NOT NULL,
	TAG_ID NUMBER(10,0) NOT NULL,
	CONSTRAINT PK_PROJECT_TAG_FILTER PRIMARY KEY (CSRIMP_SESSION_ID, PROJECT_SID, TAG_GROUP_ID, TAG_ID),
	CONSTRAINT FK_PROJECT_TAG_FILTER_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

-- Map tables
CREATE TABLE CSRIMP.MAP_INITIATIVE_METRIC (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	OLD_INITIATIVE_METRIC_ID NUMBER(10) NOT NULL,
	NEW_INITIATIVE_METRIC_ID NUMBER(10) NOT NULL,
	CONSTRAINT PK_MAP_INITIATIVE_METRIC PRIMARY KEY (CSRIMP_SESSION_ID, OLD_INITIATIVE_METRIC_ID) USING INDEX,
	CONSTRAINT UK_MAP_INITIATIVE_METRIC UNIQUE (CSRIMP_SESSION_ID, NEW_INITIATIVE_METRIC_ID) USING INDEX,
	CONSTRAINT FK_MAP_INITIATIVE_METRIC_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.MAP_AGGR_TAG_GROUP (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	OLD_AGGR_TAG_GROUP_ID NUMBER(10) NOT NULL,
	NEW_AGGR_TAG_GROUP_ID NUMBER(10) NOT NULL,
	CONSTRAINT PK_MAP_AGGR_TAG_GROUP PRIMARY KEY (CSRIMP_SESSION_ID, OLD_AGGR_TAG_GROUP_ID) USING INDEX,
	CONSTRAINT UK_MAP_AGGR_TAG_GROUP UNIQUE (CSRIMP_SESSION_ID, NEW_AGGR_TAG_GROUP_ID) USING INDEX,
	CONSTRAINT FK_MAP_AGGR_TAG_GROUP_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.MAP_FLOW_STATE_GROUP (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	OLD_FLOW_STATE_GROUP_ID NUMBER(10) NOT NULL,
	NEW_FLOW_STATE_GROUP_ID NUMBER(10) NOT NULL,
	CONSTRAINT PK_MAP_FLOW_STATE_GROUP PRIMARY KEY (CSRIMP_SESSION_ID, OLD_FLOW_STATE_GROUP_ID) USING INDEX,
	CONSTRAINT UK_MAP_FLOW_STATE_GROUP UNIQUE (CSRIMP_SESSION_ID, NEW_FLOW_STATE_GROUP_ID) USING INDEX,
	CONSTRAINT FK_MAP_FLOW_STATE_GROUP_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.MAP_INITIATIVE_COMMENT (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	OLD_INITIATIVE_COMMENT_ID NUMBER(10) NOT NULL,
	NEW_INITIATIVE_COMMENT_ID NUMBER(10) NOT NULL,
	CONSTRAINT PK_MAP_INITIATIVE_COMMENT PRIMARY KEY (CSRIMP_SESSION_ID, OLD_INITIATIVE_COMMENT_ID) USING INDEX,
	CONSTRAINT UK_MAP_INITIATIVE_COMMENT UNIQUE (CSRIMP_SESSION_ID, NEW_INITIATIVE_COMMENT_ID) USING INDEX,
	CONSTRAINT FK_MAP_INITIATIVE_COMMENT_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.MAP_INITIATIVE_EVENT (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	OLD_INITIATIVE_EVENT_ID NUMBER(10) NOT NULL,
	NEW_INITIATIVE_EVENT_ID NUMBER(10) NOT NULL,
	CONSTRAINT PK_MAP_INITIATIVE_EVENT PRIMARY KEY (CSRIMP_SESSION_ID, OLD_INITIATIVE_EVENT_ID) USING INDEX,
	CONSTRAINT UK_MAP_INITIATIVE_EVENT UNIQUE (CSRIMP_SESSION_ID, NEW_INITIATIVE_EVENT_ID) USING INDEX,
	CONSTRAINT FK_MAP_INITIATIVE_EVENT_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.MAP_INITIATIVE_GROUP (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	OLD_INITIATIVE_GROUP_ID NUMBER(10) NOT NULL,
	NEW_INITIATIVE_GROUP_ID NUMBER(10) NOT NULL,
	CONSTRAINT PK_MAP_INITIATIVE_GROUP PRIMARY KEY (CSRIMP_SESSION_ID, OLD_INITIATIVE_GROUP_ID) USING INDEX,
	CONSTRAINT UK_MAP_INITIATIVE_GROUP UNIQUE (CSRIMP_SESSION_ID, NEW_INITIATIVE_GROUP_ID) USING INDEX,
	CONSTRAINT FK_MAP_INITIATIVE_GROUP_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.MAP_INITIATIV_USER_GROUP (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	OLD_INITIATIVE_USER_GROUP_ID NUMBER(10) NOT NULL,
	NEW_INITIATIVE_USER_GROUP_ID NUMBER(10) NOT NULL,
	CONSTRAINT PK_MAP_INITIATIV_USER_GROUP PRIMARY KEY (CSRIMP_SESSION_ID, OLD_INITIATIVE_USER_GROUP_ID) USING INDEX,
	CONSTRAINT UK_MAP_INITIATIV_USER_GROUP UNIQUE (CSRIMP_SESSION_ID, NEW_INITIATIVE_USER_GROUP_ID) USING INDEX,
	CONSTRAINT FK_MAP_INITIATIV_USER_GROUP_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.MAP_IMPORT_TEMPLATE (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	OLD_IMPORT_TEMPLATE_ID NUMBER(10) NOT NULL,
	NEW_IMPORT_TEMPLATE_ID NUMBER(10) NOT NULL,
	CONSTRAINT PK_MAP_IMPORT_TEMPLATE PRIMARY KEY (CSRIMP_SESSION_ID, OLD_IMPORT_TEMPLATE_ID) USING INDEX,
	CONSTRAINT UK_MAP_IMPORT_TEMPLATE UNIQUE (CSRIMP_SESSION_ID, NEW_IMPORT_TEMPLATE_ID) USING INDEX,
	CONSTRAINT FK_MAP_IMPORT_TEMPLATE_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.MAP_INITIA_PERIOD_STATUS (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	OLD_INITIATIV_PERIOD_STATUS_ID NUMBER(10) NOT NULL,
	NEW_INITIATIV_PERIOD_STATUS_ID NUMBER(10) NOT NULL,
	CONSTRAINT PK_MAP_INITIA_PERIOD_STATUS PRIMARY KEY (CSRIMP_SESSION_ID, OLD_INITIATIV_PERIOD_STATUS_ID) USING INDEX,
	CONSTRAINT UK_MAP_INITIA_PERIOD_STATUS UNIQUE (CSRIMP_SESSION_ID, NEW_INITIATIV_PERIOD_STATUS_ID) USING INDEX,
	CONSTRAINT FK_MAP_INITIA_PERIOD_STATUS_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.MAP_USER_MSG (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	OLD_USER_MSG_ID NUMBER(10) NOT NULL,
	NEW_USER_MSG_ID NUMBER(10) NOT NULL,
	CONSTRAINT PK_MAP_USER_MSG PRIMARY KEY (CSRIMP_SESSION_ID, OLD_USER_MSG_ID) USING INDEX,
	CONSTRAINT UK_MAP_USER_MSG UNIQUE (CSRIMP_SESSION_ID, NEW_USER_MSG_ID) USING INDEX,
	CONSTRAINT FK_MAP_USER_MSG_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);

CREATE TABLE CSRIMP.MAP_ISSUE_INITIATIVE (
	CSRIMP_SESSION_ID NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	OLD_ISSUE_INITIATIVE_ID NUMBER(10) NOT NULL,
	NEW_ISSUE_INITIATIVE_ID NUMBER(10) NOT NULL,
	CONSTRAINT PK_MAP_ISSUE_INITIATIVE PRIMARY KEY (CSRIMP_SESSION_ID, OLD_ISSUE_INITIATIVE_ID) USING INDEX,
	CONSTRAINT UK_MAP_ISSUE_INITIATIVE UNIQUE (CSRIMP_SESSION_ID, NEW_ISSUE_INITIATIVE_ID) USING INDEX,
	CONSTRAINT FK_MAP_ISSUE_INITIATIVE_IS FOREIGN KEY (CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID) ON DELETE CASCADE
);
-- Alter tables

-- *** Grants ***
-- Package grants
grant select, insert, update, delete on csrimp.initiative to web_user;
grant select, insert, update, delete on csrimp.initiative_metric to web_user;
grant select, insert, update, delete on csrimp.initiative_project to web_user;
grant select, insert, update, delete on csrimp.initia_projec_rag_status to web_user;
grant select, insert, update, delete on csrimp.customer_init_saving_type to web_user;
grant select, insert, update, delete on csrimp.initiative_metric_group to web_user;
grant select, insert, update, delete on csrimp.project_initiative_metric to web_user;
grant select, insert, update, delete on csrimp.initiative_metric_assoc to web_user;
grant select, insert, update, delete on csrimp.proj_init_metr_flow_stat to web_user;
grant select, insert, update, delete on csrimp.initiat_metric_state_ind to web_user;
grant select, insert, update, delete on csrimp.aggr_tag_group to web_user;
grant select, insert, update, delete on csrimp.initiativ_metric_tag_ind to web_user;
grant select, insert, update, delete on csrimp.aggr_tag_group_member to web_user;
grant select, insert, update, delete on csrimp.flow_state_group to web_user;
grant select, insert, update, delete on csrimp.flow_state_group_member to web_user;
grant select, insert, update, delete on csrimp.initiative_comment to web_user;
grant select, insert, update, delete on csrimp.initiative_event to web_user;
grant select, insert, update, delete on csrimp.initiative_group to web_user;
grant select, insert, update, delete on csrimp.initiat_group_flow_state to web_user;
grant select, insert, update, delete on csrimp.initiative_group_member to web_user;
grant select, insert, update, delete on csrimp.initiative_group_user to web_user;
grant select, insert, update, delete on csrimp.initiative_import_map_mru to web_user;
grant select, insert, update, delete on csrimp.initiati_import_template to web_user;
grant select, insert, update, delete on csrimp.initia_import_templa_map to web_user;
grant select, insert, update, delete on csrimp.initiative_metric_val to web_user;
grant select, insert, update, delete on csrimp.initiative_period_status to web_user;
grant select, insert, update, delete on csrimp.initiative_period to web_user;
grant select, insert, update, delete on csrimp.initiative_project_tab to web_user;
grant select, insert, update, delete on csrimp.initia_project_tab_group to web_user;
grant select, insert, update, delete on csrimp.initiative_project_team to web_user;
grant select, insert, update, delete on csrimp.initiative_region to web_user;
grant select, insert, update, delete on csrimp.initiative_sponsor to web_user;
grant select, insert, update, delete on csrimp.initiative_tag to web_user;
grant select, insert, update, delete on csrimp.initiative_user_group to web_user;
grant select, insert, update, delete on csrimp.initia_projec_user_group to web_user;
grant select, insert, update, delete on csrimp.initiative_user to web_user;
grant select, insert, update, delete on csrimp.initiative_user_msg to web_user;
grant select, insert, update, delete on csrimp.initiatives_options to web_user;
grant select, insert, update, delete on csrimp.user_msg to web_user;
grant select, insert, update, delete on csrimp.proje_initia_period_stat to web_user;
grant select, insert, update, delete on csrimp.defaul_initia_user_state to web_user;
grant select, insert, update, delete on csrimp.issue_initiative to web_user;
grant select, insert, update, delete on csrimp.aggr_region to web_user;
grant select, insert, update, delete on csrimp.alert_batch_run to web_user;
grant select, insert, update, delete on csrimp.project_doc_folder to web_user;
grant select, insert, update, delete on csrimp.project_tag_group to web_user;
grant select, insert, update, delete on csrimp.project_tag_filter to web_user;

-- Object grants

-- grants for csrimp
grant select, insert, update on csr.initiative to csrimp;
grant select, insert, update on csr.initiative_metric to csrimp;
grant select, insert, update on csr.initiative_project to csrimp;
grant select, insert, update on csr.initiative_project_rag_status to csrimp;
grant select, insert, update on csr.customer_init_saving_type to csrimp;
grant select, insert, update on csr.initiative_metric_group to csrimp;
grant select, insert, update on csr.project_initiative_metric to csrimp;
grant select, insert, update on csr.initiative_metric_assoc to csrimp;
grant select, insert, update on csr.project_init_metric_flow_state to csrimp;
grant select, insert, update on csr.initiative_metric_state_ind to csrimp;
grant select, insert, update on csr.aggr_tag_group to csrimp;
grant select, insert, update on csr.initiative_metric_tag_ind to csrimp;
grant select, insert, update on csr.aggr_tag_group_member to csrimp;
grant select, insert, update on csr.flow_state_group to csrimp;
grant select, insert, update on csr.flow_state_group_member to csrimp;
grant select, insert, update on csr.initiative_comment to csrimp;
grant select, insert, update on csr.initiative_event to csrimp;
grant select, insert, update on csr.initiative_group to csrimp;
grant select, insert, update on csr.initiative_group_flow_state to csrimp;
grant select, insert, update on csr.initiative_group_member to csrimp;
grant select, insert, update on csr.initiative_group_user to csrimp;
grant select, insert, update on csr.initiative_import_map_mru to csrimp;
grant select, insert, update on csr.initiative_import_template to csrimp;
grant select, insert, update on csr.initiative_import_template_map to csrimp;
grant select, insert, update on csr.initiative_metric_val to csrimp;
grant select, insert, update on csr.initiative_period_status to csrimp;
grant select, insert, update on csr.initiative_period to csrimp;
grant select, insert, update on csr.initiative_project_tab to csrimp;
grant select, insert, update on csr.initiative_project_tab_group to csrimp;
grant select, insert, update on csr.initiative_project_team to csrimp;
grant select, insert, update on csr.initiative_region to csrimp;
grant select, insert, update on csr.initiative_sponsor to csrimp;
grant select, insert, update on csr.initiative_tag to csrimp;
grant select, insert, update on csr.initiative_user_group to csrimp;
grant select, insert, update on csr.initiative_project_user_group to csrimp;
grant select, insert, update on csr.initiative_user to csrimp;
grant select, insert, update on csr.initiative_user_msg to csrimp;
grant select, insert, update on csr.initiatives_options to csrimp;
grant select, insert, update on csr.user_msg to csrimp;
grant select, insert, update on csr.project_initiative_period_stat to csrimp;
grant select, insert, update on csr.default_initiative_user_state to csrimp;
grant select, insert, update on csr.issue_initiative to csrimp;
grant select, insert, update on csr.aggr_region to csrimp;
grant select, insert, update on csr.alert_batch_run to csrimp;
grant select, insert, update on csr.customer_flow_alert_class to csrimp;
grant select, insert, update on csr.project_doc_folder to csrimp;
grant select, insert, update on csr.project_tag_group to csrimp;
grant select, insert, update on csr.project_tag_filter to csrimp;

grant select on csr.initiative_metric_id_seq to csrimp;
grant select on csr.aggr_tag_group_id_seq to csrimp;
grant select on csr.flow_state_group_id_seq to csrimp;
grant select on csr.initiative_group_id_seq to csrimp;
grant select on csr.initiative_user_group_id_seq to csrimp;
grant select on csr.init_import_template_id_seq to csrimp;
grant select on csr.initiativ_period_status_id_seq to csrimp;
grant select on csr.initiative_comment_id_seq to csrimp;
grant select on csr.user_msg_id_seq to csrimp;
grant select on csr.issue_initiative_id_seq to csrimp;
grant select on csr.initiative_event_id_seq to csrimp;

-- ** Cross schema constraints ***

-- *** Views ***
-- Please paste the content of the view and add a comment referencing the path of the create_views file which will contain your view changes.

-- *** Data changes ***
-- RLS

-- Data

-- ** New package grants **

-- *** Conditional Packages ***

-- *** Packages ***
@../csrimp/imp_pkg
@../schema_pkg

@../csrimp/imp_body
@../schema_body

@update_tail
