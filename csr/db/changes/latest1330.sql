-- Please update version.sql too -- this keeps clean builds in sync
define version=1330

@update_header
begin
	for r in (select 1 from all_tab_columns where owner='CSR' and table_name='DELEGATION_PLUGIN' and column_name='HERLP_PKG') loop
		execute immediate 'alter table csr.delegation_plugin rename column herlp_pkg to helper_pkg';
	end loop;
end;
/

begin
	for r in (select 1 from all_tab_columns where owner='CSR' and table_name='IND_SELECTION_GROUP_MEMBER' and column_name='DESCRIPTION') loop
		execute immediate 'alter table csr.ind_selection_group_member drop column description';
	end loop;
end;
/

begin
	for r in (select 1 from all_tables where owner='CSR' and table_name='TAB_PORTLET_USER_STATE') loop
		execute immediate 'drop table csr.tab_portlet_user_state';
	end loop;
end;
/

declare
	v_done number;
begin
	select count(*)
	  into v_done
	  from all_tab_columns
	 where owner = 'CSR' and table_name = 'METER_READING_PERIOD' and column_name = 'APP_SID';
	if v_done = 0 then
		execute immediate 'alter table csr.meter_reading drop primary key cascade drop index';
		execute immediate 'alter table csr.meter_reading add constraint pk_meter_reading primary key (app_sid, meter_reading_id)';	
		execute immediate 'alter table csr.meter_reading_period drop primary key drop index';
		execute immediate 'alter table csr.meter_reading_period add app_sid number(10) default sys_context(''security'',''app'')';
		execute immediate 'update csr.meter_reading_period rp '||
			'   set rp.app_sid = (select app_sid from csr.meter_reading mr where rp.start_id = mr.meter_reading_id)';
		execute immediate 'alter table csr.meter_reading_period modify app_sid not null';
		execute immediate 'alter table csr.meter_reading_period add constraint pk_meter_reading_period '||
			'primary key (app_sid, start_id, end_id)';
		execute immediate 'alter table csr.meter_reading_period add constraint fk_mtr_read_prd_strt_mtr_rd '||
			'foreign key (app_sid, start_id) references csr.meter_reading(app_sid, meter_reading_id)';
		execute immediate 'alter table csr.meter_reading_period add constraint fk_mtr_read_prd_end_mtr_rd '||
			'foreign key (app_sid, end_id) references csr.meter_reading(app_sid, meter_reading_id)';
		execute immediate 'create index csr.ix_meter_reading_period_end on csr.meter_reading_period (app_sid, end_id)';
	end if;
end;
/
		  
CREATE TABLE CSRIMP.APPROVAL_DASHBOARD(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    APPROVAL_DASHBOARD_SID    NUMBER(10, 0)    NOT NULL,
    LABEL                     VARCHAR2(255)    NOT NULL,
    FLOW_SID                  NUMBER(10, 0),
    TPL_REPORT_SID            NUMBER(10, 0),
    IS_MULTI_REGION           NUMBER(1, 0)     NOT NULL,
    CONSTRAINT CHK_APPR_DASH_MULTI_REG CHECK (IS_MULTI_REGION IN (0,1)),
    CONSTRAINT PK_APPROVAL_DASHBOARD PRIMARY KEY (APPROVAL_DASHBOARD_SID),
    CONSTRAINT UK_FL_APPROVAL_DASHBOARD  UNIQUE (APPROVAL_DASHBOARD_SID, FLOW_SID),
    CONSTRAINT UK_TPL_APPROVAL_DASHBOARD  UNIQUE (APPROVAL_DASHBOARD_SID, TPL_REPORT_SID),
    CONSTRAINT FK_APPROVAL_DASHBOARD_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.APPROVAL_DASHBOARD_ALERT_TYPE(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    APPROVAL_DASHBOARD_SID    NUMBER(10, 0)    NOT NULL,
    CUSTOMER_ALERT_TYPE_ID    NUMBER(10, 0)    NOT NULL,
    FLOW_SID                  NUMBER(10, 0)    NOT NULL,
    CONSTRAINT PK_APPR_DASH_ALERT_TYPE PRIMARY KEY (APPROVAL_DASHBOARD_SID, CUSTOMER_ALERT_TYPE_ID, FLOW_SID),
    CONSTRAINT FK_APPR_DASH_AlRT_TYP_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.APPROVAL_DASHBOARD_INSTANCE(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    DASHBOARD_INSTANCE_ID     NUMBER(10, 0)    NOT NULL,
    APPROVAL_DASHBOARD_SID    NUMBER(10, 0)    NOT NULL,
    REGION_SID                NUMBER(10, 0)    NOT NULL,
    START_DTM                 DATE             NOT NULL,
    END_DTM                   DATE             NOT NULL,
    TPL_REPORT_SID            NUMBER(10, 0),
    CONSTRAINT PK_APPROVAL_DASHBOARD_INSTANCE PRIMARY KEY (DASHBOARD_INSTANCE_ID),
    CONSTRAINT UK_APPR_DASHBOARD_INSTANCE  UNIQUE (APPROVAL_DASHBOARD_SID, REGION_SID, START_DTM, END_DTM),
    CONSTRAINT UK_TPL_APPR_DASHBD_INSTANCE  UNIQUE (DASHBOARD_INSTANCE_ID, TPL_REPORT_SID),
    CONSTRAINT FK_APPR_DASH_INSTANCE_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.APPROVAL_DASHBOARD_REGION(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    APPROVAL_DASHBOARD_SID    NUMBER(10, 0)    NOT NULL,
    REGION_SID                NUMBER(10, 0)    NOT NULL,
    CONSTRAINT PK_APPROVAL_DASHBOARD_REGION PRIMARY KEY (APPROVAL_DASHBOARD_SID, REGION_SID),
    CONSTRAINT FK_APPR_DASH_REGION_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.APPROVAL_DASHBOARD_TAB(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    APPROVAL_DASHBOARD_SID    NUMBER(10, 0)    NOT NULL,
    TAB_ID                    NUMBER(10, 0)    NOT NULL,
    POS                       NUMBER(10, 0)    NOT NULL,
    CONSTRAINT PK_APPROVAL_DASHBOARD_TAB PRIMARY KEY (APPROVAL_DASHBOARD_SID, TAB_ID),
    CONSTRAINT FK_APPR_DASH_TAB_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.APPROVAL_DASHBOARD_TPL_TAG(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    DASHBOARD_INSTANCE_ID    NUMBER(10, 0)    NOT NULL,
    TPL_REPORT_SID           NUMBER(10, 0)    NOT NULL,
    TAG                      VARCHAR2(255)    NOT NULL,
    NOTE                     CLOB,
    CONSTRAINT PK_APPR_DASHBD_TPL_TAG PRIMARY KEY (DASHBOARD_INSTANCE_ID, TPL_REPORT_SID, TAG),
    CONSTRAINT FK_APPR_DASH_TPL_tAG_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.CUSTOMER_PORTLET(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    CUSTOMER_PORTLET_SID    NUMBER(10, 0)    NOT NULL,
    PORTLET_ID              NUMBER(10, 0),
    DEFAULT_STATE           CLOB,
    PORTAL_GROUP            VARCHAR2(50),
    CONSTRAINT PK_CUSTOMER_PORTLET PRIMARY KEY (CUSTOMER_PORTLET_SID),
    CONSTRAINT FK_CUSTOMER_PORTLET_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

alter table csrimp.cms_tab rename constraint pk_tab to pk_cms_tab;
alter index csrimp.pk_tab rename to pk_cms_tab;

CREATE TABLE CSRIMP.TAB(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    TAB_ID          NUMBER(10, 0)    NOT NULL,
    LAYOUT          NUMBER(10, 0)    NOT NULL,
    NAME            VARCHAR2(255)    NOT NULL,
    IS_SHARED       NUMBER(1, 0)     NOT NULL,
    PORTAL_GROUP    VARCHAR2(50),
    OVERRIDE_POS    NUMBER(10, 0),
    CONSTRAINT PK_TAB PRIMARY KEY (TAB_ID),
    CONSTRAINT FK_TAB_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.TAB_GROUP(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    TAB_ID       NUMBER(10, 0)    NOT NULL,
    GROUP_SID    NUMBER(10, 0)    NOT NULL,
    POS          NUMBER(10, 0),
    CONSTRAINT PK_TAB_GROUP PRIMARY KEY (TAB_ID, GROUP_SID),
    CONSTRAINT FK_TAB_GROUP_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.TAB_PORTLET(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    TAB_PORTLET_ID          NUMBER(10, 0)    NOT NULL,
    TAB_ID                  NUMBER(10, 0)    NOT NULL,
    COLUMN_NUM              NUMBER(10, 0)    NOT NULL,
    POS                     NUMBER(10, 0)    NOT NULL,
    STATE                   CLOB,
    CUSTOMER_PORTLET_SID    NUMBER(10, 0)    NOT NULL,
    CONSTRAINT PK_TAB_PORTLET PRIMARY KEY (TAB_PORTLET_ID),
    CONSTRAINT FK_TAB_PORTLET_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.TAB_PORTLET_RSS_FEED(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    TAB_PORTLET_ID    NUMBER(10, 0)     NOT NULL,
    RSS_URL           VARCHAR2(1024)    NOT NULL,
    CONSTRAINT PK_TAB_PORTLET_RSS_FEED PRIMARY KEY (TAB_PORTLET_ID, RSS_URL),
    CONSTRAINT FK_TAB_PORTLET_RSS_FEED_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.TAB_PORTLET_USER_REGION(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    TAB_PORTLET_ID    NUMBER(10, 0)    NOT NULL,
    CSR_USER_SID      NUMBER(10, 0)    NOT NULL,
    REGION_SID        NUMBER(10, 0)    NOT NULL,
    CONSTRAINT PK_TAB_PORTLET_USER_REGION PRIMARY KEY (TAB_PORTLET_ID, CSR_USER_SID, REGION_SID),
    CONSTRAINT FK_TAB_PRTLT_USR_REG_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.TAB_USER(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    TAB_ID       NUMBER(10, 0)    NOT NULL,
    USER_SID     NUMBER(10, 0)    NOT NULL,
    POS          NUMBER(10, 0)    NOT NULL,
    IS_OWNER     NUMBER(1, 0)     NOT NULL,
    IS_HIDDEN    NUMBER(1, 0)     NOT NULL,
    CONSTRAINT PK_TAB_USER PRIMARY KEY (TAB_ID, USER_SID),
    CONSTRAINT FK_TAB_USER_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.TPL_IMG(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    KEY          VARCHAR2(255)    NOT NULL,
    PATH         VARCHAR2(255),
    IMAGE        BLOB,
    FILENAME     VARCHAR2(255),
    MIME_TYPE    VARCHAR2(255),
    CONSTRAINT PK_TPL_IMG PRIMARY KEY (KEY),
    CONSTRAINT FK_TPL_IMG_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.TPL_REP_CUST_TAG_TYPE(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    TPL_REP_CUST_TAG_TYPE_ID    NUMBER(10, 0)    NOT NULL,
    CS_CLASS                    VARCHAR2(255)    NOT NULL,
    JS_INCLUDE                  VARCHAR2(255),
    JS_CLASS                    VARCHAR2(255)    NOT NULL,
    HELPER_PKG                  VARCHAR2(255),
    DESCRIPTION                 VARCHAR2(255)    NOT NULL,
    CONSTRAINT PK_TPL_REP_CUST_TAG_TYPE PRIMARY KEY (TPL_REP_CUST_TAG_TYPE_ID),
    CONSTRAINT FK_TPL_REP_CUST_TAG_TYP_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.TPL_REPORT(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    TPL_REPORT_SID    NUMBER(10, 0)     NOT NULL,
    NAME              VARCHAR2(256)     NOT NULL,
    DESCRIPTION       VARCHAR2(1024),
    WORD_DOC          BLOB              NOT NULL,
    FILENAME          VARCHAR2(256)     NOT NULL,
    THUMB_IMG         BLOB,
    INTERVAL          VARCHAR2(1)       NOT NULL,
    CONSTRAINT CHK_TPL_REPORT_INTERVAL CHECK (INTERVAL IN ('m','q','h','y')),
    CONSTRAINT PK_TPL_REPORT PRIMARY KEY (TPL_REPORT_SID),
    CONSTRAINT FK_TPL_REPORT_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.TPL_REPORT_TAG(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    TPL_REPORT_SID                    NUMBER(10, 0)    NOT NULL,
    TAG                               VARCHAR2(255)    NOT NULL,
    TAG_TYPE                          NUMBER(10, 0)    NOT NULL,
    TPL_REPORT_TAG_IND_ID             NUMBER(10, 0),
    TPL_REPORT_TAG_EVAL_ID            NUMBER(10, 0),
    TPL_REPORT_TAG_DATAVIEW_ID        NUMBER(10, 0),
    TPL_REPORT_TAG_LOGGING_FORM_ID    NUMBER(10, 0),
    TPL_REP_CUST_TAG_TYPE_ID          NUMBER(10, 0),
    TPL_REPORT_TAG_TEXT_ID            NUMBER(10, 0),
    CONSTRAINT CT_TPL_REPORT_TAG CHECK ((tag_type IN (1,4,5) AND tpl_report_tag_ind_id IS NOT NULL AND tpl_report_tag_eval_id IS NULL AND tpl_report_tag_dataview_id IS NULL AND tpl_report_tag_logging_form_id IS NULL AND tpl_rep_cust_tag_type_id IS NULL AND tpl_report_tag_text_id IS NULL)
OR (tag_type = 6 AND tpl_report_tag_eval_id IS NOT NULL AND tpl_report_tag_ind_id IS NULL AND tpl_report_tag_dataview_id IS NULL AND tpl_report_tag_logging_form_id IS NULL AND tpl_rep_cust_tag_type_id IS NULL AND tpl_report_tag_text_id IS NULL)
OR (tag_type IN (2,3) AND tpl_report_tag_dataview_id IS NOT NULL AND tpl_report_tag_ind_id IS NULL AND tpl_report_tag_eval_id IS NULL AND tpl_report_tag_logging_form_id IS NULL AND tpl_rep_cust_tag_type_id IS NULL AND tpl_report_tag_text_id IS NULL)
OR (tag_type = 7 AND tpl_report_tag_logging_form_id IS NOT NULL AND tpl_report_tag_ind_id IS NULL AND tpl_report_tag_dataview_id IS NULL AND tpl_report_tag_eval_id IS NULL AND tpl_rep_cust_tag_type_id IS NULL AND tpl_report_tag_text_id IS NULL)
OR (tag_type = 8 AND tpl_rep_cust_tag_type_id IS NOT NULL AND tpl_report_tag_logging_form_id IS NULL AND tpl_report_tag_ind_id IS NULL AND tpl_report_tag_dataview_id IS NULL AND tpl_report_tag_eval_id IS NULL AND tpl_report_tag_text_id IS NULL)
OR (tag_type = 9 AND tpl_report_tag_text_id IS NOT NULL AND tpl_rep_cust_tag_type_id IS NULL AND tpl_report_tag_logging_form_id IS NULL AND tpl_report_tag_ind_id IS NULL AND tpl_report_tag_dataview_id IS NULL AND tpl_report_tag_eval_id IS NULL)
OR (tag_type = -1 AND tpl_report_tag_text_id IS NULL AND tpl_rep_cust_tag_type_id IS NULL AND tpl_report_tag_logging_form_id IS NULL AND tpl_report_tag_ind_id IS NULL AND tpl_report_tag_dataview_id IS NULL AND tpl_report_tag_eval_id IS NULL)),
    CONSTRAINT PK_TPL_REPORT_TAG PRIMARY KEY (TPL_REPORT_SID, TAG),
    CONSTRAINT FK_TPL_REPORT_TAG_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.TPL_REPORT_TAG_DATAVIEW(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    TPL_REPORT_TAG_DATAVIEW_ID    NUMBER(10, 0)    NOT NULL,
    DATAVIEW_SID                  NUMBER(10, 0)    NOT NULL,
    MONTH_OFFSET                  NUMBER(10, 0)    NOT NULL,
    MONTH_DURATION                NUMBER(10, 0)    NOT NULL,
    CONSTRAINT PK_TPL_REPORT_TAG_DATAVIEW PRIMARY KEY (TPL_REPORT_TAG_DATAVIEW_ID),
    CONSTRAINT AK_TPL_RPT_TAG_DV  UNIQUE (TPL_REPORT_TAG_DATAVIEW_ID, DATAVIEW_SID),
    CONSTRAINT FK_TPL_REPORT_TAV_DV_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.TPL_REPORT_TAG_DV_REGION(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    TPL_REPORT_TAG_DATAVIEW_ID    NUMBER(10, 0)    NOT NULL,
    DATAVIEW_SID                  NUMBER(10, 0)    NOT NULL,
    REGION_SID                    NUMBER(10, 0)    NOT NULL,
    TPL_REGION_TYPE_ID            NUMBER(10, 0)    NOT NULL,
    CONSTRAINT PK_TPL_RPT_RAG_RV_REGION PRIMARY KEY (TPL_REPORT_TAG_DATAVIEW_ID, DATAVIEW_SID, REGION_SID),
    CONSTRAINT FK_TPL_REPORT_TAG_DV_REG_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.TPL_REPORT_TAG_EVAL(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    TPL_REPORT_TAG_EVAL_ID    NUMBER(10, 0)     NOT NULL,
    IF_TRUE                   VARCHAR2(2000)    NOT NULL,
    IF_FALSE                  VARCHAR2(2000)    NOT NULL,
    ALL_MUST_BE_TRUE          NUMBER(1, 0)      NOT NULL,
    MONTH_OFFSET              NUMBER(10, 0)     NOT NULL,
    CONSTRAINT PK_TPL_REPORT_TAG_EVAL PRIMARY KEY (TPL_REPORT_TAG_EVAL_ID),
    CONSTRAINT FK_TPL_REPORT_TAG_EVAL_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.TPL_REPORT_TAG_EVAL_COND(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    TPL_REPORT_TAG_EVAL_ID    NUMBER(10, 0)     NOT NULL,
    LEFT_IND_SID              NUMBER(10, 0)     NOT NULL,
    OPERATOR                  VARCHAR2(2)       NOT NULL,
    RIGHT_VALUE               NUMBER(24, 10),
    RIGHT_IND_SID             NUMBER(10, 0),
    CONSTRAINT CK_RPT_TG_EVL_COND_COMP_NN CHECK ((RIGHT_VALUE IS NOT NULL AND RIGHT_IND_SID IS NULL) OR (RIGHT_VALUE IS NULL AND RIGHT_IND_SID IS NOT NULL)),
    CONSTRAINT CK_RPT_TG_EVL_OP CHECK (OPERATOR IN ('>','<','<=','>=','=','!=')),
    CONSTRAINT FK_TPL_RPT_TAG_EVAL_COND_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.TPL_REPORT_TAG_IND(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    TPL_REPORT_TAG_IND_ID    NUMBER(10, 0)    NOT NULL,
    IND_SID                  NUMBER(10, 0)    NOT NULL,
    MONTH_OFFSET             NUMBER(10, 0)    NOT NULL,
    CONSTRAINT PK_TPL_RPT_TAG_IND PRIMARY KEY (TPL_REPORT_TAG_IND_ID),
    CONSTRAINT FK_TPL_RPT_TAG_IND_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.TPL_REPORT_TAG_LOGGING_FORM(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    TPL_REPORT_TAG_LOGGING_FORM_ID    NUMBER(10, 0)    NOT NULL,
    TAB_SID                           NUMBER(10, 0)    NOT NULL,
    MONTH_OFFSET                      NUMBER(10, 0)    NOT NULL,
    MONTH_DURATION                    NUMBER(10, 0)    NOT NULL,
    REGION_COLUMN_NAME                VARCHAR2(30),
    TPL_REGION_TYPE_ID                NUMBER(10, 0),
    DATE_COLUMN_NAME                  VARCHAR2(30),
    FORM_SID                          NUMBER(10, 0),
    FILTER_SID                        NUMBER(10, 0),
    CONSTRAINT CHK_TPL_REP_LGN_FORM_FILTER CHECK (form_sid IS NULL OR filter_sid IS NULL),
    CONSTRAINT PK_TPL_REP_TAG_LOGGING_FORM PRIMARY KEY (TPL_REPORT_TAG_LOGGING_FORM_ID),
    CONSTRAINT FK_TPL_RPT_TAG_LOG_FRM_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.TPL_REPORT_TAG_TEXT(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    TPL_REPORT_TAG_TEXT_ID    NUMBER(10, 0)     NOT NULL,
    LABEL                     VARCHAR2(2048)    NOT NULL,
    CONSTRAINT PK_TPL_REPORT_TAG_TEXT PRIMARY KEY (TPL_REPORT_TAG_TEXT_ID),
    CONSTRAINT FK_TPL_RPT_TAG_TEXT_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.TRASH(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    TRASH_SID              NUMBER(10, 0)    NOT NULL,
    TRASH_CAN_SID          NUMBER(10, 0)    NOT NULL,
    TRASHED_BY_SID         NUMBER(10, 0),
    TRASHED_DTM            DATE             NOT NULL,
    PREVIOUS_PARENT_SID    NUMBER(10, 0)    NOT NULL,
    DESCRIPTION            VARCHAR2(255)    NOT NULL,
    SO_NAME                VARCHAR2(255),
    CONSTRAINT PK_TRASH PRIMARY KEY (TRASH_SID),
    CONSTRAINT FK_TRASH_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.USER_SETTING_ENTRY(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    CSR_USER_SID      NUMBER(10, 0)     NOT NULL,
    CATEGORY          VARCHAR2(100)     NOT NULL,
    SETTING           VARCHAR2(100)     NOT NULL,
    TAB_PORTLET_ID    NUMBER(10, 0),
    VALUE             VARCHAR2(4000)    NOT NULL,
    CONSTRAINT UK_USER_SETTING_ENTRY  UNIQUE (CSR_USER_SID, CATEGORY, SETTING, TAB_PORTLET_ID),
    CONSTRAINT FK_USER_SETTING_ENTRY_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.AGGREGATE_IND_GROUP(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    AGGREGATE_IND_GROUP_ID    NUMBER(10, 0)    NOT NULL,
    HELPER_PROC               VARCHAR2(255)    NOT NULL,
    NAME                      VARCHAR2(64),
    CONSTRAINT PK_AGGREGATE_IND_GROUP PRIMARY KEY (AGGREGATE_IND_GROUP_ID),
    CONSTRAINT FK_AGGREGATE_IND_GROUP_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.AGGREGATE_IND_GROUP_MEMBER(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    AGGREGATE_IND_GROUP_ID    NUMBER(10, 0)    NOT NULL,
    IND_SID                   NUMBER(10, 0)    NOT NULL,
    CONSTRAINT PK_AGGREGATE_IND_GROUP_MEMBER PRIMARY KEY (AGGREGATE_IND_GROUP_ID, IND_SID),
    CONSTRAINT UC_AGG_IND_GRP_MBR_IND  UNIQUE (IND_SID),
    CONSTRAINT FK_AGGR_IND_GROUP_MEMBER_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.CALC_TAG_DEPENDENCY(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    CALC_IND_SID    NUMBER(10, 0)    NOT NULL,
    TAG_ID          NUMBER(10, 0)    NOT NULL,
    CONSTRAINT PK_CALC_TAG_DEP PRIMARY KEY (CALC_IND_SID),
    CONSTRAINT FK_TAG_DEPENDENCY_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.DASHBOARD(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    DASHBOARD_SID    NUMBER(10, 0)    NOT NULL,
    NAME             VARCHAR2(255)    NOT NULL,
    NOTE             CLOB,
    CONSTRAINT PK_DASHBOARD PRIMARY KEY (DASHBOARD_SID),
    CONSTRAINT FK_DASHBOARD_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.DASHBOARD_ITEM(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    DASHBOARD_ITEM_ID    NUMBER(10, 0)    NOT NULL,
    DASHBOARD_SID        NUMBER(10, 0)    NOT NULL,
    PARENT_SID           NUMBER(10, 0)    NOT NULL,
    PERIOD               CHAR(1)          NOT NULL,
    COMPARISON_TYPE      NUMBER(10, 0)    NOT NULL,
    IND_SID              NUMBER(10, 0)    NOT NULL,
    REGION_SID           NUMBER(10, 0)    NOT NULL,
    NAME                 VARCHAR2(255)    NOT NULL,
    POS                  NUMBER(10, 0)    NOT NULL,
    DATAVIEW_SID         NUMBER(10, 0)    NOT NULL,
    CONSTRAINT PK_DASHBOARD_ITEM PRIMARY KEY (DASHBOARD_ITEM_ID),
    CONSTRAINT FK_DASHBOARD_ITEM_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.DATAVIEW_SCENARIO_RUN(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    DATAVIEW_SID         NUMBER(10, 0)    NOT NULL,
    SCENARIO_RUN_TYPE    NUMBER(10, 0)    NOT NULL,
    SCENARIO_RUN_SID     NUMBER(10, 0),
    CONSTRAINT CK_SCENARIO_RUN_SID CHECK (( scenario_run_type = 2 and scenario_run_sid is not null ) or
( scenario_run_type in (0,1) and scenario_run_sid is null )),
    CONSTRAINT UK_DATAVIEW_SCENARIO_RUN  UNIQUE (DATAVIEW_SID, SCENARIO_RUN_TYPE, SCENARIO_RUN_SID),
    CONSTRAINT FK_DATAVIEW_SCENARIO_RUN_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.DATAVIEW_ZONE(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    DATAVIEW_ZONE_ID        NUMBER(10, 0)    NOT NULL,
    NAME                    VARCHAR2(255)    NOT NULL,
    DATAVIEW_SID            NUMBER(10, 0),
    START_VAL_IND_SID       NUMBER(10, 0)    NOT NULL,
    START_VAL_REGION_SID    NUMBER(10, 0)    NOT NULL,
    START_VAL_START_DTM     DATE             NOT NULL,
    START_VAL_END_DTM       DATE             NOT NULL,
    END_VAL_IND_SID         NUMBER(10, 0),
    END_VAL_REGION_SID      NUMBER(10, 0),
    END_VAL_START_DTM       DATE,
    END_VAL_END_DTM         DATE,
    STYLE_XML               CLOB             NOT NULL,
    CONSTRAINT PK_DATAVIEW_ZONE PRIMARY KEY (DATAVIEW_ZONE_ID),
    CONSTRAINT FK_DATAVIEW_ZONE_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.DELEG_META_ROLE_IND_SELECTION(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    DELEGATION_SID    NUMBER(10, 0)     NOT NULL,
    IND_SID           NUMBER(10, 0)     NOT NULL,
    LANG              VARCHAR2(10)      NOT NULL,
    DESCRIPTION       VARCHAR2(500)     NOT NULL,
    CONSTRAINT PK_DELEG_META_ROLE_IND_SEL PRIMARY KEY (DELEGATION_SID, IND_SID),
    CONSTRAINT FK_DLG_META_ROLE_IND_SEL_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.DELEG_PLAN_SURVEY_REGION(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    DELEG_PLAN_COL_SURVEY_ID    NUMBER(10, 0)    NOT NULL,
    REGION_SID                  NUMBER(10, 0)    NOT NULL,
    HAS_MANUAL_AMENDS           NUMBER(1, 0)     NOT NULL,
    PENDING_DELETION            NUMBER(1, 0)     NOT NULL,
    REGION_SELECTION            VARCHAR2(2)      NOT NULL,
    TAG_ID                      NUMBER(10, 0),
    CONSTRAINT CHK_DELEG_PLAN_SR_PENDING_DEL CHECK (PENDING_DELETION IN (0,1,2)),
    CONSTRAINT CHK_DELEG_PLAN_SR_AMENDS CHECK (HAS_MANUAL_AMENDS IN (0,1)),
    CONSTRAINT CHK_DLG_PLN_SRV_RGN_RS CHECK (REGION_SELECTION IN ('R','L','P','RT','LT','PT')),
    CONSTRAINT PK_DELEG_PLAN_SURVEY_REGION PRIMARY KEY (DELEG_PLAN_COL_SURVEY_ID, REGION_SID),
    CONSTRAINT FK_DLG_PLN_SURVEY_REG_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.DELEGATION_COMMENT(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    DELEGATION_SID    NUMBER(10, 0)    NOT NULL,
    START_DTM         DATE             NOT NULL,
    END_DTM           DATE             NOT NULL,
    POSTIT_ID         NUMBER(10, 0)    NOT NULL,
    CONSTRAINT PK_DELEGATION_COMMENT PRIMARY KEY (POSTIT_ID),
    CONSTRAINT FK_DELEG_COMMENT_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.DELEGATION_PLUGIN(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    IND_SID          NUMBER(10, 0)     NOT NULL,
    NAME             VARCHAR2(255)     NOT NULL,
    JS_CLASS_TYPE    VARCHAR2(1000)    NOT NULL,
    JS_INCLUDE       VARCHAR2(1000),
    HELPER_PKG        VARCHAR2(255),
    CONSTRAINT DELEGATION_PLUGIN_PK PRIMARY KEY (IND_SID),
    CONSTRAINT FK_DELEGATION_PLUGIN_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.DELEGATION_TAG(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    DELEGATION_SID    NUMBER(10, 0)    NOT NULL,
    TAG_ID            NUMBER(10, 0)    NOT NULL,
    CONSTRAINT PK718 PRIMARY KEY (DELEGATION_SID, TAG_ID),
    CONSTRAINT FK_DELEGATION_TAG_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.DELEGATION_USER_COVER(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    USER_COVER_ID             NUMBER(10, 0)    NOT NULL,
    USER_GIVING_COVER_SID     NUMBER(10, 0)    NOT NULL,
    USER_BEING_COVERED_SID    NUMBER(10, 0)    NOT NULL,
    DELEGATION_SID            NUMBER(10, 0)    NOT NULL,
    CONSTRAINT PK1259 PRIMARY KEY (USER_COVER_ID, USER_GIVING_COVER_SID, USER_BEING_COVERED_SID, DELEGATION_SID),
    CONSTRAINT FK_DELEGATION_USER_COVER_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.DIARY_EVENT(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    DIARY_EVENT_SID    NUMBER(10, 0)    NOT NULL,
    DESCRIPTION        VARCHAR2(255)    NOT NULL,
    NOTES              CLOB,
    DTM                DATE             NOT NULL,
    CREATED_DTM        DATE             NOT NULL,
    CREATED_BY_SID     NUMBER(10, 0)    NOT NULL,
    CONSTRAINT PK_DIARY_EVENT PRIMARY KEY (DIARY_EVENT_SID),
    CONSTRAINT FK_DIARY_EVENT_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.DIARY_EVENT_GROUP(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    DIARY_EVENT_SID    NUMBER(10, 0)    NOT NULL,
    GROUP_SID          NUMBER(10, 0)    NOT NULL,
    CONSTRAINT PK_DIARY_EVENT_GROUP PRIMARY KEY (DIARY_EVENT_SID, GROUP_SID),
    CONSTRAINT FK_DIARY_EVENT_GROUP_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.DOC(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    DOC_ID     NUMBER(10, 0)    NOT NULL,
    CONSTRAINT PK_DOC PRIMARY KEY (DOC_ID),
    CONSTRAINT FK_DOC_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.DOC_CURRENT(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    DOC_ID             NUMBER(10, 0)    NOT NULL,
    VERSION            NUMBER(10, 0),
    PARENT_SID         NUMBER(10, 0)    NOT NULL,
    LOCKED_BY_SID      NUMBER(10, 0),
    PENDING_VERSION    NUMBER(10, 0),
    CONSTRAINT PK_DOC_CURRENT PRIMARY KEY (DOC_ID),
    CONSTRAINT FK_DOC_CURRENT_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.DOC_DATA(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    DOC_DATA_ID    NUMBER(10, 0)    NOT NULL,
    DATA           BLOB             NOT NULL,
    SHA1           RAW(20)          NOT NULL,
    MIME_TYPE      VARCHAR2(100)    NOT NULL,
    CONSTRAINT PK_DOC_DATA PRIMARY KEY (DOC_DATA_ID),
    CONSTRAINT FK_DOC_DATA_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.DOC_DOWNLOAD(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    DOC_ID               NUMBER(10, 0)    NOT NULL,
    VERSION              NUMBER(10, 0)    NOT NULL,
    DOWNLOADED_DTM       DATE             NOT NULL,
    DOWNLOADED_BY_SID    NUMBER(10, 0)    NOT NULL,
    CONSTRAINT FK_DOC_DOWNLOAD_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.DOC_FOLDER(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    DOC_FOLDER_SID          NUMBER(10, 0)    NOT NULL,
    DESCRIPTION             CLOB             NOT NULL,
    LIFESPAN_IS_OVERRIDE    NUMBER(1, 0)     NOT NULL,
    LIFESPAN                NUMBER(10, 0),
    APPROVER_IS_OVERRIDE    NUMBER(1, 0)     NOT NULL,
    APPROVER_SID            NUMBER(10, 0),
    CONSTRAINT PK_DOC_FOLDER PRIMARY KEY (DOC_FOLDER_SID),
    CONSTRAINT FK_DOC_FOLDER_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.DOC_FOLDER_SUBSCRIPTION(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    DOC_FOLDER_SID    NUMBER(10, 0)    NOT NULL,
    NOTIFY_SID        NUMBER(10, 0)    NOT NULL,
    CONSTRAINT PK_DOC_FOLDER_SUB PRIMARY KEY (DOC_FOLDER_SID, NOTIFY_SID),
    CONSTRAINT FK_DOC_FOLDER_SUB_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.DOC_LIBRARY(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    DOC_LIBRARY_SID     NUMBER(10, 0)    NOT NULL,
    DOCUMENTS_SID       NUMBER(10, 0)    NOT NULL,
    TRASH_FOLDER_SID    NUMBER(10, 0)    NOT NULL,
    CONSTRAINT PK_DOC_LIBRARY PRIMARY KEY (DOC_LIBRARY_SID),
    CONSTRAINT FK_DOC_LIBRARY_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.DOC_NOTIFICATION(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    DOC_NOTIFICATION_ID    NUMBER(10, 0)    NOT NULL,
    DOC_ID                 NUMBER(10, 0)    NOT NULL,
    VERSION                NUMBER(10, 0)    NOT NULL,
    NOTIFY_SID             NUMBER(10, 0)    NOT NULL,
    SENT_DTM               DATE,
    REASON                 VARCHAR2(32)     NOT NULL,
    CHECK (REASON IN ('NEW_VERSION','DELETED','RESTORED','FOR_APPROVAL')),
    CONSTRAINT PK_DOC_NOTIFICATION PRIMARY KEY (DOC_NOTIFICATION_ID),
    CONSTRAINT FK_DOC_NOTIFICATION_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.DOC_SUBSCRIPTION(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    DOC_ID        NUMBER(10, 0)    NOT NULL,
    NOTIFY_SID    NUMBER(10, 0)    NOT NULL,
    CONSTRAINT PK_DOC_SUBSCRIPTION PRIMARY KEY (DOC_ID, NOTIFY_SID),
    CONSTRAINT FK_DOC_SUBSCRIPTION_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.DOC_VERSION(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    DOC_ID                NUMBER(10, 0)    NOT NULL,
    VERSION               NUMBER(10, 0)    NOT NULL,
    FILENAME              VARCHAR2(200)    NOT NULL,
    DESCRIPTION           CLOB             NOT NULL,
    CHANGE_DESCRIPTION    CLOB             NOT NULL,
    CHANGED_BY_SID        NUMBER(10, 0)    NOT NULL,
    CHANGED_DTM           TIMESTAMP(6)     NOT NULL,
    DOC_DATA_ID           NUMBER(10, 0)    NOT NULL,
    CONSTRAINT PK_DOC_VERSION PRIMARY KEY (DOC_ID, VERSION),
    CONSTRAINT FK_DOC_VERSION_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.EXCEL_EXPORT_OPTIONS(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    DATAVIEW_SID                   NUMBER(10, 0)    NOT NULL,
    IND_SHOW_SID                   NUMBER(1, 0)     NOT NULL,
    IND_SHOW_INFO                  NUMBER(1, 0)     NOT NULL,
    IND_SHOW_TAGS                  NUMBER(1, 0)     NOT NULL,
    IND_SHOW_GAS_FACTOR            NUMBER(1, 0)     NOT NULL,
    REGION_SHOW_SID                NUMBER(1, 0)     NOT NULL,
    REGION_SHOW_INACTIVE           NUMBER(1, 0)     NOT NULL,
    REGION_SHOW_INFO               NUMBER(1, 0)     NOT NULL,
    REGION_SHOW_TAGS               NUMBER(1, 0)     NOT NULL,
    REGION_SHOW_TYPE               NUMBER(1, 0)     NOT NULL,
    REGION_SHOW_REF                NUMBER(1, 0)     NOT NULL,
    REGION_SHOW_ACQUISITION_DTM    NUMBER(1, 0)     NOT NULL,
    REGION_SHOW_DISPOSAL_DTM       NUMBER(1, 0)     NOT NULL,
    REGION_SHOW_ROLES              NUMBER(1, 0)     NOT NULL,
    REGION_SHOW_EGRID              NUMBER(1, 0)     NOT NULL,
    REGION_SHOW_GEO_COUNTRY        NUMBER(1, 0)     NOT NULL,
    METER_SHOW_REF                 NUMBER(1, 0)     NOT NULL,
    METER_SHOW_LOCATION            NUMBER(1, 0)     NOT NULL,
    METER_SHOW_SOURCE_TYPE         NUMBER(1, 0)     NOT NULL,
    METER_SHOW_NOTE                NUMBER(1, 0)     NOT NULL,
    METER_SHOW_CRC                 NUMBER(1, 0)     NOT NULL,
    METER_SHOW_IND                 NUMBER(1, 0)     NOT NULL,
    METER_SHOW_MEASURE             NUMBER(1, 0)     NOT NULL,
    METER_SHOW_COST_IND            NUMBER(1, 0)     NOT NULL,
    METER_SHOW_COST_MEASURE        NUMBER(1, 0)     NOT NULL,
    METER_SHOW_DAYS_IND            NUMBER(1, 0)     NOT NULL,
    METER_SHOW_SUPPLIER            NUMBER(1, 0)     NOT NULL,
    METER_SHOW_CONTRACT            NUMBER(1, 0)     NOT NULL,
    SCENARIO_POS                   VARCHAR2(10)     NOT NULL,
    CHECK (IND_SHOW_SID IN (0,1)),
    CHECK (IND_SHOW_INFO IN (0,1)),
    CHECK (IND_SHOW_TAGS IN (0,1)),
    CHECK (REGION_SHOW_SID IN (0,1)),
    CHECK (REGION_SHOW_INACTIVE IN (0,1)),
    CHECK (REGION_SHOW_INFO IN (0,1)),
    CHECK (REGION_SHOW_TAGS IN (0,1)),
    CHECK (REGION_SHOW_TYPE IN (0,1)),
    CHECK (REGION_SHOW_REF IN (0,1)),
    CHECK (REGION_SHOW_ACQUISITION_DTM IN (0,1)),
    CHECK (REGION_SHOW_DISPOSAL_DTM IN (0,1)),
    CHECK (REGION_SHOW_ROLES IN (0,1)),
    CHECK (METER_SHOW_REF IN (0,1)),
    CHECK (METER_SHOW_LOCATION IN (0,1)),
    CHECK (METER_SHOW_SOURCE_TYPE IN (0,1)),
    CHECK (METER_SHOW_NOTE IN (0,1)),
    CHECK (METER_SHOW_CRC IN (0,1)),
    CHECK (METER_SHOW_IND IN (0,1)),
    CHECK (METER_SHOW_MEASURE IN (0,1)),
    CHECK (METER_SHOW_SUPPLIER IN (0,1)),
    CHECK (METER_SHOW_CONTRACT IN (0,1)),
    CONSTRAINT CHK_EE_M_SHOW_COST_IND CHECK (METER_SHOW_COST_IND IN (0,1)),
    CONSTRAINT CHK_EE_M_SHOW_COST_MEASURE CHECK (METER_SHOW_COST_MEASURE IN (0,1)),
    CONSTRAINT CHK_EE_M_SHOW_DAYS_IND CHECK (METER_SHOW_DAYS_IND IN (0,1)),
    CONSTRAINT CK_EXCEL_EXPORT_OPTS_SCN_POS CHECK (scenario_pos in ('Column','Sheet')),
    CONSTRAINT PK766 PRIMARY KEY (DATAVIEW_SID),
    CONSTRAINT FK_EXCEL_EXPORT_OPTIONS_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.FACTOR_HISTORY(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    FACTOR_ID      NUMBER(10, 0)     NOT NULL,
    CHANGED_DTM    NUMBER(10, 0)     NOT NULL,
    USER_SID       NUMBER(10, 0)     NOT NULL,
    OLD_VALUE      NUMBER(24, 10)    NOT NULL,
    NOTE           CLOB              NOT NULL,
    CONSTRAINT FK_FACTOR_HISTORY_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.IMP_VOCAB(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    CSR_USER_SID       NUMBER(10, 0)     NOT NULL,
    IMP_TAG_TYPE_ID    NUMBER(10, 0)     NOT NULL,
    PHRASE             VARCHAR2(4000)    NOT NULL,
    FREQUENCY          NUMBER(10, 0)     NOT NULL,
    CONSTRAINT PK_IMP_VOCAB PRIMARY KEY (CSR_USER_SID, IMP_TAG_TYPE_ID, PHRASE),
    CONSTRAINT FK_IMP_VOCAB_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.IND_SEL_GROUP_MEMBER_DESC(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    IND_SID        NUMBER(10, 0)    NOT NULL,
    LANG           VARCHAR2(10)     NOT NULL,
    DESCRIPTION    VARCHAR2(500)    NOT NULL,
    CONSTRAINT PK_IND_SEL_GROUP_MEMBER_DESC PRIMARY KEY (IND_SID, LANG),
    CONSTRAINT FK_IND_SEL_GRP_MEM_DESC_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.IND_SELECTION_GROUP(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    MASTER_IND_SID    NUMBER(10, 0)    NOT NULL,
    CONSTRAINT PK_IND_SELECTION_GROUP PRIMARY KEY (MASTER_IND_SID),
    CONSTRAINT FK_IND_SEL_GROUP_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.IND_SELECTION_GROUP_MEMBER(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    MASTER_IND_SID    NUMBER(10, 0)    NOT NULL,
    IND_SID           NUMBER(10, 0)    NOT NULL,
    POS               NUMBER(10, 0)    NOT NULL,
    DESCRIPTION       VARCHAR2(500),
    CONSTRAINT PK_IND_SELECTION_GROUP_MEMBER PRIMARY KEY (MASTER_IND_SID, IND_SID),
    CONSTRAINT UK_IND_SELECTION_GROUP_IND  UNIQUE (IND_SID),
    CONSTRAINT FK_IND_SEL_GROUP_MEMBER_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.INTERNAL_AUDIT(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    INTERNAL_AUDIT_SID        NUMBER(10, 0)    NOT NULL,
    INTERNAL_AUDIT_TYPE_ID    NUMBER(10, 0)    NOT NULL,
    SURVEY_SID                NUMBER(10, 0),
    REGION_SID                NUMBER(10, 0)    NOT NULL,
    LABEL                     VARCHAR2(255)    NOT NULL,
    AUDIT_DTM                 DATE             NOT NULL,
    CREATED_BY_USER_SID       NUMBER(10, 0)    NOT NULL,
    CREATED_DTM               DATE             NOT NULL,
    AUDITOR_USER_SID          NUMBER(10, 0)    NOT NULL,
    NOTES                     CLOB,
    AUDIT_CONTACT_USER_SID    NUMBER(10, 0),
    SURVEY_RESPONSE_ID        NUMBER(10, 0),
    AUDITOR_NAME              VARCHAR2(50),
    AUDITOR_ORGANISATION      VARCHAR2(50),
    CONSTRAINT PK661 PRIMARY KEY (INTERNAL_AUDIT_SID),
    CONSTRAINT FK_INTERNAL_AUDIT_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.INTERNAL_AUDIT_POSTIT(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    INTERNAL_AUDIT_SID    NUMBER(10, 0)    NOT NULL,
    POSTIT_ID             NUMBER(10, 0)    NOT NULL,
    CONSTRAINT PK_INTERNAL_AUDIT_POSTIT PRIMARY KEY (INTERNAL_AUDIT_SID, POSTIT_ID),
    CONSTRAINT FK_INTERNAL_AUDIT_POSTIT_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.INTERNAL_AUDIT_TYPE(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    INTERNAL_AUDIT_TYPE_ID    NUMBER(10, 0)    NOT NULL,
    LABEL                     VARCHAR2(255)    NOT NULL,
    EVERY_N_MONTHS            NUMBER(10, 0),
    AUDITOR_ROLE_SID          NUMBER(10, 0),
    AUDIT_CONTACT_ROLE_SID    NUMBER(10, 0),
    DEFAULT_SURVEY_SID        NUMBER(10, 0),
    WORD_DOC                  BLOB,
    FILENAME                  VARCHAR2(255),
    LOOKUP_KEY                VARCHAR2(30),
    DEFAULT_AUDITOR_ORG       VARCHAR2(50),
    CONSTRAINT PK_INTERNAL_AUDIT_TYPE_ID PRIMARY KEY (INTERNAL_AUDIT_TYPE_ID),
    CONSTRAINT FK_INTERNAL_AUDIT_tYPE_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.LAST_USED_MEASURE_CONVERSION(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    CSR_USER_SID             NUMBER(10, 0)    NOT NULL,
    MEASURE_SID              NUMBER(10, 0)    NOT NULL,
    MEASURE_CONVERSION_ID    NUMBER(10, 0),
    CONSTRAINT PK_LAST_USED_MEASURE_CONV PRIMARY KEY (CSR_USER_SID, MEASURE_SID),
    CONSTRAINT FK_LAST_USED_MEAS_CONV_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.MODEL(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    REVISION               NUMBER(10, 0)     NOT NULL,
    MODEL_SID              NUMBER(10, 0)     NOT NULL,
    NAME                   VARCHAR2(255)     NOT NULL,
    DESCRIPTION            VARCHAR2(4000),
    EXCEL_DOC              BLOB,
    FILE_NAME              VARCHAR2(255),
    THUMB_IMG              BLOB,
    CREATED_DTM            DATE              NOT NULL,
    TEMP_ONLY_BOO          NUMBER(1, 0),
    LOAD_STATE             VARCHAR2(1)       NOT NULL,
    DATA_SOURCE_OPTIONS    VARCHAR2(255),
    CONSTRAINT CK_LOAD_STATE CHECK (LOAD_STATE IN ('N','L','U')),
    CONSTRAINT PK_MODEL PRIMARY KEY (MODEL_SID),
    CONSTRAINT FK_MODEL_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.MODEL_INSTANCE(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    MODEL_INSTANCE_SID    NUMBER(10, 0)     NOT NULL,
    BASE_MODEL_SID        NUMBER(10, 0)     NOT NULL,
    START_DTM             DATE              NOT NULL,
    END_DTM               DATE              NOT NULL,
    OWNER_SID             NUMBER(10, 0)     NOT NULL,
    CREATED_DTM           DATE              NOT NULL,
    EXCEL_DOC             BLOB,
    DESCRIPTION           VARCHAR2(1000),
    RUN_STATE             VARCHAR2(1)       NOT NULL,
    CONSTRAINT CHK_MI_RUN_STATE CHECK (RUN_STATE IN ('N','W','R')),
    CONSTRAINT PK_MODEL_INSTANCE PRIMARY KEY (MODEL_INSTANCE_SID, BASE_MODEL_SID),
    CONSTRAINT FK_MODEL_INSTANCE_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.MODEL_INSTANCE_CHART(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    MODEL_INSTANCE_SID    NUMBER(10, 0)     NOT NULL,
    BASE_MODEL_SID        NUMBER(10, 0)     NOT NULL,
    SHEET_ID              NUMBER(10, 0)     NOT NULL,
    CHART_INDEX           NUMBER(10, 0)     NOT NULL,
    TOP                   NUMBER(10, 0)     NOT NULL,
    LEFT                  NUMBER(10, 0)     NOT NULL,
    WIDTH                 NUMBER(10, 0)     NOT NULL,
    HEIGHT                NUMBER(10, 0)     NOT NULL,
    SOURCE_DATA           VARCHAR2(4000),
    CONSTRAINT PK_MODEL_INSTANCE_CHART PRIMARY KEY (MODEL_INSTANCE_SID, BASE_MODEL_SID, SHEET_ID, CHART_INDEX),
    CONSTRAINT FK_MODEL_INSTANCE_CHART_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.MODEL_INSTANCE_MAP(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    MODEL_INSTANCE_SID      NUMBER(10, 0)     NOT NULL,
    BASE_MODEL_SID          NUMBER(10, 0)     NOT NULL,
    SHEET_ID                NUMBER(10, 0)     NOT NULL,
    CELL_NAME               VARCHAR2(20)      NOT NULL,
    SOURCE_CELL_NAME        VARCHAR2(20)      NOT NULL,
    CELL_VALUE              VARCHAR2(4000),
    MAP_TO_INDICATOR_SID    NUMBER(10, 0),
    MAP_TO_REGION_SID       NUMBER(10, 0),
    PERIOD_YEAR_OFFSET      NUMBER(10, 0)     NOT NULL,
    PERIOD_OFFSET           NUMBER(10, 0)     NOT NULL,
    CONSTRAINT PK_MODEL_INSTANCE_MAP PRIMARY KEY (MODEL_INSTANCE_SID, BASE_MODEL_SID, SHEET_ID, CELL_NAME),
    CONSTRAINT FK_MODEL_INSTANCE_MAP_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.MODEL_INSTANCE_REGION(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    MODEL_INSTANCE_SID    NUMBER(10, 0)    NOT NULL,
    REGION_SID            NUMBER(10, 0)    NOT NULL,
    POS                   NUMBER(10, 0)    NOT NULL,
    BASE_MODEL_SID        NUMBER(10, 0)    NOT NULL,
    CONSTRAINT PK_MODEL_INSTANCE_REGION PRIMARY KEY (MODEL_INSTANCE_SID, REGION_SID, BASE_MODEL_SID),
    CONSTRAINT FK_MODEL_INSTANCE_REGION_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.MODEL_INSTANCE_SHEET(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    MODEL_INSTANCE_SID    NUMBER(10, 0)    NOT NULL,
    BASE_MODEL_SID        NUMBER(10, 0)    NOT NULL,
    SHEET_ID              NUMBER(10, 0)    NOT NULL,
    STRUCTURE             SYS.XMLType,
    CONSTRAINT PK_MODEL_INSTANCE_SHEET PRIMARY KEY (MODEL_INSTANCE_SID, BASE_MODEL_SID, SHEET_ID),
    CONSTRAINT FK_MODEL_INSTANCE_SHEET_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.MODEL_MAP(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    MODEL_SID               NUMBER(10, 0)    NOT NULL,
    SHEET_ID                NUMBER(10, 0)    NOT NULL,
    CELL_NAME               VARCHAR2(20)     NOT NULL,
    MODEL_MAP_TYPE_ID       NUMBER(10, 0)    NOT NULL,
    MAP_TO_INDICATOR_SID    NUMBER(10, 0),
    CELL_COMMENT            CLOB,
    EXCEL_NAME              VARCHAR2(255),
    IS_TEMP                 NUMBER(1, 0)     NOT NULL,
    REGION_TYPE_OFFSET      NUMBER(10, 0),
    REGION_OFFSET_TAG_ID    NUMBER(10, 0),
    PERIOD_YEAR_OFFSET      NUMBER(10, 0)    NOT NULL,
    PERIOD_OFFSET           NUMBER(10, 0)    NOT NULL,
    CONSTRAINT PK_MODEL_MAP PRIMARY KEY (MODEL_SID, SHEET_ID, CELL_NAME),
    CONSTRAINT FK_MODEL_MAP_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.MODEL_RANGE(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    MODEL_SID    NUMBER(10, 0)    NOT NULL,
    RANGE_ID     NUMBER(10, 0)    NOT NULL,
    SHEET_ID     NUMBER(10, 0)    NOT NULL,
    CONSTRAINT PK_MODEL_RANGE PRIMARY KEY (MODEL_SID, RANGE_ID),
    CONSTRAINT UK_MODEL_RANGE  UNIQUE (RANGE_ID),
    CONSTRAINT FK_MODEL_RANGE_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.MODEL_RANGE_CELL(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    MODEL_SID    NUMBER(10, 0)    NOT NULL,
    RANGE_ID     NUMBER(10, 0)    NOT NULL,
    CELL_NAME    VARCHAR2(20)     NOT NULL,
    CONSTRAINT PK_MODEL_RANGE_CELL PRIMARY KEY (MODEL_SID, RANGE_ID, CELL_NAME),
    CONSTRAINT FK_MODEL_RANGE_CELL_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.MODEL_REGION_RANGE(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    MODEL_SID           NUMBER(10, 0)    NOT NULL,
    RANGE_ID            NUMBER(10, 0)    NOT NULL,
    REGION_REPEAT_ID    NUMBER(10, 0)    NOT NULL,
    CONSTRAINT CK_MRR_RRI CHECK (REGION_REPEAT_ID >= 1 AND REGION_REPEAT_ID <= 4),
    CONSTRAINT PK_MODEL_REGION_RANGE PRIMARY KEY (MODEL_SID, RANGE_ID),
    CONSTRAINT FK_MODEL_REGION_RANGE_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.MODEL_SHEET(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    MODEL_SID             NUMBER(10, 0)    NOT NULL,
    SHEET_NAME            VARCHAR2(255)    NOT NULL,
    USER_EDITABLE_BOO     NUMBER(1, 0),
    SHEET_INDEX           NUMBER(10, 0)    NOT NULL,
    DISPLAY_CHARTS_BOO    NUMBER(1, 0)     NOT NULL,
    CHART_COUNT           NUMBER(10, 0)    NOT NULL,
    SHEET_ID              NUMBER(10, 0)    NOT NULL,
    STRUCTURE             SYS.XMLType,
    CONSTRAINT PK_MODEL_SHEET PRIMARY KEY (MODEL_SID, SHEET_ID),
    CONSTRAINT FK_MODEL_SHEET_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.MODEL_VALIDATION(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    MODEL_SID          NUMBER(10, 0)    NOT NULL,
    CELL_NAME          VARCHAR2(20)     NOT NULL,
    DISPLAY_SEQ        NUMBER(10, 0)    NOT NULL,
    VALIDATION_TEXT    VARCHAR2(50),
    SHEET_ID           NUMBER(10, 0)    NOT NULL,
    CONSTRAINT PK565 PRIMARY KEY (MODEL_SID, CELL_NAME, DISPLAY_SEQ, SHEET_ID),
    CONSTRAINT FK_MODEL_VALIDATION_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.NON_COMPLIANCE(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    NON_COMPLIANCE_ID      NUMBER(10, 0)    NOT NULL,
    INTERNAL_AUDIT_SID     NUMBER(10, 0)    NOT NULL,
    LABEL                  VARCHAR2(255)    NOT NULL,
    DETAIL                 CLOB,
    CREATED_DTM            DATE             NOT NULL,
    CREATED_BY_USER_SID    NUMBER(10, 0)    NOT NULL,
    CONSTRAINT PK662 PRIMARY KEY (NON_COMPLIANCE_ID),
    CONSTRAINT FK_NON_COMPLIANCE_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.NON_COMPLIANCE_EXPR_ACTION(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    NON_COMPLIANCE_ID              NUMBER(10, 0)    NOT NULL,
    QS_EXPR_NON_COMPL_ACTION_ID    NUMBER(10, 0)    NOT NULL,
    SURVEY_RESPONSE_ID             NUMBER(10, 0)    NOT NULL,
    CONSTRAINT PK_NON_COMPL_EXPR_ACTION PRIMARY KEY (QS_EXPR_NON_COMPL_ACTION_ID, SURVEY_RESPONSE_ID),
    CONSTRAINT FK_NON_COMPL_EXPR_ACT_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.NON_COMPLIANCE_FILE_UPLOAD(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    NON_COMPLIANCE_ID    NUMBER(10, 0)    NOT NULL,
    FILE_UPLOAD_SID      NUMBER(10, 0)    NOT NULL,
    CONSTRAINT PK664 PRIMARY KEY (NON_COMPLIANCE_ID, FILE_UPLOAD_SID),
    CONSTRAINT FK_NON_COMPL_FILE_UPL_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.NON_COMPLIANCE_TAG(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    TAG_ID               NUMBER(10, 0)    NOT NULL,
    NON_COMPLIANCE_ID    NUMBER(10, 0)    NOT NULL,
    CONSTRAINT PK_NON_COMPLIANCE_TAG PRIMARY KEY (TAG_ID, NON_COMPLIANCE_ID),
    CONSTRAINT FK_NON_COMPLIANCE_TAG_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.POSTIT(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    LABEL              VARCHAR2(1024),
    POSTIT_ID          NUMBER(10, 0)     NOT NULL,
    MESSAGE            CLOB,
    CREATED_DTM        DATE              NOT NULL,
    CREATED_BY_SID     NUMBER(10, 0)     NOT NULL,
    SECURED_VIA_SID    NUMBER(10, 0)     NOT NULL,
    CONSTRAINT PK_POSTIT PRIMARY KEY (POSTIT_ID),
    CONSTRAINT FK_POSTIT_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.POSTIT_FILE(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    POSTIT_FILE_ID    NUMBER(10, 0)    NOT NULL,
    POSTIT_ID         NUMBER(10, 0)    NOT NULL,
    FILENAME          VARCHAR2(255)    NOT NULL,
    MIME_TYPE         VARCHAR2(256)    NOT NULL,
    DATA              BLOB             NOT NULL,
    SHA1              RAW(20)          NOT NULL,
    UPLOADED_DTM      DATE             NOT NULL,
    CONSTRAINT PK_POSTIT_FILE PRIMARY KEY (POSTIT_FILE_ID),
    CONSTRAINT FK_POSTIT_FILE_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.QS_ANSWER_FILE(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    QS_ANSWER_FILE_ID     NUMBER(10, 0)    NOT NULL,
    SURVEY_RESPONSE_ID    NUMBER(10, 0)    NOT NULL,
    QUESTION_ID           NUMBER(10, 0)    NOT NULL,
    FILENAME              VARCHAR2(255)    NOT NULL,
    MIME_TYPE             VARCHAR2(256)    NOT NULL,
    DATA                  BLOB             NOT NULL,
    SHA1                  RAW(20)          NOT NULL,
    UPLOADED_DTM          DATE             NOT NULL,
    CONSTRAINT PK_QS_ANSWER_FILE PRIMARY KEY (QS_ANSWER_FILE_ID),
    CONSTRAINT FK_QS_ANSER_FILE_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.QS_ANSWER_LOG(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    QS_ANSWER_LOG_ID      NUMBER(10, 0)     NOT NULL,
    SURVEY_RESPONSE_ID    NUMBER(10, 0)     NOT NULL,
    QUESTION_ID           NUMBER(10, 0)     NOT NULL,
    SET_DTM               DATE              NOT NULL,
    SET_BY_USER_SID       NUMBER(10, 0)     NOT NULL,
    DESCRIPTION           VARCHAR2(255)     NOT NULL,
    PARAM_1               VARCHAR2(4000),
    PARAM_2               VARCHAR2(4000),
    PARAM_3               VARCHAR2(4000),
    SUBMISSION_ID         NUMBER(10, 0)     NOT NULL,
    CONSTRAINT PK_PENDING_VAL_LOG_1 PRIMARY KEY (QS_ANSWER_LOG_ID),
    CONSTRAINT FK_QS_ANSWER_LOG_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.QS_CAMPAIGN(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    QS_CAMPAIGN_SID              NUMBER(10, 0)    NOT NULL,
    NAME                         VARCHAR2(255),
    TABLE_SID                    NUMBER(10, 0),
    FILTER_SID                   NUMBER(10, 0),
    SURVEY_SID                   NUMBER(10, 0)    NOT NULL,
    FRAME_ID                     NUMBER(10, 0),
    SUBJECT                      CLOB,
    BODY                         CLOB,
    SEND_AFTER_DTM               DATE,
    STATUS                       VARCHAR2(20)     NOT NULL,
    SENT_DTM                     DATE,
    PERIOD_START_DTM             DATE,
    PERIOD_END_DTM               DATE,
    AUDIENCE_TYPE                CHAR(2)          NOT NULL,
    FLOW_SID                     NUMBER(10, 0),
    INC_REGIONS_WITH_NO_USERS    NUMBER(1, 0)     NOT NULL,
    CONSTRAINT CHK_QS_CAMPAIGN_STATUS CHECK (STATUS IN ('draft', 'pending', 'sending', 'sent', 'error', 'emailing')),
    CONSTRAINT CHK_PERIOD_DATES CHECK ((period_start_dtm IS NULL AND period_end_dtm IS NULL) OR period_start_dtm < period_end_dtm),
    CONSTRAINT CHK_CAMPAIGN_AUD_TYPE CHECK (AUDIENCE_TYPE IN ('LF', 'WF')),
    CONSTRAINT CHK_AUDIENCE_REFERENCES CHECK ((AUDIENCE_TYPE='LF' AND FLOW_SID IS NULL) OR
	(AUDIENCE_TYPE='WF' AND TABLE_SID IS NULL AND FILTER_SID IS NULL)),
    CONSTRAINT CHK_QS_CAMP_REG_NO_USR_0_1 CHECK (INC_REGIONS_WITH_NO_USERS IN (0, 1)),
    CONSTRAINT PK_QS_CAMPAIGN PRIMARY KEY (QS_CAMPAIGN_SID),
    CONSTRAINT FK_QS_CAMPAIGN_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.QS_CUSTOM_QUESTION_TYPE(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    CUSTOM_QUESTION_TYPE_ID    NUMBER(10, 0)    NOT NULL,
    DESCRIPTION                VARCHAR2(255)    NOT NULL,
    JS_INCLUDE                 VARCHAR2(255)    NOT NULL,
    JS_CLASS                   VARCHAR2(255)    NOT NULL,
    CS_CLASS                   VARCHAR2(255)    NOT NULL,
    CONSTRAINT PK_QS_CUST_QUESTION_TYPE PRIMARY KEY (CUSTOM_QUESTION_TYPE_ID),
    CONSTRAINT UK_CUST_QUEST_TYPE_JS_CLASS  UNIQUE (JS_CLASS),
    CONSTRAINT FK_QS_CUSTOM_QUEST_TYPE_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.QS_DIMENSION(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    QS_DIMENSION_ID    NUMBER(10, 0)    NOT NULL,
    LABEL              VARCHAR2(255)    NOT NULL,
    IS_VISIBLE         NUMBER(1, 0)     NOT NULL,
    CONSTRAINT CHK_QS_DIM_VISIBLE CHECK (IS_VISIBLE IN (0,1)),
    CONSTRAINT PK_QS_DIMENSION PRIMARY KEY (QS_DIMENSION_ID),
    CONSTRAINT FK_QS_DIMENSION_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.QS_DIMENSION_QUESTION(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    QS_DIMENSION_ID    NUMBER(10, 0)    NOT NULL,
    QUESTION_ID        NUMBER(10, 0)    NOT NULL,
    CONSTRAINT PK_QS_DIMENSION_QUESTION PRIMARY KEY (QS_DIMENSION_ID, QUESTION_ID),
    CONSTRAINT FK_QS_DIMENSION_QUEST_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.QS_EXPR_DEPENDENCY(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    SURVEY_SID            NUMBER(10, 0)    NOT NULL,
    EXPR_ID               NUMBER(10, 0)    NOT NULL,
    DEPENDS_ON_EXPR_ID    NUMBER(10, 0)    NOT NULL,
    CONSTRAINT PK_QS_EXPR_DEPENDENCY PRIMARY KEY (SURVEY_SID, EXPR_ID),
    CONSTRAINT FK_QS_EXPR_DEPENDENCY_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.QS_EXPR_MSG_ACTION(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    QS_EXPR_MSG_ACTION_ID    NUMBER(10, 0)     NOT NULL,
    MSG                      VARCHAR2(4000)    NOT NULL,
    CSS_CLASS                VARCHAR2(255)     NOT NULL,
    CONSTRAINT PK_QS_EXPR_MSG_ACTION PRIMARY KEY (QS_EXPR_MSG_ACTION_ID),
    CONSTRAINT FK_QS_EXPR_MSG_ACTION_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.QS_EXPR_NC_ACTION_INVOLVE_ROLE(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    QS_EXPR_NON_COMPL_ACTION_ID    NUMBER(10, 0)    NOT NULL,
    INVOLVE_ROLE_SID               NUMBER(10, 0)    NOT NULL,
    CONSTRAINT PK_QS_EXPR_NC_ACTION_INV PRIMARY KEY (QS_EXPR_NON_COMPL_ACTION_ID, INVOLVE_ROLE_SID),
    CONSTRAINT FK_QS_EXPR_NC_ACT_INV_RLE_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.QS_EXPR_NON_COMPL_ACTION(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    QS_EXPR_NON_COMPL_ACTION_ID    NUMBER(10, 0)     NOT NULL,
    ASSIGN_TO_ROLE_SID             NUMBER(10, 0)     NOT NULL,
    DUE_DTM_ABS                    DATE,
    DUE_DTM_RELATIVE               NUMBER(10, 0),
    DUE_DTM_RELATIVE_UNIT          VARCHAR2(1),
    TITLE                          VARCHAR2(2048)    NOT NULL,
    DETAIL                         VARCHAR2(2048),
    SEND_EMAIL_ON_CREATION         NUMBER(1, 0)      NOT NULL,
    CONSTRAINT CHK_QS_EXPR_NC_ACT_DUE_DTM CHECK ((DUE_DTM_RELATIVE IS NULL AND DUE_DTM_RELATIVE_UNIT IS NULL) OR (DUE_DTM_RELATIVE IS NOT NULL AND DUE_DTM_RELATIVE_UNIT IS NOT NULL)),
    CONSTRAINT CHK_NC_DUE_DTM_REL_UNIT CHECK (DUE_DTM_RELATIVE_UNIT IN ('d','m')),
    CONSTRAINT PK_QS_EXPR_NC_ACTION PRIMARY KEY (QS_EXPR_NON_COMPL_ACTION_ID),
    CONSTRAINT FK_QS_EXPR_NON_COMPL_ACT_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.QS_EXPR_STATUS_ACTION(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    QS_EXPR_STATUS_ACTION_ID    NUMBER(10, 0)    NOT NULL,
    QS_RESPONSE_STATUS_ID       NUMBER(10, 0)    NOT NULL,
    CONSTRAINT PK_QS_EXPR_STATUS_ACTION PRIMARY KEY (QS_EXPR_STATUS_ACTION_ID),
    CONSTRAINT FK_QS_EXPR_STAT_ACT_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.QS_FILTER_BY_STATUS(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    FILTER_ID     NUMBER(10, 0)    NOT NULL,
    SURVEY_SID    NUMBER(10, 0)    NOT NULL,
    STATUS_ID     NUMBER(10, 0)    NOT NULL,
    CONSTRAINT PK_QS_FILTER_BY_STATUS PRIMARY KEY (FILTER_ID, SURVEY_SID, STATUS_ID),
    CONSTRAINT FK_QS_FILTER_BY_STATUS_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.QS_FILTER_CONDITION(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    FILTER_ID                 NUMBER(10, 0)     NOT NULL,
    QS_FILTER_CONDITION_ID    NUMBER(10, 0)     NOT NULL,
    QUESTION_ID               NUMBER(10, 0)     NOT NULL,
    COMPARATOR                VARCHAR2(20),
    COMPARE_TO_STR_VAL        VARCHAR2(2047),
    COMPARE_TO_NUM_VAL        NUMBER(10, 0),
    COMPARE_TO_OPTION_ID      NUMBER(10, 0),
    CONSTRAINT PK_QS_FILTER_CONDITION PRIMARY KEY (FILTER_ID, QS_FILTER_CONDITION_ID),
    CONSTRAINT FK_QS_FILTER_CONDITION_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.QS_QUESTION_OPTION(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    QUESTION_OPTION_ID    NUMBER(10, 0)     NOT NULL,
    QUESTION_ID           NUMBER(10, 0)     NOT NULL,
    PARENT_OPTION_ID      NUMBER(10, 0),
    POS                   NUMBER(10, 0)     NOT NULL,
    LABEL                 VARCHAR2(4000)    NOT NULL,
    IS_VISIBLE            NUMBER(1, 0)      NOT NULL,
    SCORE                 NUMBER(13, 3),
    COLOR                 NUMBER(10, 0),
    LOOKUP_KEY            VARCHAR2(255),
    MAPS_TO_IND_SID       NUMBER(10, 0),
    OPTION_ACTION         VARCHAR2(50),
    CONSTRAINT CHK_QS_QUES_OPT_VIS CHECK (IS_VISIBLE IN (0,1)),
    CONSTRAINT PK_QS_QUESTION_OPTION PRIMARY KEY (QUESTION_OPTION_ID),
    CONSTRAINT CONS_QUESTION_AND_OPTION  UNIQUE (QUESTION_ID, QUESTION_OPTION_ID),
    CONSTRAINT FK_QS_QUESTION_OPTION_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.QS_QUESTION_REPORT(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    QS_QUESTION_REPORT_ID    NUMBER(10, 0)    NOT NULL,
    QUESTION_ID              NUMBER(10, 0)    NOT NULL,
    COMPOUND_FILTER_SID      NUMBER(10, 0),
    DESCRIPTION              VARCHAR2(255)    NOT NULL,
    QS_CAMPAIGN_SID          NUMBER(10, 0),
    CONSTRAINT PK_QS_REPORT PRIMARY KEY (QS_QUESTION_REPORT_ID),
    CONSTRAINT FK_QS_QUESTION_REPORT_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.QS_RESPONSE_POSTIT(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    SURVEY_RESPONSE_ID    NUMBER(10, 0)    NOT NULL,
    POSTIT_ID             NUMBER(10, 0)    NOT NULL,
    CONSTRAINT PK_QS_RESPONSE_POSTIT PRIMARY KEY (SURVEY_RESPONSE_ID, POSTIT_ID),
    CONSTRAINT FK_QS_RESPONSE_POSTIT_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.QS_RESPONSE_STATUS(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    QS_RESPONSE_STATUS_ID    NUMBER(10, 0)    NOT NULL,
    LABEL                    VARCHAR2(255)    NOT NULL,
    CSS_CLASS                VARCHAR2(255),
    CONSTRAINT PK_QS_RESPONSE_STATUS PRIMARY KEY (QS_RESPONSE_STATUS_ID),
    CONSTRAINT FK_QS_RESPONSE_STATUS_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.QS_SUBMISSION_FILE(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    QS_ANSWER_FILE_ID     NUMBER(10, 0)    NOT NULL,
    SURVEY_RESPONSE_ID    NUMBER(10, 0)    NOT NULL,
    SUBMISSION_ID         NUMBER(10, 0)    NOT NULL,
    CONSTRAINT PK_QS_SUBMISSION_FILE PRIMARY KEY (QS_ANSWER_FILE_ID, SURVEY_RESPONSE_ID, SUBMISSION_ID),
    CONSTRAINT FK_QS_SUBMISSION_FILE_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.QUICK_SURVEY(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    SURVEY_SID                NUMBER(10, 0)    NOT NULL,
    RESULT_PROVIDER           VARCHAR2(255),
    QUESTION_XML              SYS.XMLType,
    LABEL                     VARCHAR2(256),
    START_DTM                 DATE,
    END_DTM                   DATE,
    CREATED_DTM               DATE             NOT NULL,
    AUDIENCE                  VARCHAR2(32)     NOT NULL,
    AGGREGATE_IND_GROUP_ID    NUMBER(10, 0),
    QUICK_SURVEY_TYPE_ID      NUMBER(10, 0),
    ROOT_IND_SID              NUMBER(10, 0),
    CONSTRAINT CHK_QUICK_SURVEY_AUDIENCE CHECK (AUDIENCE IN ('everyone','existing','chain','audit')),
    CONSTRAINT PK_QUICK_SURVEY PRIMARY KEY (SURVEY_SID),
    CONSTRAINT FK_QUICK_SURVEY_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.QUICK_SURVEY_ANSWER(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    SURVEY_RESPONSE_ID       NUMBER(10, 0)     NOT NULL,
    QUESTION_ID              NUMBER(10, 0)     NOT NULL,
    ANSWER                   CLOB,
    NOTE                     CLOB,
    SCORE                    NUMBER(15, 5),
    QUESTION_OPTION_ID       NUMBER(10, 0),
    VAL_NUMBER               NUMBER(24, 10),
    MEASURE_CONVERSION_ID    NUMBER(10, 0),
    MEASURE_SID              NUMBER(10, 0),
    REGION_SID               NUMBER(10, 0),
    HTML_DISPLAY             CLOB,
    MAX_SCORE                NUMBER(15, 5),
    VERSION_STAMP            NUMBER(10, 0)     NOT NULL,
    SUBMISSION_ID            NUMBER(10, 0)     NOT NULL,
    CONSTRAINT PK_QUICK_SURVEY_RESP_ANSWR PRIMARY KEY (SURVEY_RESPONSE_ID, QUESTION_ID, SUBMISSION_ID),
    CONSTRAINT FK_QUICK_SURVEY_QNSER_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.QUICK_SURVEY_EXPR(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    SURVEY_SID     NUMBER(10, 0)     NOT NULL,
    EXPR_ID        NUMBER(10, 0)     NOT NULL,
    EXPR           VARCHAR2(4000)    NOT NULL,
    DESCRIPTION    VARCHAR2(4000),
    NAME           VARCHAR2(255),
    CONSTRAINT PK_QS_EXPR PRIMARY KEY (SURVEY_SID, EXPR_ID),
    CONSTRAINT FK_QUICK_SURVEY_EXPR_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.QUICK_SURVEY_EXPR_ACTION(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    QUICK_SURVEY_EXPR_ACTION_ID    NUMBER(10, 0)    NOT NULL,
    ACTION_TYPE                    VARCHAR2(20)     NOT NULL,
    SURVEY_SID                     NUMBER(10, 0)    NOT NULL,
    EXPR_ID                        NUMBER(10, 0)    NOT NULL,
    QS_EXPR_NON_COMPL_ACTION_ID    NUMBER(10, 0),
    QS_EXPR_MSG_ACTION_ID          NUMBER(10, 0),
    QS_EXPR_STATUS_ACTION_ID       NUMBER(10, 0),
    SHOW_QUESTION_ID               NUMBER(10, 0),
    CONSTRAINT CHK_QS_EXPR_ACTION_TYPE_FK CHECK ((ACTION_TYPE = 'nc' AND QS_EXPR_NON_COMPL_ACTION_ID IS NOT NULL
  AND QS_EXPR_MSG_ACTION_ID IS NULL AND QS_EXPR_STATUS_ACTION_ID IS NULL AND SHOW_QUESTION_ID IS NULL)
OR
(ACTION_TYPE = 'msg' AND QS_EXPR_NON_COMPL_ACTION_ID IS NULL
  AND QS_EXPR_MSG_ACTION_ID IS NOT NULL AND QS_EXPR_STATUS_ACTION_ID IS NULL AND SHOW_QUESTION_ID IS NULL)
OR
(ACTION_TYPE = 'status' AND QS_EXPR_NON_COMPL_ACTION_ID IS NULL
  AND QS_EXPR_MSG_ACTION_ID IS NULL AND QS_EXPR_STATUS_ACTION_ID IS NOT NULL AND SHOW_QUESTION_ID IS NULL)
OR
(ACTION_TYPE = 'show_q' AND QS_EXPR_NON_COMPL_ACTION_ID IS NULL
  AND QS_EXPR_MSG_ACTION_ID IS NULL AND QS_EXPR_STATUS_ACTION_ID IS NULL AND SHOW_QUESTION_ID IS NOT NULL)),
    CONSTRAINT CHK_QS_EXPR_ACTION_TYPE CHECK (ACTION_TYPE IN ('nc','msg','status')),
    CONSTRAINT PK_QS_EXPR_ACTION PRIMARY KEY (QUICK_SURVEY_EXPR_ACTION_ID),
    CONSTRAINT UK_QS_EXPR_ACTION  UNIQUE (QUICK_SURVEY_EXPR_ACTION_ID, SURVEY_SID, EXPR_ID),
    CONSTRAINT FK_QUICK_SURVEY_EXPR_ACT_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.QUICK_SURVEY_LANG(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    SURVEY_SID    NUMBER(10, 0)    NOT NULL,
    LANG          VARCHAR2(10)     NOT NULL,
    CONSTRAINT PK_QS_LANG PRIMARY KEY (SURVEY_SID, LANG),
    CONSTRAINT FK_QUICK_SURVEY_LANG_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.QUICK_SURVEY_QUESTION(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    QUESTION_ID                NUMBER(10, 0)     NOT NULL,
    PARENT_ID                  NUMBER(10, 0),
    SURVEY_SID                 NUMBER(10, 0)     NOT NULL,
    POS                        NUMBER(10, 0)     NOT NULL,
    LABEL                      VARCHAR2(4000),
    IS_VISIBLE                 NUMBER(1, 0)      NOT NULL,
    QUESTION_TYPE              VARCHAR2(20)      NOT NULL,
    SCORE                      NUMBER(13, 3),
    LOOKUP_KEY                 VARCHAR2(255),
    MAPS_TO_IND_SID            NUMBER(10, 0),
    MEASURE_SID                NUMBER(10, 0),
    MAX_SCORE                  NUMBER(10, 0),
    UPLOAD_SCORE               NUMBER(10, 0),
    CUSTOM_QUESTION_TYPE_ID    NUMBER(10, 0),
    WEIGHT                     NUMBER(15, 5)     NOT NULL,
    CONSTRAINT CK_QSQ_IS_VISIBLE CHECK (IS_VISIBLE IN (0,1)),
    CONSTRAINT CHK_CUSTOM_QUESTION_ID CHECK ((QUESTION_TYPE!='custom' AND CUSTOM_QUESTION_TYPE_ID IS NULL) OR (QUESTION_TYPE='custom' AND CUSTOM_QUESTION_TYPE_ID IS NOT NULL)),
    CONSTRAINT PK638 PRIMARY KEY (QUESTION_ID),
    CONSTRAINT CONS_QS_QUES_MEASURE  UNIQUE (QUESTION_ID, MEASURE_SID),
    CONSTRAINT FK_QUICK_SURVEY_QUESTION_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.QUICK_SURVEY_RESPONSE(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    SURVEY_RESPONSE_ID       NUMBER(10, 0)    NOT NULL,
    SURVEY_SID               NUMBER(10, 0)    NOT NULL,
    USER_SID                 NUMBER(10, 0),
    USER_NAME                VARCHAR2(255),
    CREATED_DTM              DATE             NOT NULL,
    GUID                     VARCHAR2(36)     NOT NULL,
    QS_RESPONSE_STATUS_ID    NUMBER(10, 0),
    QS_CAMPAIGN_SID          NUMBER(10, 0),
    LAST_SUBMISSION_ID       NUMBER(10, 0),
    CONSTRAINT PK_QUICK_SURVEY_RESPONSE PRIMARY KEY (SURVEY_RESPONSE_ID),
    CONSTRAINT UK_QUICK_SURVEY_RESPONSE  UNIQUE (SURVEY_SID, SURVEY_RESPONSE_ID),
    CONSTRAINT FK_QUICK_SURVEY_RESPONSE_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.QUICK_SURVEY_SUBMISSION(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    SURVEY_RESPONSE_ID       NUMBER(10, 0)    NOT NULL,
    SUBMISSION_ID            NUMBER(10, 0)    NOT NULL,
    SUBMITTED_DTM            DATE,
    SUBMITTED_BY_USER_SID    NUMBER(10, 0),
    OVERALL_SCORE            NUMBER(15, 5),
    OVERALL_MAX_SCORE        NUMBER(15, 5),
    SCORE_THRESHOLD_ID       NUMBER(10, 0),
    CONSTRAINT PK_QUICK_SURVEY_SUBMISSION PRIMARY KEY (SURVEY_RESPONSE_ID, SUBMISSION_ID),
    CONSTRAINT FK_QUICK_SURVEY_SUBMSSN_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.QUICK_SURVEY_TYPE(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    QUICK_SURVEY_TYPE_ID    NUMBER(10, 0)    NOT NULL,
    DESCRIPTION             VARCHAR2(255)    NOT NULL,
    CS_CLASS                VARCHAR2(255)    NOT NULL,
    HELPER_PKG              VARCHAR2(255),
    CONSTRAINT PK_QS_TYPE PRIMARY KEY (QUICK_SURVEY_TYPE_ID),
    CONSTRAINT FK_QUICK_SURVEY_TYPE_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.REGION_INTERNAL_AUDIT(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    INTERNAL_AUDIT_TYPE_ID    NUMBER(10, 0)    NOT NULL,
    REGION_SID                NUMBER(10, 0)    NOT NULL,
    NEXT_AUDIT_DTM            DATE,
    CONSTRAINT PK_REGION_INTERNAL_AUDIT PRIMARY KEY (INTERNAL_AUDIT_TYPE_ID, REGION_SID),
    CONSTRAINT FK_REGION_INTERNAL_AUDIT_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.REGION_OWNER(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    REGION_SID    NUMBER(10, 0)    NOT NULL,
    USER_SID      NUMBER(10, 0)    NOT NULL,
    CONSTRAINT PK51 PRIMARY KEY (REGION_SID, USER_SID),
    CONSTRAINT FK_REGION_OWNER_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.REGION_SET(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    REGION_SET_ID    NUMBER(10, 0)    NOT NULL,
    OWNER_SID        NUMBER(10, 0),
    NAME             VARCHAR2(255)    NOT NULL,
    DISPOSAL_DTM     DATE,
    CONSTRAINT PK_REGION_SET PRIMARY KEY (REGION_SET_ID),
    CONSTRAINT FK_REGION_SET_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.REGION_SET_REGION(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    REGION_SET_ID    NUMBER(10, 0)    NOT NULL,
    REGION_SID       NUMBER(10, 0)    NOT NULL,
    CONSTRAINT PK_REGION_SET_REGION PRIMARY KEY (REGION_SET_ID, REGION_SID),
    CONSTRAINT FK_REGION_SET_REGION_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.REGION_SURVEY_RESPONSE(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    SURVEY_SID            NUMBER(10, 0)    NOT NULL,
    SURVEY_RESPONSE_ID    NUMBER(10, 0)    NOT NULL,
    REGION_SID            NUMBER(10, 0)    NOT NULL,
    PERIOD_START_DTM      DATE             NOT NULL,
    PERIOD_END_DTM        DATE             NOT NULL,
    CONSTRAINT PK_REGION_SURVEY_RESPONSE PRIMARY KEY (SURVEY_SID, REGION_SID, PERIOD_START_DTM),
    CONSTRAINT UQ_REG_SUR_RESP_RESP_ID  UNIQUE (SURVEY_RESPONSE_ID),
    CONSTRAINT FK_REGION_SURVEY_RESP_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.SCENARIO(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    SCENARIO_SID                    NUMBER(10, 0)     NOT NULL,
    DESCRIPTION                     VARCHAR2(1000)    NOT NULL,
    START_DTM                       DATE              NOT NULL,
    END_DTM                         DATE,
    INTERVAL                        VARCHAR2(1)       NOT NULL,
    AUTO_UPDATE                     NUMBER(1, 0)      NOT NULL,
    AUTO_UPDATE_MERGED_RUN_SID      NUMBER(10, 0),
    AUTO_UPDATE_UNMERGED_RUN_SID    NUMBER(10, 0),
    CONSTRAINT CK_SCENARIO_DATES CHECK (START_DTM = TRUNC(START_DTM, 'MON') AND (END_DTM IS NULL OR (END_DTM = TRUNC(END_DTM, 'MON') AND END_DTM > START_DTM))),
    CONSTRAINT CK_SCENARIO_INTERVAL CHECK (INTERVAL IN ('m','q','h','y')),
    CONSTRAINT CK_AUTO_UPDATE_RUNS CHECK ((auto_update = 0 and auto_update_merged_run_sid is null and auto_update_unmerged_run_sid is null) or 
 (auto_update = 1 and (auto_update_merged_run_sid is not null or auto_update_unmerged_run_sid is not null))),
    CONSTRAINT CK_SCENARIO_AUTO_UPDATE CHECK (auto_update in (0,1)),
    CONSTRAINT PK_SCENARIO PRIMARY KEY (SCENARIO_SID),
    CONSTRAINT FK_SCENARIO_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.SCENARIO_IND(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    SCENARIO_SID    NUMBER(10, 0)    NOT NULL,
    IND_SID         NUMBER(10, 0)    NOT NULL,
    CONSTRAINT PK_SCENARIO_IND PRIMARY KEY (SCENARIO_SID, IND_SID),
    CONSTRAINT FK_SCENARIO_IND_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.SCENARIO_OPTIONS(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    SHOW_CHART         NUMBER(1, 0)     NOT NULL,
    SHOW_BAU_OPTION    NUMBER(1, 0)     NOT NULL,
    BAU_DEFAULT        NUMBER(1, 0)     NOT NULL,
    CHECK (SHOW_CHART IN(0,1)),
    CHECK (SHOW_BAU_OPTION IN(0,1)),
    CHECK (BAU_DEFAULT IN(0,1)),
    CONSTRAINT FK_SCENARIO_OPTIONS_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.SCENARIO_REGION(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    SCENARIO_SID    NUMBER(10, 0)    NOT NULL,
    REGION_SID      NUMBER(10, 0)    NOT NULL,
    CONSTRAINT PK_SCENARIO_REGION PRIMARY KEY (SCENARIO_SID, REGION_SID),
    CONSTRAINT FK_SCENARIO_REGION_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.SCENARIO_RULE(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    SCENARIO_SID             NUMBER(10, 0)     NOT NULL,
    RULE_ID                  NUMBER(10, 0)     NOT NULL,
    DESCRIPTION              VARCHAR2(1000)    NOT NULL,
    RULE_TYPE                NUMBER(1, 0)      NOT NULL,
    AMOUNT                   NUMBER(24, 10)    NOT NULL,
    MEASURE_CONVERSION_ID    NUMBER(10, 0),
    START_DTM                DATE              NOT NULL,
    END_DTM                  DATE,
    CONSTRAINT CK_SCENARIO_RULE_DATES CHECK (START_DTM = TRUNC(START_DTM, 'MON') AND (END_DTM IS NULL OR (END_DTM = TRUNC(END_DTM, 'MON') AND END_DTM > START_DTM))),
    CONSTRAINT PK_SCENARIO_RULE PRIMARY KEY (SCENARIO_SID, RULE_ID),
    CONSTRAINT FK_SCENARIO_RULE_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.SCENARIO_RULE_IND(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    SCENARIO_SID    NUMBER(10, 0)    NOT NULL,
    RULE_ID         NUMBER(10, 0)    NOT NULL,
    IND_SID         NUMBER(10, 0)    NOT NULL,
    CONSTRAINT PK_SCENARIO_RULE_IND PRIMARY KEY (SCENARIO_SID, RULE_ID, IND_SID),
    CONSTRAINT FK_SCENARIO_RULE_IND_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.SCENARIO_RULE_LIKE_CONTIG_IND(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    SCENARIO_SID    NUMBER(10, 0)    NOT NULL,
    RULE_ID         NUMBER(10, 0)    NOT NULL,
    IND_SID         NUMBER(10, 0)    NOT NULL,
    CONSTRAINT PK_SCENARIO_RULE_LIKE_CTG_IND PRIMARY KEY (SCENARIO_SID, RULE_ID, IND_SID),
    CONSTRAINT FK_SCN_RLE_LIKE_CONTIG_IND_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.SCENARIO_RULE_REGION(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    SCENARIO_SID    NUMBER(10, 0)    NOT NULL,
    RULE_ID         NUMBER(10, 0)    NOT NULL,
    REGION_SID      NUMBER(10, 0)    NOT NULL,
    CONSTRAINT PK_SCENARIO_RULE_REGION PRIMARY KEY (SCENARIO_SID, RULE_ID, REGION_SID),
    CONSTRAINT FK_SCENARIO_RULE_REGION_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.SCENARIO_RUN(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    SCENARIO_RUN_SID    NUMBER(10, 0)     NOT NULL,
    SCENARIO_SID        NUMBER(10, 0)     NOT NULL,
    RUN_DTM             DATE              NOT NULL,
    DESCRIPTION         VARCHAR2(4000),
    CONSTRAINT PK_SCENARIO_RUN PRIMARY KEY (SCENARIO_RUN_SID),
    CONSTRAINT FK_SCENARIO_RUN_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.SCENARIO_RUN_VAL(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    IND_SID             NUMBER(10, 0)     NOT NULL,
    REGION_SID          NUMBER(10, 0)     NOT NULL,
    PERIOD_START_DTM    DATE              NOT NULL,
    PERIOD_END_DTM      DATE              NOT NULL,
    VAL_NUMBER          NUMBER(24, 10),
    ERROR_CODE          NUMBER(10, 0),
    SOURCE_TYPE_ID      NUMBER(10, 0)     NOT NULL,
    SOURCE_ID           NUMBER(10, 0),
    SCENARIO_RUN_SID    NUMBER(10, 0),
    CONSTRAINT CK_VAL_NULL CHECK ((val_number is not null and error_code is null) or (val_number is null and error_code is not null)),
    CONSTRAINT CK_SCENARIO_RUN_VAL_DATES CHECK (period_start_dtm = trunc(period_start_dtm, 'MON') and period_end_dtm = trunc(period_end_dtm, 'MON') and period_end_dtm > period_start_dtm),
    CONSTRAINT PK_SCENARIO_RUN_VAL PRIMARY KEY (IND_SID, REGION_SID, PERIOD_START_DTM, PERIOD_END_DTM),
    CONSTRAINT FK_SCENARIO_RUN_VAL_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.SCORE_THRESHOLD(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    SCORE_THRESHOLD_ID      NUMBER(10, 0)    NOT NULL,
    MAX_VALUE               NUMBER(15, 5)    NOT NULL,
    DESCRIPTION             VARCHAR2(255)    NOT NULL,
    TEXT_COLOUR             NUMBER(10, 0)    NOT NULL,
    BACKGROUND_COLOUR       NUMBER(10, 0)    NOT NULL,
    BAR_COLOUR              NUMBER(10, 0),
    ICON_IMAGE              BLOB,
    ICON_IMAGE_FILENAME     VARCHAR2(255),
    ICON_IMAGE_MIME_TYPE    VARCHAR2(255),
    DASHBOARD_IMAGE         BLOB,
    DASHBOARD_FILENAME      VARCHAR2(255),
    DASHBOARD_MIME_TYPE     VARCHAR2(255),
    CONSTRAINT PK_SCORE_THRESHOLD PRIMARY KEY (SCORE_THRESHOLD_ID),
    CONSTRAINT FK_SCORE_THRESHOLD_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.TARGET_DASHBOARD(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    TARGET_DASHBOARD_SID    NUMBER(10, 0)    NOT NULL,
    START_DTM               DATE             NOT NULL,
    END_DTM                 DATE,
    INTERVAL                VARCHAR2(10)     NOT NULL,
    NAME                    VARCHAR2(255)    NOT NULL,
    PARENT_SID              NUMBER(10, 0)    NOT NULL,
    USE_ROOT_REGION_SID     NUMBER(1, 0)     NOT NULL,
    CONSTRAINT CHK_TGT_DASH_USE_ROOT_REG CHECK (USE_ROOT_REGION_SID IN (0,1)),
    CONSTRAINT PK_TARGET_DASHBOARD PRIMARY KEY (TARGET_DASHBOARD_SID),
    CONSTRAINT FK_TARGET_DASHBOARD_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.TARGET_DASHBOARD_IND_MEMBER(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    TARGET_DASHBOARD_SID    NUMBER(10, 0)    NOT NULL,
    TARGET_IND_SID          NUMBER(10, 0),
    IND_SID                 NUMBER(10, 0)    NOT NULL,
    CONSTRAINT PK_TARGET_DASHBOARD_IND_MEMBER PRIMARY KEY (TARGET_DASHBOARD_SID, IND_SID),
    CONSTRAINT FK_TARGET_DASH_IND_MEMBER_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.TARGET_DASHBOARD_VALUE(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    TARGET_DASHBOARD_SID    NUMBER(10, 0)    NOT NULL,
    IND_SID                 NUMBER(10, 0)    NOT NULL,
    REGION_SID              NUMBER(10, 0)    NOT NULL,
    VAL_NUMBER              NUMBER(18, 4)    NOT NULL,
    CONSTRAINT PK_TARGET_DASHBOARD_VALUE PRIMARY KEY (TARGET_DASHBOARD_SID, IND_SID, REGION_SID),
    CONSTRAINT FK_TARGET_DASH_VALUE_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.TEMPLATE(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    TEMPLATE_TYPE_ID    NUMBER(10, 0)    NOT NULL,
    DATA                BLOB             NOT NULL,
    MIME_TYPE           VARCHAR2(64)     NOT NULL,
    UPLOADED_DTM        DATE             NOT NULL,
    UPLOADED_BY_SID     NUMBER(10, 0)    NOT NULL,
    CONSTRAINT PK_TEMPLATE PRIMARY KEY (TEMPLATE_TYPE_ID),
    CONSTRAINT FK_TEMPLATE_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.USER_COVER(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    USER_COVER_ID             NUMBER(10, 0)    NOT NULL,
    USER_GIVING_COVER_SID     NUMBER(10, 0)    NOT NULL,
    USER_BEING_COVERED_SID    NUMBER(10, 0)    NOT NULL,
    START_DTM                 DATE             NOT NULL,
    END_DTM                   DATE,
    COVER_TERMINATED          NUMBER(1, 0)     NOT NULL,
    CONSTRAINT PK1254 PRIMARY KEY (USER_COVER_ID, USER_GIVING_COVER_SID, USER_BEING_COVERED_SID),
    CONSTRAINT FK_USER_COVER_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.AUTOCREATE_USER(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    GUID                    CHAR(36)         NOT NULL,
    REQUESTED_DTM           DATE             NOT NULL,
    USER_NAME               VARCHAR2(255)    NOT NULL,
    APPROVED_DTM            DATE,
    APPROVED_BY_USER_SID    NUMBER(10, 0),
    CREATED_USER_SID        NUMBER(10, 0),
    ACTIVATED_DTM           DATE,
    REJECTED_DTM            DATE,
    CONSTRAINT PK_AUTOCREATE_USER PRIMARY KEY (USER_NAME),
    CONSTRAINT FK_AUTOCREATE_USER_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.AUDIT_LOG(
    AUDIT_DATE       DATE              NOT NULL,
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    AUDIT_TYPE_ID    NUMBER(10, 0)     NOT NULL,
    OBJECT_SID       NUMBER(10, 0),
    USER_SID         NUMBER(10, 0)     NOT NULL,
    DESCRIPTION      VARCHAR2(1023),
    PARAM_1          VARCHAR2(2048),
    PARAM_2          VARCHAR2(2048),
    PARAM_3          VARCHAR2(2048),
    SUB_OBJECT_ID    NUMBER(10, 0),
    REMOTE_ADDR      VARCHAR2(40)      DEFAULT SYS_CONTEXT('SECURITY', 'REMOTE_ADDR'),
    CONSTRAINT FK_AUDIT_LOG_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.CUSTOMER_ALERT_TYPE_PARAM(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    CUSTOMER_ALERT_TYPE_ID    NUMBER(10, 0)     NOT NULL,
    FIELD_NAME                VARCHAR2(100)     NOT NULL,
    DESCRIPTION               VARCHAR2(200)     NOT NULL,
    HELP_TEXT                 VARCHAR2(2000)    NOT NULL,
    REPEATS                   NUMBER(1, 0)      NOT NULL,
    DISPLAY_POS               NUMBER(10, 0)     NOT NULL,
    CONSTRAINT PK_CUS_ALERT_TYPE_PARAM PRIMARY KEY (CUSTOMER_ALERT_TYPE_ID, FIELD_NAME),
    CONSTRAINT FK_CUST_ALRT_TYPE_PARAM_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE CSRIMP.CMS_TAB_ALERT_TYPE(
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
    TAB_SID                   NUMBER(10, 0)    NOT NULL,
    HAS_REPEATS               NUMBER(1, 0)     NOT NULL,
    CUSTOMER_ALERT_TYPE_ID    NUMBER(10, 0)    NOT NULL,
    FILTER_XML                SYS.XMLType,
    CONSTRAINT CHK_CMS_ALERT_HAS_REPEATS CHECK (HAS_REPEATS IN (0,1)),
    CONSTRAINT PK_CMS_TAB_ALERT_TYPE PRIMARY KEY (CUSTOMER_ALERT_TYPE_ID),
    CONSTRAINT FK_TAB_ALERT_TYPE_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE csrimp.map_deleg_plan_col_survey (
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	old_deleg_plan_col_survey_id	NUMBER(10)	NOT NULL,
	new_deleg_plan_col_survey_id	NUMBER(10)	NOT NULL,
	CONSTRAINT pk_map_deleg_plan_col_survey PRIMARY KEY (old_deleg_plan_col_survey_id) USING INDEX,
	CONSTRAINT uk_map_deleg_plan_col_survey UNIQUE (new_deleg_plan_col_survey_id) USING INDEX,
    CONSTRAINT FK_MAP_DLG_PLAN_COL_SRV_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE csrimp.map_tab (
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	old_tab_id						NUMBER(10)	NOT NULL,
	new_tab_id						NUMBER(10)	NOT NULL,
	CONSTRAINT pk_map_tab PRIMARY KEY (old_tab_id) USING INDEX,
	CONSTRAINT uk_map_tab UNIQUE (new_tab_id) USING INDEX,
    CONSTRAINT FK_MAP_TAB_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE csrimp.map_tab_portlet (
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	old_tab_portlet_id				NUMBER(10)	NOT NULL,
	new_tab_portlet_id				NUMBER(10)	NOT NULL,
	CONSTRAINT pk_map_tab_portlet PRIMARY KEY (old_tab_portlet_id) USING INDEX,
	CONSTRAINT uk_map_tab_portlet UNIQUE (new_tab_portlet_id) USING INDEX,
    CONSTRAINT FK_MAP_TAB_PORTLET_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE csrimp.map_dashboard_instance (
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	old_dashboard_instance_id		NUMBER(10)	NOT NULL,
	new_dashboard_instance_id		NUMBER(10)	NOT NULL,
	CONSTRAINT pk_map_dashboard_instance PRIMARY KEY (old_dashboard_instance_id) USING INDEX,
	CONSTRAINT uk_map_dashboard_instance UNIQUE (new_dashboard_instance_id) USING INDEX,
    CONSTRAINT FK_MAP_DASHBOARD_INSTANCE_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE csrimp.map_tpl_report_tag_ind (
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	old_tpl_report_tag_ind_id		NUMBER(10)	NOT NULL,
	new_tpl_report_tag_ind_id		NUMBER(10)	NOT NULL,
	CONSTRAINT pk_map_tpl_report_tag_ind PRIMARY KEY (old_tpl_report_tag_ind_id) USING INDEX,
	CONSTRAINT uk_map_tpl_report_tag_ind UNIQUE (new_tpl_report_tag_ind_id) USING INDEX,
    CONSTRAINT FK_MAP_TPL_REP_TAG_IND_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE csrimp.map_tpl_report_tag_eval (
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	old_tpl_report_tag_eval_id		NUMBER(10)	NOT NULL,
	new_tpl_report_tag_eval_id		NUMBER(10)	NOT NULL,
	CONSTRAINT pk_map_tpl_report_tag_eval PRIMARY KEY (old_tpl_report_tag_eval_id) USING INDEX,
	CONSTRAINT uk_map_tpl_report_tag_eval UNIQUE (new_tpl_report_tag_eval_id) USING INDEX,
    CONSTRAINT FK_MAP_TPL_REP_TAG_EVAL_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE csrimp.map_tpl_report_tag_dv (
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	old_tpl_report_tag_dv_id		NUMBER(10)	NOT NULL,
	new_tpl_report_tag_dv_id		NUMBER(10)	NOT NULL,
	CONSTRAINT pk_map_tpl_report_tag_dv PRIMARY KEY (old_tpl_report_tag_dv_id) USING INDEX,
	CONSTRAINT uk_map_tpl_report_tag_dv UNIQUE (new_tpl_report_tag_dv_id) USING INDEX,
    CONSTRAINT FK_MAP_TPL_REP_TAG_DV_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE csrimp.map_tpl_report_tag_log_frm (
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	old_tpl_report_tag_log_frm_id	NUMBER(10)	NOT NULL,
	new_tpl_report_tag_log_frm_id	NUMBER(10)	NOT NULL,
	CONSTRAINT pk_map_tpl_report_tag_log_frm PRIMARY KEY (old_tpl_report_tag_log_frm_id) USING INDEX,
	CONSTRAINT uk_map_tpl_report_tag_log_frm UNIQUE (new_tpl_report_tag_log_frm_id) USING INDEX,
    CONSTRAINT FK_MAP_TPL_REP_TAG_LOG_FRM_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE csrimp.map_tpl_report_tag_text (
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	old_tpl_report_tag_text_id		NUMBER(10)	NOT NULL,
	new_tpl_report_tag_text_id		NUMBER(10)	NOT NULL,
	CONSTRAINT pk_map_tpl_report_tag_text PRIMARY KEY (old_tpl_report_tag_text_id) USING INDEX,
	CONSTRAINT uk_map_tpl_report_tag_text UNIQUE (new_tpl_report_tag_text_id) USING INDEX,
    CONSTRAINT FK_MAP_TPL_REP_TAG_TEXT_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE csrimp.map_aggregate_ind_group (
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	old_aggregate_ind_group_id		NUMBER(10)	NOT NULL,
	new_aggregate_ind_group_id		NUMBER(10)	NOT NULL,
	CONSTRAINT pk_map_aggregate_ind_group PRIMARY KEY (old_aggregate_ind_group_id) USING INDEX,
	CONSTRAINT uk_map_aggregate_ind_group UNIQUE (new_aggregate_ind_group_id) USING INDEX,
    CONSTRAINT FK_MAP_AGGR_IND_GROUP_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE csrimp.map_dashboard_item (
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	old_dashboard_item_id			NUMBER(10)	NOT NULL,
	new_dashboard_item_id			NUMBER(10)	NOT NULL,
	CONSTRAINT pk_map_dashboard_item PRIMARY KEY (old_dashboard_item_id) USING INDEX,
	CONSTRAINT uk_map_dashboard_item UNIQUE (new_dashboard_item_id) USING INDEX,
    CONSTRAINT FK_MAP_DASHBOARD_ITEM_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE csrimp.map_dataview_zone (
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	old_dataview_zone_id			NUMBER(10)	NOT NULL,
	new_dataview_zone_id			NUMBER(10)	NOT NULL,
	CONSTRAINT pk_map_dataview_zone PRIMARY KEY (old_dataview_zone_id) USING INDEX,
	CONSTRAINT uk_map_dataview_zone UNIQUE (new_dataview_zone_id) USING INDEX,
    CONSTRAINT FK_MAP_DATAVIEW_ZONE_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE csrimp.map_user_cover (
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	old_user_cover_id				NUMBER(10)	NOT NULL,
	new_user_cover_id				NUMBER(10)	NOT NULL,
	CONSTRAINT pk_map_user_cover PRIMARY KEY (old_user_cover_id) USING INDEX,
	CONSTRAINT uk_map_user_cover UNIQUE (new_user_cover_id) USING INDEX,
    CONSTRAINT FK_MAP_USER_COVER_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE csrimp.map_doc (
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	old_doc_id						NUMBER(10)	NOT NULL,
	new_doc_id						NUMBER(10)	NOT NULL,
	CONSTRAINT pk_map_doc PRIMARY KEY (old_doc_id) USING INDEX,
	CONSTRAINT uk_map_doc UNIQUE (new_doc_id) USING INDEX,
    CONSTRAINT FK_MAP_DOC_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE csrimp.map_doc_data (
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	old_doc_data_id					NUMBER(10)	NOT NULL,
	new_doc_data_id					NUMBER(10)	NOT NULL,
	CONSTRAINT pk_map_doc_data PRIMARY KEY (old_doc_data_id) USING INDEX,
	CONSTRAINT uk_map_doc_data UNIQUE (new_doc_data_id) USING INDEX,
    CONSTRAINT FK_MAP_DOC_DATA_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE csrimp.map_internal_audit_type (
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	old_internal_audit_type_id		NUMBER(10)	NOT NULL,
	new_internal_audit_type_id		NUMBER(10)	NOT NULL,
	CONSTRAINT pk_map_internal_audit_type PRIMARY KEY (old_internal_audit_type_id) USING INDEX,
	CONSTRAINT uk_map_internal_audit_type UNIQUE (new_internal_audit_type_id) USING INDEX,
    CONSTRAINT FK_MAP_INTENAL_AUDIT_TYPE_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE csrimp.map_model_range (
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	old_range_id					NUMBER(10)	NOT NULL,
	new_range_id					NUMBER(10)	NOT NULL,
	CONSTRAINT pk_map_model_range PRIMARY KEY (old_range_id) USING INDEX,
	CONSTRAINT uk_map_model_range UNIQUE (new_range_id) USING INDEX,
    CONSTRAINT FK_MAP_MODEL_RANGE_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE csrimp.map_model_sheet (
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	old_sheet_id					NUMBER(10)	NOT NULL,
	new_sheet_id					NUMBER(10)	NOT NULL,
	CONSTRAINT pk_map_model_sheet PRIMARY KEY (old_sheet_id) USING INDEX,
	CONSTRAINT uk_map_model_sheet UNIQUE (new_sheet_id) USING INDEX,
    CONSTRAINT FK_MAP_MODEL_SHEET_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE csrimp.map_non_compliance (
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	old_non_compliance_id			NUMBER(10)	NOT NULL,
	new_non_compliance_id			NUMBER(10)	NOT NULL,
	CONSTRAINT pk_map_non_compliance PRIMARY KEY (old_non_compliance_id) USING INDEX,
	CONSTRAINT uk_map_non_compliance UNIQUE (new_non_compliance_id) USING INDEX,
    CONSTRAINT FK_MAP_NON_COMPLIANCE_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE csrimp.map_qs_type (
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	old_quick_survey_type_id		NUMBER(10)	NOT NULL,
	new_quick_survey_type_id		NUMBER(10)	NOT NULL,
	CONSTRAINT pk_map_qs_type PRIMARY KEY (old_quick_survey_type_id) USING INDEX,
	CONSTRAINT uk_map_qs_type UNIQUE (new_quick_survey_type_id) USING INDEX,
    CONSTRAINT FK_MAP_QS_TYPE_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE csrimp.map_qs_survey_response (
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	old_survey_response_id			NUMBER(10)	NOT NULL,
	new_survey_response_id			NUMBER(10)	NOT NULL,
	CONSTRAINT pk_map_survey_response PRIMARY KEY (old_survey_response_id) USING INDEX,
	CONSTRAINT uk_map_survey_response UNIQUE (new_survey_response_id) USING INDEX,
    CONSTRAINT FK_MAP_QS_RESPONSE_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE csrimp.map_qs_response_status (
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	old_qs_response_status_id		NUMBER(10)	NOT NULL,
	new_qs_response_status_id		NUMBER(10)	NOT NULL,
	CONSTRAINT pk_map_qs_response_status PRIMARY KEY (old_qs_response_status_id) USING INDEX,
	CONSTRAINT uk_map_qs_response_status UNIQUE (new_qs_response_status_id) USING INDEX,
    CONSTRAINT FK_MAP_QS_RESP_STATUS_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE csrimp.map_qs_question (
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	old_question_id					NUMBER(10)	NOT NULL,
	new_question_id					NUMBER(10)	NOT NULL,
	CONSTRAINT pk_map_qs_question PRIMARY KEY (old_question_id) USING INDEX,
	CONSTRAINT uk_map_qs_question UNIQUE (new_question_id) USING INDEX,
    CONSTRAINT FK_MAP_QS_QUESTION_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE csrimp.map_qs_custom_question_type (
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	old_custom_question_type_id		NUMBER(10)	NOT NULL,
	new_custom_question_type_id		NUMBER(10)	NOT NULL,
	CONSTRAINT pk_map_qs_cust_quest_type PRIMARY KEY (old_custom_question_type_id) USING INDEX,
	CONSTRAINT uk_map_qs_cust_quest_type UNIQUE (new_custom_question_type_id) USING INDEX,
    CONSTRAINT FK_MAP_QS_CUST_QUEST_TYPE_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE csrimp.map_qs_dimension (
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	old_qs_dimension_id				NUMBER(10)	NOT NULL,
	new_qs_dimension_id				NUMBER(10)	NOT NULL,
	CONSTRAINT pk_map_qs_dimension PRIMARY KEY (old_qs_dimension_id) USING INDEX,
	CONSTRAINT uk_map_qs_dimension UNIQUE (new_qs_dimension_id) USING INDEX,
    CONSTRAINT FK_MAP_QS_DIMENSION_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE csrimp.map_qs_submission (
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	old_submission_id				NUMBER(10)	NOT NULL,
	new_submission_id				NUMBER(10)	NOT NULL,
	CONSTRAINT pk_map_qs_submission PRIMARY KEY (old_submission_id) USING INDEX,
	CONSTRAINT uk_map_qs_submission UNIQUE (new_submission_id) USING INDEX,
    CONSTRAINT FK_MAP_QS_SUBMISSION_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE csrimp.map_score_threshold (
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	old_score_threshold_id			NUMBER(10)	NOT NULL,
	new_score_threshold_id			NUMBER(10)	NOT NULL,
	CONSTRAINT pk_map_score_threshold PRIMARY KEY (old_score_threshold_id) USING INDEX,
	CONSTRAINT uk_map_score_threshold UNIQUE (new_score_threshold_id) USING INDEX,
    CONSTRAINT FK_MAP_SCORE_THRESHOLD_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE csrimp.map_qs_question_option (
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	old_question_option_id			NUMBER(10)	NOT NULL,
	new_question_option_id			NUMBER(10)	NOT NULL,
	CONSTRAINT pk_map_qs_question_option PRIMARY KEY (old_question_option_id) USING INDEX,
	CONSTRAINT uk_map_qs_question_option UNIQUE (new_question_option_id) USING INDEX,
    CONSTRAINT FK_MAP_QS_QUEST_OPT_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE csrimp.map_qs_answer_file (
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	old_qs_answer_file_id			NUMBER(10)	NOT NULL,
	new_qs_answer_file_id			NUMBER(10)	NOT NULL,
	CONSTRAINT pk_map_qs_answer_file PRIMARY KEY (old_qs_answer_file_id) USING INDEX,
	CONSTRAINT uk_map_qs_answer_file UNIQUE (new_qs_answer_file_id) USING INDEX,
    CONSTRAINT FK_MAP_QS_ANS_FILE_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE csrimp.map_qs_expr (
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	old_expr_id						NUMBER(10)	NOT NULL,
	new_expr_id						NUMBER(10)	NOT NULL,
	CONSTRAINT pk_map_quick_survey_expr PRIMARY KEY (old_expr_id) USING INDEX,
	CONSTRAINT uk_map_quick_survey_expr UNIQUE (new_expr_id) USING INDEX,
    CONSTRAINT FK_MAP_QS_EXPR_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE csrimp.map_qs_expr_msg_action (
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	old_qs_expr_msg_action_id		NUMBER(10)	NOT NULL,
	new_qs_expr_msg_action_id		NUMBER(10)	NOT NULL,
	CONSTRAINT pk_map_qs_expr_msg_action PRIMARY KEY (old_qs_expr_msg_action_id) USING INDEX,
	CONSTRAINT uk_map_qs_expr_msg_action UNIQUE (new_qs_expr_msg_action_id) USING INDEX,
    CONSTRAINT FK_MAP_QS_EXPR_MSG_ACTION_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE csrimp.map_qs_expr_nc_action (
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	old_qs_expr_nc_action_id		NUMBER(10)	NOT NULL,
	new_qs_expr_nc_action_id		NUMBER(10)	NOT NULL,
	CONSTRAINT pk_map_qs_expr_nc_action PRIMARY KEY (old_qs_expr_nc_action_id) USING INDEX,
	CONSTRAINT uk_map_qs_expr_nc_action UNIQUE (new_qs_expr_nc_action_id) USING INDEX,
    CONSTRAINT FK_MAP_QS_EXPR_NC_ACTION_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE csrimp.map_qs_expr_status_action (
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	old_qs_expr_status_action_id	NUMBER(10)	NOT NULL,
	new_qs_expr_status_action_id	NUMBER(10)	NOT NULL,
	CONSTRAINT pk_map_qs_expr_status_action PRIMARY KEY (old_qs_expr_status_action_id) USING INDEX,
	CONSTRAINT uk_map_qs_expr_status_action UNIQUE (new_qs_expr_status_action_id) USING INDEX,
    CONSTRAINT FK_MAP_QS_EXPR_STAT_ACTION_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE csrimp.map_region_set (
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	old_region_set_id				NUMBER(10)	NOT NULL,
	new_region_set_id				NUMBER(10)	NOT NULL,
	CONSTRAINT pk_map_region_set PRIMARY KEY (old_region_set_id) USING INDEX,
	CONSTRAINT uk_map_region_set UNIQUE (new_region_set_id) USING INDEX,
    CONSTRAINT FK_MAP_REGION_SET_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

CREATE TABLE csrimp.map_postit (
	CSRIMP_SESSION_ID				NUMBER(10) DEFAULT SYS_CONTEXT('SECURITY', 'CSRIMP_SESSION_ID') NOT NULL,
	old_postit_id			NUMBER(10)	NOT NULL,
	new_postit_id			NUMBER(10)	NOT NULL,
	CONSTRAINT pk_map_postit PRIMARY KEY (old_postit_id) USING INDEX,
	CONSTRAINT uk_map_postit UNIQUE (new_postit_id) USING INDEX,
    CONSTRAINT FK_MAP_POSTIT_IS FOREIGN KEY
    	(CSRIMP_SESSION_ID) REFERENCES CSRIMP.CSRIMP_SESSION (CSRIMP_SESSION_ID)
    	ON DELETE CASCADE
);

grant insert on csr.aggregate_ind_group to csrimp;
grant insert on csr.aggregate_ind_group_member to csrimp;
grant insert on csr.approval_dashboard to csrimp;
grant insert on csr.approval_dashboard_alert_type to csrimp;
grant insert on csr.approval_dashboard_instance to csrimp;
grant insert on csr.approval_dashboard_region to csrimp;
grant insert on csr.approval_dashboard_tab to csrimp;
grant insert on csr.approval_dashboard_tpl_tag to csrimp;
grant insert on csr.audit_log to csrimp;
grant insert on csr.autocreate_user to csrimp;
grant insert on csr.calc_tag_dependency to csrimp;
grant insert on csr.cms_tab_alert_type to csrimp;
grant insert on csr.customer_alert_type_param to csrimp;
grant insert on csr.customer_portlet to csrimp;
grant insert on csr.dashboard to csrimp;
grant insert on csr.dashboard_item to csrimp;
grant insert on csr.dataview_scenario_run to csrimp;
grant insert on csr.dataview_zone to csrimp;
grant insert on csr.deleg_meta_role_ind_selection to csrimp;
grant insert on csr.deleg_plan_survey_region to csrimp;
grant insert on csr.delegation_comment to csrimp;
grant insert on csr.delegation_plugin to csrimp;
grant insert on csr.delegation_tag to csrimp;
grant insert on csr.delegation_user_cover to csrimp;
grant insert on csr.diary_event to csrimp;
grant insert on csr.diary_event_group to csrimp;
grant insert on csr.doc to csrimp;
grant insert on csr.doc_current to csrimp;
grant insert on csr.doc_data to csrimp;
grant insert on csr.doc_download to csrimp;
grant insert on csr.doc_folder to csrimp;
grant insert on csr.doc_folder_subscription to csrimp;
grant insert on csr.doc_library to csrimp;
grant insert on csr.doc_notification to csrimp;
grant insert on csr.doc_subscription to csrimp;
grant insert on csr.doc_version to csrimp;
grant insert on csr.excel_export_options to csrimp;
grant insert on csr.factor_history to csrimp;
grant insert on csr.imp_vocab to csrimp;
grant insert on csr.ind_sel_group_member_desc to csrimp;
grant insert on csr.ind_selection_group to csrimp;
grant insert on csr.ind_selection_group_member to csrimp;
grant insert on csr.internal_audit to csrimp;
grant insert on csr.internal_audit_postit to csrimp;
grant insert on csr.internal_audit_type to csrimp;
grant insert on csr.last_used_measure_conversion to csrimp;
grant insert on csr.model to csrimp;
grant insert on csr.model_instance to csrimp;
grant insert on csr.model_instance_chart to csrimp;
grant insert on csr.model_instance_map to csrimp;
grant insert on csr.model_instance_region to csrimp;
grant insert on csr.model_instance_sheet to csrimp;
grant insert on csr.model_map to csrimp;
grant insert on csr.model_range to csrimp;
grant insert on csr.model_range_cell to csrimp;
grant insert on csr.model_region_range to csrimp;
grant insert on csr.model_sheet to csrimp;
grant insert on csr.model_validation to csrimp;
grant insert on csr.non_compliance to csrimp;
grant insert on csr.non_compliance_expr_action to csrimp;
grant insert on csr.non_compliance_file_upload to csrimp;
grant insert on csr.non_compliance_tag to csrimp;
grant insert on csr.postit to csrimp;
grant insert on csr.postit_file to csrimp;
grant insert on csr.qs_answer_file to csrimp;
grant insert on csr.qs_answer_log to csrimp;
grant insert on csr.qs_campaign to csrimp;
grant insert on csr.qs_custom_question_type to csrimp;
grant insert on csr.qs_dimension to csrimp;
grant insert on csr.qs_dimension_question to csrimp;
grant insert on csr.qs_expr_dependency to csrimp;
grant insert on csr.qs_expr_msg_action to csrimp;
grant insert on csr.qs_expr_nc_action_involve_role to csrimp;
grant insert on csr.qs_expr_non_compl_action to csrimp;
grant insert on csr.qs_expr_status_action to csrimp;
grant insert on csr.qs_filter_by_status to csrimp;
grant insert on csr.qs_filter_condition to csrimp;
grant insert on csr.qs_question_option to csrimp;
grant insert on csr.qs_question_report to csrimp;
grant insert on csr.qs_response_postit to csrimp;
grant insert on csr.qs_response_status to csrimp;
grant insert on csr.qs_submission_file to csrimp;
grant insert on csr.quick_survey to csrimp;
grant insert on csr.quick_survey_answer to csrimp;
grant insert on csr.quick_survey_expr to csrimp;
grant insert on csr.quick_survey_expr_action to csrimp;
grant insert on csr.quick_survey_lang to csrimp;
grant insert on csr.quick_survey_question to csrimp;
grant insert,update on csr.quick_survey_response to csrimp;
grant insert on csr.quick_survey_submission to csrimp;
grant insert on csr.quick_survey_type to csrimp;
grant insert on csr.region_internal_audit to csrimp;
grant insert on csr.region_owner to csrimp;
grant insert on csr.region_set to csrimp;
grant insert on csr.region_set_region to csrimp;
grant insert on csr.region_survey_response to csrimp;
grant insert,update on csr.scenario to csrimp;
grant insert on csr.scenario_ind to csrimp;
grant insert on csr.scenario_options to csrimp;
grant insert on csr.scenario_region to csrimp;
grant insert on csr.scenario_rule to csrimp;
grant insert on csr.scenario_rule_ind to csrimp;
grant insert on csr.scenario_rule_like_contig_ind to csrimp;
grant insert on csr.scenario_rule_region to csrimp;
grant insert on csr.scenario_run to csrimp;
grant insert on csr.scenario_run_val to csrimp;
grant insert on csr.score_threshold to csrimp;
grant insert on csr.tab to csrimp;
grant insert on csr.tab_group to csrimp;
grant insert on csr.tab_portlet to csrimp;
grant insert on csr.tab_portlet_rss_feed to csrimp;
grant insert on csr.tab_portlet_user_region to csrimp;
grant insert on csr.tab_user to csrimp;
grant insert on csr.target_dashboard to csrimp;
grant insert on csr.target_dashboard_ind_member to csrimp;
grant insert on csr.target_dashboard_value to csrimp;
grant insert on csr.template to csrimp;
grant insert on csr.tpl_img to csrimp;
grant insert on csr.tpl_rep_cust_tag_type to csrimp;
grant insert on csr.tpl_report to csrimp;
grant insert on csr.tpl_report_tag to csrimp;
grant insert on csr.tpl_report_tag_dataview to csrimp;
grant insert on csr.tpl_report_tag_dv_region to csrimp;
grant insert on csr.tpl_report_tag_eval to csrimp;
grant insert on csr.tpl_report_tag_eval_cond to csrimp;
grant insert on csr.tpl_report_tag_ind to csrimp;
grant insert on csr.tpl_report_tag_logging_form to csrimp;
grant insert on csr.tpl_report_tag_text to csrimp;
grant insert on csr.trash to csrimp;
grant insert on csr.user_cover to csrimp;
grant insert on csr.user_setting_entry to csrimp;

grant select,insert,update,delete on csrimp.approval_dashboard to web_user;
grant select,insert,update,delete on csrimp.approval_dashboard_alert_type to web_user;
grant select,insert,update,delete on csrimp.approval_dashboard_instance to web_user;
grant select,insert,update,delete on csrimp.approval_dashboard_region to web_user;
grant select,insert,update,delete on csrimp.approval_dashboard_tab to web_user;
grant select,insert,update,delete on csrimp.approval_dashboard_tpl_tag to web_user;
grant select,insert,update,delete on csrimp.customer_portlet to web_user;
grant select,insert,update,delete on csrimp.tab to web_user;
grant select,insert,update,delete on csrimp.tab_group to web_user;
grant select,insert,update,delete on csrimp.tab_portlet to web_user;
grant select,insert,update,delete on csrimp.tab_portlet_rss_feed to web_user;
grant select,insert,update,delete on csrimp.tab_portlet_user_region to web_user;
grant select,insert,update,delete on csrimp.tab_user to web_user;
grant select,insert,update,delete on csrimp.tpl_img to web_user;
grant select,insert,update,delete on csrimp.tpl_rep_cust_tag_type to web_user;
grant select,insert,update,delete on csrimp.tpl_report to web_user;
grant select,insert,update,delete on csrimp.tpl_report_tag to web_user;
grant select,insert,update,delete on csrimp.tpl_report_tag_dataview to web_user;
grant select,insert,update,delete on csrimp.tpl_report_tag_dv_region to web_user;
grant select,insert,update,delete on csrimp.tpl_report_tag_eval to web_user;
grant select,insert,update,delete on csrimp.tpl_report_tag_eval_cond to web_user;
grant select,insert,update,delete on csrimp.tpl_report_tag_ind to web_user;
grant select,insert,update,delete on csrimp.tpl_report_tag_logging_form to web_user;
grant select,insert,update,delete on csrimp.tpl_report_tag_text to web_user;
grant select,insert,update,delete on csrimp.trash to web_user;
grant select,insert,update,delete on csrimp.user_setting_entry to web_user;
grant select,insert,update,delete on csrimp.aggregate_ind_group to web_user;
grant select,insert,update,delete on csrimp.aggregate_ind_group_member to web_user;
grant select,insert,update,delete on csrimp.calc_tag_dependency to web_user;
grant select,insert,update,delete on csrimp.dashboard to web_user;
grant select,insert,update,delete on csrimp.dashboard_item to web_user;
grant select,insert,update,delete on csrimp.dataview_scenario_run to web_user;
grant select,insert,update,delete on csrimp.dataview_zone to web_user;
grant select,insert,update,delete on csrimp.deleg_meta_role_ind_selection to web_user;
grant select,insert,update,delete on csrimp.deleg_plan_survey_region to web_user;
grant select,insert,update,delete on csrimp.delegation_comment to web_user;
grant select,insert,update,delete on csrimp.delegation_plugin to web_user;
grant select,insert,update,delete on csrimp.delegation_tag to web_user;
grant select,insert,update,delete on csrimp.delegation_user_cover to web_user;
grant select,insert,update,delete on csrimp.diary_event to web_user;
grant select,insert,update,delete on csrimp.diary_event_group to web_user;
grant select,insert,update,delete on csrimp.doc to web_user;
grant select,insert,update,delete on csrimp.doc_current to web_user;
grant select,insert,update,delete on csrimp.doc_data to web_user;
grant select,insert,update,delete on csrimp.doc_download to web_user;
grant select,insert,update,delete on csrimp.doc_folder to web_user;
grant select,insert,update,delete on csrimp.doc_folder_subscription to web_user;
grant select,insert,update,delete on csrimp.doc_library to web_user;
grant select,insert,update,delete on csrimp.doc_notification to web_user;
grant select,insert,update,delete on csrimp.doc_subscription to web_user;
grant select,insert,update,delete on csrimp.doc_version to web_user;
grant select,insert,update,delete on csrimp.excel_export_options to web_user;
grant select,insert,update,delete on csrimp.factor_history to web_user;
grant select,insert,update,delete on csrimp.imp_vocab to web_user;
grant select,insert,update,delete on csrimp.ind_sel_group_member_desc to web_user;
grant select,insert,update,delete on csrimp.ind_selection_group to web_user;
grant select,insert,update,delete on csrimp.ind_selection_group_member to web_user;
grant select,insert,update,delete on csrimp.internal_audit to web_user;
grant select,insert,update,delete on csrimp.internal_audit_postit to web_user;
grant select,insert,update,delete on csrimp.internal_audit_type to web_user;
grant select,insert,update,delete on csrimp.last_used_measure_conversion to web_user;
grant select,insert,update,delete on csrimp.model to web_user;
grant select,insert,update,delete on csrimp.model_instance to web_user;
grant select,insert,update,delete on csrimp.model_instance_chart to web_user;
grant select,insert,update,delete on csrimp.model_instance_map to web_user;
grant select,insert,update,delete on csrimp.model_instance_region to web_user;
grant select,insert,update,delete on csrimp.model_instance_sheet to web_user;
grant select,insert,update,delete on csrimp.model_map to web_user;
grant select,insert,update,delete on csrimp.model_range to web_user;
grant select,insert,update,delete on csrimp.model_range_cell to web_user;
grant select,insert,update,delete on csrimp.model_region_range to web_user;
grant select,insert,update,delete on csrimp.model_sheet to web_user;
grant select,insert,update,delete on csrimp.model_validation to web_user;
grant select,insert,update,delete on csrimp.non_compliance to web_user;
grant select,insert,update,delete on csrimp.non_compliance_expr_action to web_user;
grant select,insert,update,delete on csrimp.non_compliance_file_upload to web_user;
grant select,insert,update,delete on csrimp.non_compliance_tag to web_user;
grant select,insert,update,delete on csrimp.postit to web_user;
grant select,insert,update,delete on csrimp.postit_file to web_user;
grant select,insert,update,delete on csrimp.qs_answer_file to web_user;
grant select,insert,update,delete on csrimp.qs_answer_log to web_user;
grant select,insert,update,delete on csrimp.qs_campaign to web_user;
grant select,insert,update,delete on csrimp.qs_custom_question_type to web_user;
grant select,insert,update,delete on csrimp.qs_dimension to web_user;
grant select,insert,update,delete on csrimp.qs_dimension_question to web_user;
grant select,insert,update,delete on csrimp.qs_expr_dependency to web_user;
grant select,insert,update,delete on csrimp.qs_expr_msg_action to web_user;
grant select,insert,update,delete on csrimp.qs_expr_nc_action_involve_role to web_user;
grant select,insert,update,delete on csrimp.qs_expr_non_compl_action to web_user;
grant select,insert,update,delete on csrimp.qs_expr_status_action to web_user;
grant select,insert,update,delete on csrimp.qs_filter_by_status to web_user;
grant select,insert,update,delete on csrimp.qs_filter_condition to web_user;
grant select,insert,update,delete on csrimp.qs_question_option to web_user;
grant select,insert,update,delete on csrimp.qs_question_report to web_user;
grant select,insert,update,delete on csrimp.qs_response_postit to web_user;
grant select,insert,update,delete on csrimp.qs_response_status to web_user;
grant select,insert,update,delete on csrimp.qs_submission_file to web_user;
grant select,insert,update,delete on csrimp.quick_survey to web_user;
grant select,insert,update,delete on csrimp.quick_survey_answer to web_user;
grant select,insert,update,delete on csrimp.quick_survey_expr to web_user;
grant select,insert,update,delete on csrimp.quick_survey_expr_action to web_user;
grant select,insert,update,delete on csrimp.quick_survey_lang to web_user;
grant select,insert,update,delete on csrimp.quick_survey_question to web_user;
grant select,insert,update,delete on csrimp.quick_survey_response to web_user;
grant select,insert,update,delete on csrimp.quick_survey_submission to web_user;
grant select,insert,update,delete on csrimp.quick_survey_type to web_user;
grant select,insert,update,delete on csrimp.region_internal_audit to web_user;
grant select,insert,update,delete on csrimp.region_owner to web_user;
grant select,insert,update,delete on csrimp.region_set to web_user;
grant select,insert,update,delete on csrimp.region_set_region to web_user;
grant select,insert,update,delete on csrimp.region_survey_response to web_user;
grant select,insert,update,delete on csrimp.scenario to web_user;
grant select,insert,update,delete on csrimp.scenario_ind to web_user;
grant select,insert,update,delete on csrimp.scenario_options to web_user;
grant select,insert,update,delete on csrimp.scenario_region to web_user;
grant select,insert,update,delete on csrimp.scenario_rule to web_user;
grant select,insert,update,delete on csrimp.scenario_rule_ind to web_user;
grant select,insert,update,delete on csrimp.scenario_rule_like_contig_ind to web_user;
grant select,insert,update,delete on csrimp.scenario_rule_region to web_user;
grant select,insert,update,delete on csrimp.scenario_run to web_user;
grant select,insert,update,delete on csrimp.scenario_run_val to web_user;
grant select,insert,update,delete on csrimp.score_threshold to web_user;
grant select,insert,update,delete on csrimp.target_dashboard to web_user;
grant select,insert,update,delete on csrimp.target_dashboard_ind_member to web_user;
grant select,insert,update,delete on csrimp.target_dashboard_value to web_user;
grant select,insert,update,delete on csrimp.template to web_user;
grant select,insert,update,delete on csrimp.user_cover to web_user;
grant select,insert,update,delete on csrimp.autocreate_user to web_user;
grant select,insert,update,delete on csrimp.audit_log to web_user;
grant select,insert,update,delete on csrimp.customer_alert_type_param to web_user;
grant select,insert,update,delete on csrimp.cms_tab_alert_type to web_user;


grant select on csr.aggregate_ind_group_id_seq to csrimp;
grant select on csr.custom_question_type_id_seq to csrimp;
grant select on csr.dashboard_instance_id_seq to csrimp;
grant select on csr.dashboard_item_id_seq to csrimp;
grant select on csr.dataview_zone_id_seq to csrimp;
grant select on csr.deleg_plan_col_survey_id_seq to csrimp;
grant select on csr.doc_id_seq to csrimp;
grant select on csr.doc_data_id_seq to csrimp;
grant select on csr.doc_notification_id_seq to csrimp;
grant select on csr.expr_id_seq to csrimp;
grant select on csr.factor_id_seq to csrimp;
grant select on csr.internal_audit_type_id_seq to csrimp;
grant select on csr.model_range_id_seq to csrimp;
grant select on csr.non_compliance_id_seq to csrimp;
grant select on csr.postit_id_seq to csrimp;
grant select on csr.postit_file_id_seq to csrimp;
grant select on csr.qs_answer_file_id_seq to csrimp;
grant select on csr.qs_answer_log_id_seq to csrimp;
grant select on csr.qs_dimension_id_seq to csrimp;
grant select on csr.qs_expr_action_id_seq to csrimp;
grant select on csr.qs_expr_nc_action_id_seq to csrimp;
grant select on csr.qs_expr_status_action_id_seq to csrimp;
grant select on csr.qs_question_option_id_seq to csrimp;
grant select on csr.qs_question_report_id_seq to csrimp;		   
grant select on csr.qs_response_status_id_seq to csrimp;
grant select on csr.qs_submission_id_seq to csrimp;
grant select on csr.question_id_seq to csrimp;
grant select on csr.quick_survey_type_id_seq to csrimp;
grant select on csr.region_set_id_seq to csrimp;
grant select on csr.score_threshold_id_seq to csrimp;
grant select on csr.survey_response_id_seq to csrimp;
grant select on csr.tab_id_seq to csrimp;
grant select on csr.tab_portlet_id_seq to csrimp;
grant select on csr.tpl_report_tag_dataview_id_seq to csrimp;
grant select on csr.tpl_report_tag_eval_id_seq to csrimp;
grant select on csr.tpl_report_tag_ind_id_seq to csrimp;
grant select on csr.tpl_report_tag_logging_frm_seq to csrimp;
grant select on csr.tpl_report_tag_text_id_seq to csrimp;
grant select on csr.user_cover_id_seq to csrimp;

@../schema_pkg
@../schema_body
@../csrimp/imp_pkg
@../csrimp/imp_body

@update_tail
