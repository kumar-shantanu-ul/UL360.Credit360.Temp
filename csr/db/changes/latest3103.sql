-- Please update version.sql too -- this keeps clean builds in sync
define version=3103
define minor_version=0
@update_header

SET SERVEROUTPUT ON SIZE UNLIMITED

-- *** DDL ***
-- Create tables

-- Alter tables
declare
	v_ver mail.version.db_version%type;
begin
	select db_version into v_ver from mail.version;
	if v_ver not in (34, 35) then
		raise_application_Error(-20001, 'expected mail.version to be 34 or 35');
	end if;
	update mail.version set db_version=35 where db_version=34;
end;
/
	

BEGIN
	FOR r IN (
		SELECT owner, table_name, constraint_name
		  FROM all_constraints
		 WHERE r_owner = 'CSR' AND r_constraint_name = 'PK_METER_READING_OLD'
	) LOOP
		dbms_output.put_line('ALTER TABLE '||r.owner||'.'||r.table_name||' DROP CONSTRAINT '||r.constraint_name);
		EXECUTE IMMEDIATE 'ALTER TABLE '||r.owner||'.'||r.table_name||' DROP CONSTRAINT '||r.constraint_name;
	END LOOP;
END;
/

begin
	for r in (select owner, table_name from all_tables where (owner, table_name) in (
('SECURITY','FB38501'),
('SECURITY','NO_APP'),
('SECURITY','NULL_APP_SID'),
('SECURITY','WHOOPS'),
('MAIL','ACCOUNT_ID_MAP'),
('MAIL','BACKUP_MAILBOX_MESSAGE'),
('MAIL','BOTB_PLAYER'),
('MAIL','CREATE$JAVA$LOB$TABLE'),
('MAIL','DONE_MESSAGE'),
('MAIL','FOO'),
('MAIL','FULLTEXT_INDEX'),
('MAIL','FULLTEXT_INDEX_JOB'),
('MAIL','MAILBOX_SID_MAP'),
('MAIL','MESSAGE_STAT'),
('MAIL','MESSAGE_STAT2'),
('MAIL','T'),
('ABINBEV','XX_ACTION_PLAN'),
('ABINBEV','XX_CERTIFY_LICENSE'),
('ABINBEV','XX_PERMITS'),
('ABINBEV','XX_PERMIT_CURRENCY'),
('ABINBEV','XX_PERMIT_FILE'),
('ABINBEV','XX_PERMIT_RELATED_TO'),
('ABINBEV','XX_PERMIT_TYPE'),
('ABINBEV','XX_STATUS_OF_PERMIT'),
('ABINBEV','XX_YES_NO'),
('AIRLIQUIDE','XX_AIRLIQUIDE_IMP'),
('BARCLAYS','OLD_WASTE_DOC'),
('BARCLAYS','OLD_WASTE_MATRIX'),
('BARCLAYS_CLONE','OLD_WASTE_DOC'),
('BARCLAYS_CLONE','OLD_WASTE_MATRIX'),
('BARCLAYS_PILOT','OLD_WASTE_DOC'),
('BARCLAYS_PILOT','OLD_WASTE_MATRIX'),
('BARCLAYS_PILOT_NEW','OLD_WASTE_DOC'),
('BARCLAYS_PILOT_NEW','OLD_WASTE_MATRIX'),
('BARCTEST','OLD_WASTE_DOC'),
('BARCTEST','OLD_WASTE_MATRIX'),
('BARIMP','XX_R'),
('BARIMP','XX_V'),
('BIDVESTOLD','XX_BV'),
('BIOGEN','FB83587'),
('BIOGENBACKUP','FB83587'),
('BIOGENCOPY','FB83587'),
('BIOGEN_BACKUP2017','FB83587'),
('BIOGEN_COPY','FB83587'),
('BIOGEN_TEST','FB83587'),
('BIOGEN_TEST','FB92431'),
('BOMA','XX_IMP_CERTS'),
('CASA','OLD_ORGA'),
('CASAUAT2','OLD_ORGA'),
('CASAUAT2','XX_IFIH'),
('CASAUAT2','XX_ORGA_REGION'),
('CBRE','FB48663_SITE'),
('CBRE','XX_FUND'),
('CBRE','XX_FUND_MGMT_CONTACT'),
('CBRE','XX_JOSE'),
('CBRE','XX_MGMT_CMP_CONTACT_MAP'),
('CBRE','XX_MGMT_COMPANY'),
('CBRE','XX_MGMT_COMPANY_CONTACT'),
('CBRE','XX_MGMT_COMPANY_FUND_CONTACT'),
('CBRE','XX_MGMT_COMPANY_MAP'),
('CBRE','XX_PROPERTY'),
('CENTRICA','FB78047_SCENARIO_REGION_PCT'),
('CENTRICA_SANDBOX','FB78047_SCENARIO_REGION_PCT'),
('CERMAQ','NON_COMPLIANCE_BACKUP'),
('CHAIN','XXX_FB33790_BAK'),
('CHAIN','XXX_INV_ON_BEHLF_OF_BCK'),
('CHAIN','XXX_REFERENCE_ID_LABEL'),
('CHAIN','XX_CAPABILITY'),
('CHAIN','XX_COMPONENT_RELATIONSHIP'),
('CHAIN','XX_FB30585_MSG_RECIP'),
('CHAIN','XX_FB30585_QNR'),
('CHAIN','XX_FB30585_QNR_SHARE'),
('CHAIN','XX_FB30585_QNR_SHARE_LOG'),
('CHAIN','XX_FB30585_QNR_STATE_LOG'),
('CHAIN','XX_FB32580'),
('CHAIN','XX_PRODUCT_METRIC'),
('CHEM','CAS_BACKUP'),
('CHEM','CAS_RESTRICTED_BACKUP'),
('CHEM','SUBSTANCE_REGION_BACKUP'),
('CHEM','XX_NEW_AC2M'),
('CHEM','XX_OBS'),
('CHEM','XX_TO_KILL'),
('CHEM','XX_TO_KILL_2'),
('CHEMCOPY','XX_NEW_AC2M'),
('CHEMCOPY','XX_OBS'),
('CHEMCOPY','XX_TO_KILL'),
('CHEMCOPY','XX_TO_KILL_2'),
('CMS','XXX_FILTER_BACKUP'),
('CORNING','XX_CORNING_IMP'),
('CREDITAGRICOLE','OLD_ORGA'),
('CREDITAGRICOLE','XX_IFIH'),
('CREDITAGRICOLE','XX_ORGA_REGION'),
('CREDITAGRICOLEUAT','OLD_ORGA'),
('CREDITAGRICOLEUAT','XX_IFIH'),
('CREDITAGRICOLEUAT','XX_ORGA_REGION'),
('CREDITAGRICOLEUAT3','OLD_ORGA'),
('CREDITAGRICOLEUAT3','XX_IFIH'),
('CREDITAGRICOLEUAT3','XX_ORGA_REGION'),
('CREDITAGRICOLEUAT4','OLD_ORGA'),
('CREDITAGRICOLEUAT4','XX_IFIH'),
('CREDITAGRICOLEUAT4','XX_ORGA_REGION'),
('CSR','ARGH'),
('CSR','BATCH_JOB_OLD'),
('CSR','BC_CACHE_TAGGP_MANDATORY'),
('CSR','DB_FACTOR_BACKUP'),
('CSR','DUFF_IND_START_POINT'),
('CSR','DUFF_DATA'),
('CSR','EST_OLD_BLD_METRIC_MAPPING'),
('CSR','EST_OLD_WATER_USE_MAPPING'),
('CSR','FB58409_2'),
('CSR','FB61473'),
('CSR','FB61495_NW_PACK'),
('CSR','FB61495_SIV'),
('CSR','FB61495_SIV_2'),
('CSR','FB61495_SV'),
('CSR','FB61495_SVC'),
('CSR','FB62950'),
('CSR','FB87487_IMP_VAL'),
('CSR','FB87487_REGION_METRIC_REGION'),
('CSR','FB87487_REGION_METRIC_VAL'),
('CSR','JAMEST_NESTLE_METRIC_VAL_BK'),
('CSR','LINDE_OLD_VAL'),
('CSR','METER_LIVE_DATA_OLD'),
('CSR','METER_ORPHAN_DATA_OLD'),
('CSR','METER_READING_DATA_OLD'),
('CSR','METER_READING_OLD'),
('CSR','METER_SOURCE_DATA_OLD'),
('CSR','RANGE_IND_MEMBER_FB4194'),
('CSR','SHEET_FB19325'),
('CSR','XX_AXA'),
('CSR','XX_CALC_DEPENDENCY'),
('CSR','XX_CASA_LIVE'),
('CSR','XX_CASA_UAT'),
('CSR','XX_CAS_UPD'),
('CSR','XX_DELEGATION_LAYOUT'),
('CSR','XX_IND'),
('CSR','XX_IND_DESCRIPTION'),
('CSR','XX_LAST_USED_MEASURE_CONV'),
('CSR','XX_LIGHTING_MAPPING'),
('CSR','XX_LUMILEDS_MAPPING'),
('CSR','XX_MODEL_MAP'),
('CSR','XX_MSG'),
('CSR','XX_REG'),
('CSR','XX_SID_MAP'),
('CSR','XX_SIV_FIX'),
('CSR','XX_VALE_MEASURE'),
('CSR','XX_WASTE'),
('CSR','BLX'),
('CSR','BOB'),
('CSR','CASA_TR'),
('CSR','CERMAQ_DELEG'),
('CSR','CR360DEMOVERSION'),
('CSR','DAVID_TEMP'),
('CSR','DBLOC'),
('CSR','DBLOC_SHORT'),
('CSR','DJSI_MAP'),
('CSR','DTX'),
('CSR','EST_ERROR_XXX'),
('CSR','EST_NEW_TYPE_MAP'),
('CSR','EST_NEW_UOM_MAP'),
('CSR','FERNEDEMO_MENU'),
('CSR','FFS2'),
('CSR','FFS3'),
('CSR','FIEP_PREFIX'),
('CSR','FOO'),
('CSR','GP_BAD_SID_MAPPING_NAMES'),
('CSR','GP_CATEGORY_TYPE_KEY_MAP'),
('CSR','GP_COLLECTION_TYPE_KEY_MAP'),
('CSR','GP_CONV_MAPPING'),
('CSR','GP_FAILED_LOOKUP_LOG'),
('CSR','GP_IND_MAPPING'),
('CSR','GP_IND_TYPE_KEY_MAP'),
('CSR','GP_LOGON_CONTEXT'),
('CSR','GP_METERFLOOR_NEW_SID_LOG'),
('CSR','GP_METER_CONV_MAPPING'),
('CSR','GP_METER_CREATE'),
('CSR','GP_METER_IND_MAPPING'),
('CSR','GP_METRIC_IND_MAPPING'),
('CSR','GP_NEW_SID_LOG'),
('CSR','GP_PROPERTY_CHAR_IMPORT'),
('CSR','GP_PROPERTY_POSTCODE'),
('CSR','GP_PURCHASE_TYPE_KEY_MAP'),
('CSR','GP_SID_MAPPING'),
('CSR','GP_SPACE_TAG_MAPPING'),
('CSR','GP_TEMP_CONVERTED_VALUES'),
('CSR','GP_TEMP_VAL'),
('CSR','GP_WASTE_MAPPING'),
('CSR','GREENPRINT_CLEANED_BUILDINGS'),
('CSR','HSBC_SIV_FIX'),
('CSR','IDS'),
('CSR','IMIX'),
('CSR','IMI_DEAD'),
('CSR','IMI_DELEG'),
('CSR','IMI_DELEG_2'),
('CSR','IMI_SHEET'),
('CSR','IMI_TRAINING'),
('CSR','JAMEST_CHANGED'),
('CSR','JAMEST_NESTLE_METRIC_VAL_BK'),
('CSR','JAMEST_TEMP_ABINBEV_GENERAL'),
('CSR','JAMEST_TEMP_ABINBEV_INJURY'),
('CSR','JAMEST_TEMP_ABINBEV_QUALITY'),
('CSR','JAMEST_TEMP_ABINBEV_SEC'),
('CSR','JAMEST_TEMP_NESTLE'),
('CSR','JAMEST_TEMP_VESTAS'),
('CSR','JOB_PROG_ID'),
('CSR','KWS_DELEG'),
('CSR','LEE'),
('CSR','LINDE_DELEG'),
('CSR','LINDE_IND_AFTER_FIXES'),
('CSR','LINDE_IND_BEFORE_FIXES'),
('CSR','LINDE_OLD_VAL'),
('CSR','LINDE_R'),
('CSR','LINDE_VAL_AFTER_RECOMP_1'),
('CSR','LOGICA_FLUFF'),
('CSR','LOGICA_IS_IND'),
('CSR','LOGICA_IS_IND_FLAG'),
('CSR','LOGICA_IS_SHEET_VALUE'),
('CSR','LOGICA_IS_SHEET_VALUE_CHANGE'),
('CSR','LOGICA_SHEET_VAL_FILE_PRE_NOTE'),
('CSR','LOGICA_SHEET_VAL_PRE_NOTE'),
('CSR','LSE_METER_IMPORT_GRID'),
('CSR','LSE_METER_IMPORT_LINEAR'),
('CSR','MATTEL_USER'),
('CSR','MX'),
('CSR','P2'),
('CSR','PH_ACTIVE'),
('CSR','PR'),
('CSR','QQ'),
('CSR','SCJ_GRONTMIJ_BUG'),
('CSR','SCOTENT_TEMP_SUPPLIER'),
('CSR','SEGRO_DELEG'),
('CSR','SHEET_FB19325'),
('CSR','SHEET_HISTORY_X'),
('CSR','SHEET_VALUE_CHANGE_X'),
('CSR','SHEET_VALUE_X'),
('CSR','STAPLES_ABBR_MAP'),
('CSR','STD_FACTOR_SET_7'),
('CSR','STGTAB'),
('CSR','STK_CHK'),
('CSR','STP_IMP'),
('CSR','SWR'),
('CSR','T'),
('CSR','TIFF_BUST_STORED_CALC'),
('CSR','TMP_AVIVA_DON_SCH_FIELD'),
('CSR','TO_CHECK'),
('CSR','TO_FIX'),
('CSR','WBG_REVERT'),
('CSR','WHISTLER_FIX'),
('CSR','X2'),
('CSR','X3'),
('CSR','XH'),
('DEVOPS','FB48281_QS_ANSWER'),
('DEVOPS','FB48281_QS_QUESTION'),
('DEVOPS','FB48281_QS_QUEST_OPTION'),
('DEVOPS','FB48281_QS_SUBMISSION'),
('DEVOPS','FB48281_SUPPLIER_SCORE'),
('DEVOPS','FB52710_DELEG_REGION'),
('DEVOPS','FB52710_MASTER_DELEG'),
('DEVOPS','FB52793_DEL_REGIONROLEMEMBER'),
('DEVOPS','FB61665_RETIRED_REGIONTAGS'),
('DEVOPS','FB64215_ROUTE'),
('DEVOPS','FB64215_SECTION_CART_MEMBER'),
('DEVOPS','XX_BARCLAYS_FACTOR'),
('DONATIONS','FB8685_MERGE'),
('DONATIONS','FB9478'),
('DONATIONS','XX_FB15515_DONATION'),
('DONATIONS','XX_FB15515_DONATION_DOC'),
('DONATIONS','XX_FB15515_DONATION_TAG'),
('DONATIONS','XX_FB15515_RECIPIENT'),
('DONATIONS','XX_FB15515_RECIPIENT_POSTIT'),
('DONATIONS','XX_FB15515_RECIPIENT_TAG'),
('ECOVA','IMP_SITE_BACKUP'),
('ECOVA','IMP_VAL_BACKUP'),
('ENERGYWHOLESALE','WASTE_IMP_OLD'),
('ETHICS','OLD_COURSE'),
('EWOS','NON_COMPLIANCE_BACKUP'),
('GPTEST','XX_GP_ACTIVE'),
('GREENPRINT','XX_GP_ACTIVE'),
('GSK','FB68060_INCIDENT'),
('GSK','FB82545_INCIDENT_B'),
('GSK','FB82545_INCIDENT_BEHAVIOUR_B'),
('GSK','FB82545_INCIDENT_CONDITION_B'),
('GSK','FB82545_INCIDENT_NATURE_B'),
('GSK','FB82545_INCIDENT_PPE_B'),
('GSK','FB82545_INCIDENT_RESULT_B'),
('GSK','FB82545_LOST_TIME_B'),
('GSK','FB82545_RESTRICTED_DAYS_B'),
('GSK','OLD_INCIDENT'),
('GSK','XXX_DELETE_INCIDENT'),
('GSK','XXX_FLOW_ITEMS_TO_DELETE'),
('GSKTESTTWO','FB68060_INCIDENT'),
('HEINEKEN','XX_FRIDGE'),
('HEINEKENSPM','XX_MALT_TYPE'),
('HM','XX_HM_R'),
('HTW','JOB_TITLE_OLD'),
('JLLPILOT','XXX_E'),
('LIGHTING','XX_LOGISTICS_AIRPORT'),
('LIGHTING','XX_M'),
('LIGHTING','XX_REGION_MAP'),
('LIGHTING','XX_WASTE'),
('LINDE','XX_SHEET_VALUE_BACKUP'),
('LINDE','XX_VAL_BACKUP'),
('LUMILEDS','XX_LOGISTICS_AIRPORT'),
('LUMILEDS','XX_M'),
('LUMILEDS','XX_REGION_MAP'),
('LUMILEDS','XX_WASTE'),
('MAERSK','XXX_32429_AFFECTED_SUPPLIERS'),
('MAERSK','XXX_32429_CHANGED_STATUS'),
('MAERSK','XXX_32429_OLD_VALUES'),
('MAERSK','XXX_56074_CHANGED_TASK_FILE'),
('MAERSK','XXX_56074_DELETED_TASK'),
('MAERSK','XXX_56074_DELETED_TASK_TYPE'),
('MAERSK','XXX_56074_INSERTED_TASKS'),
('MAERSK','XXX_56074_INSERTED_TASK_ENTRY'),
('MAERSK','XXX_56074_OLD_TASK'),
('MAERSK','XXX_56074_TASK_NEW_TASK'),
('MAERSK','XXX_56074_TASK_NEW_VALUES'),
('MAERSK','XXX_56074_TASK_OLD_VALUES'),
('MAERSK','XXX_FB32429_TIQT'),
('MAERSK','XX_SEND_SURVEY_BATCH'),
('MARK','DSM_IND_BACKUP'),
('MARK','OLD_TAB'),
('MARKSANDSPENCER','XX_CURRENT_SUPPLIER_SCORE'),
('MARKSANDSPENCER','XX_NEW_CURRENT_SUPPLIER_SCORE'),
('MARKSANDSPENCER','XX_NEW_SUPPLIER_SCORE_LOG'),
('MARKSANDSPENCER','XX_QUICK_SURVEY_SUBMISSION'),
('MARKSANDSPENCER','XX_SUPPLIER_SCORE_LOG'),
('MATTEL','FB30304_BACKUP'),
('MCDSC','XXX_RESTORED_TAB'),
('MCDSC','XXX_RESTORED_TAB_PORTLET'),
('MCDSC','XX_TMP_IMPORT_USERS'),
('MCDSCSTAGE','XXX_RESTORED_TAB'),
('MCDSCSTAGE','XXX_RESTORED_TAB_PORTLET'),
('MCDSCSTAGE','XX_TMP_IMPORT_USERS'),
('MCDSCTRAIN','XXX_RESTORED_TAB'),
('MCDSCTRAIN','XXX_RESTORED_TAB_PORTLET'),
('MCDSCTRAIN','XX_TMP_IMPORT_USERS'),
('MCDSC_STAGE2','XXX_RESTORED_TAB'),
('MCDSC_STAGE2','XXX_RESTORED_TAB_PORTLET'),
('MCDSC_STAGE2','XX_TMP_IMPORT_USERS'),
('MS_IMPORT','XX_UPDATED_CONTACTS'),
('MS_IMPORT','XX_UPDATED_CONTACTS2'),
('NESTLE','NW_PACK_FB58439'),
('NESTLE','NW_PACK_FB58964'),
('NESTLE','NW_PACK_FB59234'),
('NESTLE','NW_PACK_FB59287'),
('NOKIA','FB82574_GREEN'),
('NOKIA','FB82574_REAL'),
('NOKIA','FB82836_GREEN'),
('NOKIA','REAL_FB59285'),
('NR','XXX_SITE_CLASS_SLCTBL_LINK'),
('OTTO_SUPPLYCHAIN','FB70731_SUPPLIER_REL'),
('OTTO_SUPPLYCHAIN','OLD_IMP_SUPPLIER_LKZ'),
('OTTO_SUPPLYCHAIN','XXX_IMP_SUPPLIER_LKZ'),
('PHILIPS','PROPERTY_OLD'),
('PHILIPS','XX_LOGISTICS_AIRPORT'),
('PHILIPS','XX_M'),
('PHILIPS','XX_REGION_MAP'),
('PHILIPS','XX_WASTE'),
('PLIGHTING','XX_LOGISTICS_AIRPORT'),
('PLIGHTING','XX_M'),
('PLIGHTING','XX_REGION_MAP'),
('PLIGHTING','XX_WASTE'),
('PLUMILEDS','XX_LOGISTICS_AIRPORT'),
('PLUMILEDS','XX_M'),
('PLUMILEDS','XX_REGION_MAP'),
('PLUMILEDS','XX_WASTE'),
('REIT','XXX_E'),
('RFA','XX_PROD_CERT_DOCUMENT'),
('RFA','XX_PROD_NOTE_DOCUMENT'),
('SECURITY','FB38501'),
('SHEPMPP','NW_PACK_FB58439'),
('SHEPMPP','NW_PACK_FB58964'),
('SHEPMPP','NW_PACK_FB59234'),
('SHEPMPP','NW_PACK_FB59287'),
('STAPLES','XXX_STP_REGION'),
('STARBUCKS','XX_LOAN'),
('STARBUCKS','XX_LOCATIONS_B4_UPSERT'),
('STARBUCKS','XX_REMOVED_LOCATIONS'),
('SURVEY','RESOURCE_BACKUP'),
('UNIMED','FB61883'),
('UPD','FB13043_DIFF'),
('UPD','FB13043_SHEET_VALUE'),
('UPD','FB13043_SHEET_VALUE_2'),
('UPD','FB15366'),
('UPD','FB18820_OVERLAP'),
('UPD','FB27293_SAB_MILLER'),
('UPD','FB36632_SECTION_MODULE'),
('UPD','FB36756_ADDED'),
('UPD','FB36756_DELETED'),
('UPD','FB38392'),
('UPD','FB41532'),
('UPD','FB42815_DATAVIEW_IND_DESC'),
('UPD','FB42815_DATAVIEW_RGN_DESC'),
('UPD','FB44167'),
('UPD','FB44588_DELEGATION'),
('UPD','FB44588_DELEGATION_REGION'),
('UPD','FB44588_DELEGATION_ROLE'),
('UPD','FB44588_DELEGATION_USER'),
('UPD','FB44588_SHEET'),
('UPD','FB44588_SHEET_ALERT'),
('UPD','FB44588_SHEET_HISTORY'),
('UPD','FB44588_SHEET_VALUE'),
('UPD','FB44588_SHEET_VALUE_CHANGE'),
('UPD','FB44588_SHEET_VALUE_FILE'),
('UPD','FB4682'),
('UPD','FB48281_QS_ANSWER'),
('UPD','FB48281_QS_QUESTION'),
('UPD','FB48281_QS_QUEST_OPTION'),
('UPD','FB48281_QS_SUBMISSION'),
('UPD','FB48281_SUPPLIER_SCORE'),
('UPD','FB49014_DATAVIEWS_OLD'),
('UPD','FB50430_DEL_SHEET_HISTORY'),
('UPD','FB50430_DEL_SHEET_INHRTD_VALUE'),
('UPD','FB50430_DEL_SHEET_VALUE'),
('UPD','FB50430_DEL_SHEET_VALUE_CHANGE'),
('UPD','FB50430_DEL_SHEET_VALUE_FILE'),
('UPD','FB50430_DEL_VAL'),
('UPD','FB50430_DEL_VAL_CHANGE'),
('UPD','FB50430_DEL_VAL_FILE'),
('UPD','FB50430_SHEET'),
('UPD','FB50430_SHEET_HISTORY'),
('UPD','FB50430_SHEET_INHRTD_VALUE'),
('UPD','FB50430_SHEET_VALUE'),
('UPD','FB50430_SHEET_VALUE_CHANGE'),
('UPD','FB50430_SHEET_VALUE_FILE'),
('UPD','FB50430_VAL'),
('UPD','FB50430_VAL_CHANGE'),
('UPD','FB50430_VAL_FILE'),
('UPD','FB52294_DUPLICATE_INDS'),
('UPD','FB5276'),
('UPD','FB55857_NW_PACK'),
('UPD','FB59403'),
('UPD','FB59532_RMV'),
('UPD','FB59532_VAL'),
('UPD','FB59532_VAL2'),
('UPD','FB59754'),
('UPD','FB59754_1'),
('UPD','FB59754_2'),
('UPD','FB59754_3'),
('UPD','FB59754_4'),
('UPD','FB59754_5'),
('UPD','FB63770_AUDIT_CLOSURE_TYPE'),
('UPD','FB67755'),
('UPD','FB70127_IND'),
('UPD','FB70156_SHEET'),
('UPD','FB74206'),
('UPD','FB75315_METERS_FOR_RECOMPUTE'),
('UPD','FB77454'),
('UPD','FB8111_AFFLICTED'),
('UPD','FB8111_DELETED_SIV'),
('UPD','FB8111_DELETED_VAL'),
('UPD','FB8111_INSERTED_VAL'),
('UPD','FB8111_MESSAGE'),
('UPD','FB8111_VAL_TO_DELETE'),
('UPD','FB8111_VAL_TO_REMERGE'),
('UPD','FB9742'),
('UPD','FB9742_PHILIPS'),
('UPD','OLD_ALERT_TEMPLATE'),
('UPD','OLD_CUSTOMER'),
('UPD','OLD_DELEGATION'),
('UPD','OLD_DELEGATION_IND'),
('UPD','OLD_DELEGATION_REGION'),
('UPD','OLD_FIEP_IND'),
('UPD','OLD_GRONTMIJ_VAL'),
('UPD','OLD_MUTUAL_ROLE'),
('UPD','OLD_RANGE_IND_MEMBER'),
('UPD','OLD_RANGE_REGION_MEMBER'),
('UPD','OLD_SHEET_VALUE'),
('UPD','XXX_FB34471'),
('UPD','XXX_FEED_INTERVAL'),
('UPD','XXX_JBOSS_ABINBEV_ALERTS'),
('UPD','XXX_OTTO_DEFS'),
('UPD','XX_20140506_TAB_USER'),
('UPD','XX_44024'),
('UPD','XX_ALERT_TEMPLATE'),
('UPD','XX_ALERT_TEMPLATE_BODY'),
('UPD','XX_APP_IND'),
('UPD','XX_C'),
('UPD','XX_CASA_INT_MAP'),
('UPD','XX_CAUAT_IND'),
('UPD','XX_CAUAT_LAYOUT'),
('UPD','XX_CAUAT_MODEL_MAP'),
('UPD','XX_CHENG'),
('UPD','XX_CMSREC_TIMESTAMP'),
('UPD','XX_CMS_ALERT_TYPE'),
('UPD','XX_CPJ_QSA'),
('UPD','XX_CSRIMP_CHN_CRD_20141105'),
('UPD','XX_CUSTOMER_ALERT_TYPE'),
('UPD','XX_D'),
('UPD','XX_DAVE_FIGA_20140124'),
('UPD','XX_DEL'),
('UPD','XX_DELEG_REGIONS'),
('UPD','XX_DELGP'),
('UPD','XX_DEL_2'),
('UPD','XX_DEL_3'),
('UPD','XX_DEL_4'),
('UPD','XX_DEL_5'),
('UPD','XX_DEL_6'),
('UPD','XX_DEL_7'),
('UPD','XX_DIANA_IND'),
('UPD','XX_DIANA_MAP'),
('UPD','XX_DIANA_REGION'),
('UPD','XX_DSM_DATAVIEW_RECOVERY'),
('UPD','XX_DUFF'),
('UPD','XX_DUSTAN'),
('UPD','XX_EXCL'),
('UPD','XX_FB12656_STPLS_REGS_TO_DEL'),
('UPD','XX_FB12772'),
('UPD','XX_FB16614_DEFAULTS'),
('UPD','XX_FB20646_BIDVEST_MISSING'),
('UPD','XX_FB20646_BIDVEST_ROLES'),
('UPD','XX_FB20859'),
('UPD','XX_FB20859_2'),
('UPD','XX_FB20859_DEST'),
('UPD','XX_FB20859_DEST2'),
('UPD','XX_FB23764'),
('UPD','XX_FB24348_AFTER'),
('UPD','XX_FB24348_BEFORE'),
('UPD','XX_FB28536_RESTORE_SHEET_VALUE'),
('UPD','XX_FB28536_SV'),
('UPD','XX_FB28536_SV_ACCURACY'),
('UPD','XX_FB28536_SV_CHANGE'),
('UPD','XX_FB28536_SV_CHANGE_FILE'),
('UPD','XX_FB28536_SV_FILE'),
('UPD','XX_FB28536_SV_HIDDEN_CACHE'),
('UPD','XX_FB28536_SV_IDS'),
('UPD','XX_FB28536_S_INHERITED_VALUE'),
('UPD','XX_FB31783_IND_TR'),
('UPD','XX_FB34455_20140601'),
('UPD','XX_FB41974_DATAVIEW'),
('UPD','XX_FB41974_TPL_REPORT'),
('UPD','XX_FB41974_TPL_REPORT_TAG'),
('UPD','XX_FB41974_TPL_REPORT_TAG2'),
('UPD','XX_FB41974_TPL_REPORT_TAG3'),
('UPD','XX_FB41974_TPL_REPORT_TAG_DV'),
('UPD','XX_FB41974_TPL_REPORT_TAG_DV2'),
('UPD','XX_FB41974_T_R_T_DV_REGION'),
('UPD','XX_FB44024'),
('UPD','XX_FB44294'),
('UPD','XX_FB44776'),
('UPD','XX_FB49750'),
('UPD','XX_FB49776'),
('UPD','XX_FB53478'),
('UPD','XX_FILE_UPLOAD'),
('UPD','XX_FLOW_ITEM_ALERT'),
('UPD','XX_FLOW_STATE'),
('UPD','XX_FLOW_STATE_TRANSITION'),
('UPD','XX_FLOW_TRANSITION_ALERT'),
('UPD','XX_FLOW_TRANSITION_ALERT_ROLE'),
('UPD','XX_FRIDGE'),
('UPD','XX_GMCR'),
('UPD','XX_GMCR_JAN'),
('UPD','XX_GPM'),
('UPD','XX_GP_COST'),
('UPD','XX_GP_COV'),
('UPD','XX_GP_DEAD'),
('UPD','XX_GP_IND'),
('UPD','XX_GP_MAIL'),
('UPD','XX_GP_MEASURE'),
('UPD','XX_GP_MEASURE_CONVERSION'),
('UPD','XX_GP_METER_FIX'),
('UPD','XX_GP_VAL'),
('UPD','XX_GSK_GROUP_MEMBERS'),
('UPD','XX_HEI_ACL'),
('UPD','XX_HEI_REPORT'),
('UPD','XX_HEI_REPORT_TAG'),
('UPD','XX_HEI_REPORT_TAG_DATAVIEW'),
('UPD','XX_HEI_REPORT_TAG_DV_REGION'),
('UPD','XX_HEI_REPORT_TAG_EVAL'),
('UPD','XX_HEI_REPORT_TAG_EVAL_COND'),
('UPD','XX_HEI_REPORT_TAG_IND'),
('UPD','XX_HEI_REPORT_TAG_LOGGING_FORM'),
('UPD','XX_HEI_REPORT_TAG_TEXT'),
('UPD','XX_HEI_SO'),
('UPD','XX_HMPO_2014'),
('UPD','XX_ID'),
('UPD','XX_ILT'),
('UPD','XX_IMG_VAL'),
('UPD','XX_IMP_VAL'),
('UPD','XX_IND_VAL_RULE_2014_01_13'),
('UPD','XX_INIT_USR'),
('UPD','XX_LINDE'),
('UPD','XX_LLK'),
('UPD','XX_LLT'),
('UPD','XX_MARF'),
('UPD','XX_MARFIG_DID'),
('UPD','XX_MEASURE'),
('UPD','XX_MEASURE_IMP'),
('UPD','XX_METER_END_DATE_FIX'),
('UPD','XX_METER_UPDATE_RESULTS'),
('UPD','XX_METLIFE_METER_IND_UPDATE'),
('UPD','XX_MRI'),
('UPD','XX_N'),
('UPD','XX_NESTLE_SYS_MANAGED_IND'),
('UPD','XX_NES_APPR'),
('UPD','XX_NES_CHK'),
('UPD','XX_NES_CLN'),
('UPD','XX_NES_DEL'),
('UPD','XX_NES_DISABLED'),
('UPD','XX_NES_NAP'),
('UPD','XX_NES_ND'),
('UPD','XX_NES_NEW_APPR'),
('UPD','XX_NES_NEW_REGION'),
('UPD','XX_NEWPORTS'),
('UPD','XX_NFD'),
('UPD','XX_NN'),
('UPD','XX_NOMURA_METER'),
('UPD','XX_OM_DELEG_IND'),
('UPD','XX_OM_TRAVEL_IND'),
('UPD','XX_P'),
('UPD','XX_PH'),
('UPD','XX_PHCH'),
('UPD','XX_PHILIPS_VAL'),
('UPD','XX_PH_JLL'),
('UPD','XX_PH_RM'),
('UPD','XX_PROCESS_CAS_DEFAULT'),
('UPD','XX_PROP'),
('UPD','XX_R'),
('UPD','XX_R4'),
('UPD','XX_REGION_TAG_PATH'),
('UPD','XX_SCAA'),
('UPD','XX_SKANSKA_ACL'),
('UPD','XX_SKANSKA_DELEGATION'),
('UPD','XX_SKANSKA_DELEGATION_DATE'),
('UPD','XX_SKANSKA_DELEGATION_IND'),
('UPD','XX_SKANSKA_DELEGATION_REGION'),
('UPD','XX_SKANSKA_DELEGATION_ROLE'),
('UPD','XX_SKANSKA_DELEGATION_USER'),
('UPD','XX_SKANSKA_DELEG_IND_FORM_EXPR'),
('UPD','XX_SKANSKA_DELEG_IND_GROUP'),
('UPD','XX_SKANSKA_FILE_UPLOAD'),
('UPD','XX_SKANSKA_FORM_EXPR'),
('UPD','XX_SKANSKA_GROUP_MEMBERS'),
('UPD','XX_SKANSKA_GROUP_TABLE'),
('UPD','XX_SKANSKA_SHEET'),
('UPD','XX_SKANSKA_SHEET_HISTORY'),
('UPD','XX_SKANSKA_SHEET_VALUE'),
('UPD','XX_SKANSKA_SHEET_VALUE_ACC'),
('UPD','XX_SKANSKA_SHEET_VALUE_CHANGE'),
('UPD','XX_SKANSKA_SHEET_VALUE_FILE'),
('UPD','XX_SKANSKA_SO'),
('UPD','XX_SR_ACL'),
('UPD','XX_SR_DELEGATION'),
('UPD','XX_SR_DELEGATION_IND'),
('UPD','XX_SR_DELEGATION_IND_DESC'),
('UPD','XX_SR_DELEGATION_REGION'),
('UPD','XX_SR_DELEGATION_REGION_DESC'),
('UPD','XX_SR_DELEGATION_ROLE'),
('UPD','XX_SR_DELEGATION_USER'),
('UPD','XX_SR_DELEG_IND_FORM_EXPR'),
('UPD','XX_SR_DELEG_IND_GROUP'),
('UPD','XX_SR_FILE_UPLOAD'),
('UPD','XX_SR_FORM_EXPR'),
('UPD','XX_SR_GROUP_MEMBERS'),
('UPD','XX_SR_GROUP_TABLE'),
('UPD','XX_SR_SHEET'),
('UPD','XX_SR_SHEET_HISTORY'),
('UPD','XX_SR_SHEET_VALUE'),
('UPD','XX_SR_SHEET_VALUE_ACCURACY'),
('UPD','XX_SR_SHEET_VALUE_CHANGE'),
('UPD','XX_SR_SHEET_VALUE_FILE'),
('UPD','XX_SR_SO'),
('UPD','XX_SUBSTANCE_PROCESS_USE'),
('UPD','XX_SUBSTANCE_PROCESS_USE_CHAN'),
('UPD','XX_SUBSTANCE_REGION_PROCESS'),
('UPD','XX_SV'),
('UPD','XX_SV2'),
('UPD','XX_T3'),
('UPD','XX_TAB'),
('UPD','XX_TAG_HIERARCHY'),
('UPD','XX_TGM'),
('UPD','XX_TIFEN'),
('UPD','XX_TIFF'),
('UPD','XX_TIFF2'),
('UPD','XX_TIFF_AUD'),
('UPD','XX_TIFF_VAL'),
('UPD','XX_TIFF_VAL_IND'),
('UPD','XX_TISHM'),
('UPD','XX_TISH_ISS'),
('UPD','XX_TO_REACTIVATE'),
('UPD','XX_UNICREDIT_INDS'),
('WHITBREAD','FB82444_CURRENT_SUPPLIER_SCORE'),
('WHITBREAD','FB82444_INVITATION'),
('WHITBREAD','FB82444_INVITATION_QNR_TYPE'),
('WHITBREAD','FB82444_QNR_SHARE_LOG_ENTRY'),
('WHITBREAD','FB82444_QNR_STATUS_LOG_ENTRY'),
('WHITBREAD','FB82444_QS_ANSWER_FILE'),
('WHITBREAD','FB82444_QS_ANSWER_LOG'),
('WHITBREAD','FB82444_QS_RESPONSE_FILE'),
('WHITBREAD','FB82444_QS_RESPONSE_POSTIT'),
('WHITBREAD','FB82444_QS_SUBMISSION_FILE'),
('WHITBREAD','FB82444_QUESTIONNAIRE'),
('WHITBREAD','FB82444_QUESTIONNAIRE_INVITATI'),
('WHITBREAD','FB82444_QUESTIONNAIRE_SHARE'),
('WHITBREAD','FB82444_QUICK_SURVEY_ANSWER'),
('WHITBREAD','FB82444_QUICK_SURVEY_RESPONSE'),
('WHITBREAD','FB82444_QUICK_SURVEY_SUBMISSIO'),
('WHITBREAD','FB82444_SUPPLIER_SCORE_LOG'),
('WHITBREAD','FB82444_SUPPLIER_SURVEY_RESPON')
	)) loop
		dbms_output.put_line('drop table '||r.owner||'.'||r.table_name);
		execute immediate 'drop table '||r.owner||'.'||r.table_name;
	end loop;
end;
/

declare
	v_sql varchar2(4000);
	v_cols varchar2(4000);
begin
	for r in (
		select * from all_indexes where table_owner!=owner and table_owner not in ('SYS')
	) loop
		v_cols := '';
		for s in (
			select aie.column_expression, aic.column_name from all_ind_columns aic 
			  left join all_ind_expressions aie on aic.index_owner = aie.index_owner and aic.index_name = aie.index_name and aic.column_position = aie.column_position
			  where aic.index_owner = r.owner and aic.index_name = r.index_name 
			order by aic.column_position ) loop
			v_cols := v_cols || case when v_cols is null then '' else ', ' end;
			if s.column_expression is not null then
				v_cols := v_cols || s.column_expression;
			else			
				v_cols := v_cols || s.column_name;
			end if;
		end loop;
		v_sql := 'create ';
		if r.uniqueness = 'UNIQUE' then
			v_sql := v_sql || 'unique ';
		end if;
		v_sql := v_sql ||'index ' ||r.table_owner||'.'||r.index_name||' on '||r.table_owner||'.'||r.table_name||' ('||v_cols||');';
		dbms_output.put_line('drop index '||r.owner||'.'||r.index_name);
		dbms_output.put_line(v_sql);
	end loop;
end;
/

begin
	for r in (select table_name from all_tables where owner='MAIL' and table_name in (
		'FULLTEXT_INDEX_JOB', 'FULLTEXT_INDEX')) loop
		execute immediate 'drop table mail.'||r.table_name||' cascade constraints';
	end loop;
end;
/

begin
	for r in (select object_name from all_objects where owner='MAIL' and object_name in (	
		'FULLTEXT_INDEX_PKG') and object_type='PACKAGE') loop
		execute immediate 'drop package mail.'||r.object_name;
	end loop;
end;
/

-- *** Grants ***

-- ** Cross schema constraints ***

-- *** Views ***
-- Please paste the content of the view and add a comment referencing the path of the create_views file which will contain your view changes.

-- *** Data changes ***
-- RLS

-- Data

-- ** New package grants **

-- *** Conditional Packages ***

-- *** Packages ***
@latest3103_packages

@update_tail
