-- Please update version.sql too -- this keeps clean builds in sync
define version=2803
define minor_version=0
define is_combined=0
@update_header

-- *** DDL ***
ALTER TABLE CSRIMP.FLOW_STATE_ROLE DROP CONSTRAINT PK_FLOW_STATE_ROLE DROP INDEX;
ALTER TABLE CSRIMP.FLOW_STATE_ROLE ADD CONSTRAINT UC_FLOW_STATE_ROLE
	UNIQUE (CSRIMP_SESSION_ID, FLOW_STATE_ID, ROLE_SID, GROUP_SID);

ALTER TABLE CSRIMP.FLOW_STATE_TRANSITION_ROLE DROP CONSTRAINT PK_FLOW_STATE_TRANS_ROLE DROP INDEX;
ALTER TABLE CSRIMP.FLOW_STATE_TRANSITION_ROLE ADD CONSTRAINT UC_FLOW_STATE_TRANS_ROLE
	UNIQUE (CSRIMP_SESSION_ID, FLOW_STATE_TRANSITION_ID, FROM_STATE_ID, ROLE_SID, GROUP_SID);

ALTER TABLE CSRIMP.FLOW_TRANSITION_ALERT_ROLE DROP CONSTRAINT PK_FLOW_TRANSITION_ALERT_ROLE DROP INDEX;
ALTER TABLE CSRIMP.FLOW_TRANSITION_ALERT_ROLE ADD CONSTRAINT UC_FLOW_TRANSITION_ALERT_ROLE
	UNIQUE (CSRIMP_SESSION_ID, FLOW_TRANSITION_ALERT_ID, ROLE_SID, GROUP_SID);

-- *** Packages ***
@../csrimp/imp_body

@update_tail
