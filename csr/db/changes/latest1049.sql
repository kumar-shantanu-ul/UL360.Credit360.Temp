-- Please update version.sql too -- this keeps clean builds in sync
define version=1049
@update_header

ALTER TABLE CSR.DELEG_IND_GROUP DROP CONSTRAINT DELEGINDGROUP_DELEG;

ALTER TABLE CSR.DELEG_IND_GROUP ADD (
  CONSTRAINT DELEGINDGROUP_DELEG 
  FOREIGN KEY (APP_SID, DELEGATION_SID) 
  REFERENCES CSR.DELEGATION (APP_SID,DELEGATION_SID)
  ON DELETE CASCADE ENABLE VALIDATE);
  
ALTER TABLE CSR.DELEG_IND_DELEG_IND_GROUP DROP CONSTRAINT DELINDGRPDELIND_DELINDGRP;
  
ALTER TABLE CSR.DELEG_IND_DELEG_IND_GROUP ADD (
  CONSTRAINT DELINDGRPDELIND_DELINDGRP 
  FOREIGN KEY (APP_SID, DELEGATION_SID, DELEG_IND_GROUP_ID) 
  REFERENCES CSR.DELEG_IND_GROUP (APP_SID,DELEGATION_SID,DELEG_IND_GROUP_ID)
  ON DELETE CASCADE ENABLE VALIDATE);

@update_tail
