define version=108
@update_header

CREATE TABLE chain.COMPONENT_DOCUMENT(
    APP_SID            NUMBER(10, 0)    DEFAULT SYS_CONTEXT('SECURITY', 'APP') NOT NULL,
    COMPONENT_ID       NUMBER(10, 0)    NOT NULL,
    FILE_UPLOAD_SID    NUMBER(10, 0)    NOT NULL,
    KEY                VARCHAR2(50)     NOT NULL,
    CONSTRAINT PK364 PRIMARY KEY (APP_SID, COMPONENT_ID, FILE_UPLOAD_SID)
)
;


ALTER TABLE chain.COMPONENT_DOCUMENT ADD CONSTRAINT RefFILE_UPLOAD901 
    FOREIGN KEY (APP_SID, FILE_UPLOAD_SID)
    REFERENCES chain.FILE_UPLOAD(APP_SID, FILE_UPLOAD_SID)
;

ALTER TABLE chain.COMPONENT_DOCUMENT ADD CONSTRAINT RefCOMPONENT902 
    FOREIGN KEY (APP_SID, COMPONENT_ID)
    REFERENCES chain.COMPONENT(APP_SID, COMPONENT_ID)
;

ALTER TABLE chain.COMPONENT_DOCUMENT ADD CONSTRAINT RefCUSTOMER903 
    FOREIGN KEY (APP_SID)
    REFERENCES csr.CUSTOMER(APP_SID)
;


@update_tail