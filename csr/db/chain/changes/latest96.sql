define version=96
@update_header

-- 
-- SEQUENCE: TASK_CHANGE_GROUP_ID_SEQ 
--

CREATE SEQUENCE CHAIN.TASK_CHANGE_GROUP_ID_SEQ
    START WITH 1
    INCREMENT BY 1
    NOMINVALUE
    NOMAXVALUE
    CACHE 20
    NOORDER
;

ALTER TABLE chain.TASK ADD (CHANGE_GROUP_ID NUMBER(10, 0));

CREATE TABLE chain.TASK_INVITATION_QNR_TYPE(
    APP_SID                  NUMBER(10, 0)    DEFAULT SYS_CONTEXT('SECURITY', 'APP') NOT NULL,
    TASK_ID                  NUMBER(10, 0)    NOT NULL,
    INVITATION_ID            NUMBER(10, 0)    NOT NULL,
    QUESTIONNAIRE_TYPE_ID    NUMBER(10, 0)    NOT NULL,
    CONSTRAINT PK346 PRIMARY KEY (APP_SID, TASK_ID)
)
;

ALTER TABLE chain.TASK_INVITATION_QNR_TYPE ADD CONSTRAINT RefINVITATION_QNR_TYPE872 
    FOREIGN KEY (APP_SID, INVITATION_ID, QUESTIONNAIRE_TYPE_ID)
    REFERENCES chain.INVITATION_QNR_TYPE(APP_SID, INVITATION_ID, QUESTIONNAIRE_TYPE_ID)
;

ALTER TABLE chain.TASK_INVITATION_QNR_TYPE ADD CONSTRAINT RefTASK873 
    FOREIGN KEY (APP_SID, TASK_ID)
    REFERENCES chain.TASK(APP_SID, TASK_ID)
;

@..\chain_pkg
@..\card_pkg
@..\upload_pkg
@..\task_pkg
@..\invitation_pkg
@..\chain_link_pkg

@..\card_body
@..\upload_body
@..\task_body
@..\invitation_body
@..\chain_link_body


@update_tail
