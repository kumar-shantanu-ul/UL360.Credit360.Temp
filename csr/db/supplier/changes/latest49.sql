-- Please update version.sql too -- this keeps clean builds in sync
define version=49
@update_header

ALTER TABLE SUPPLIER.ALL_PRODUCT DROP COLUMN PRODUCT_STATUS_ID;

ALTER TABLE SUPPLIER.ALL_PRODUCT DROP COLUMN STATUS_CHANGED_DTM;

ALTER TABLE SUPPLIER.ALL_PRODUCT DROP COLUMN DUE_DATE;

ALTER TABLE SUPPLIER.ALL_PRODUCT DROP COLUMN DECLARATION_MADE_BY_SID;
/

DROP TABLE PRODUCT_STATUS;
/

CREATE OR REPLACE VIEW PRODUCT
(PRODUCT_ID, PRODUCT_CODE, DESCRIPTION, SUPPLIER_COMPANY_SID, ACTIVE, DELETED, APP_SID)
AS 
SELECT AL.PRODUCT_ID, AL.PRODUCT_CODE, AL.DESCRIPTION, AL.SUPPLIER_COMPANY_SID, AL.ACTIVE, AL.DELETED, AL.APP_SID
FROM ALL_PRODUCT AL
WHERE DELETED = 0;

@update_tail
