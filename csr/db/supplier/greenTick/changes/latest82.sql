-- Please update version.sql too -- this keeps clean builds in sync
define version=82
@update_header

-- A new score!
INSERT INTO SUPPLIER.GT_SCORE_TYPE (GT_SCORE_TYPE_ID, SCORE_COL_NAME, DESCRIPTION) 
VALUES (24 , 'SCORE_ENERGY_DIST', 'Energy in Distribution');

ALTER TABLE SUPPLIER.GT_SCORES_COMBINED
ADD (SCORE_ENERGY_DIST NUMBER(10,2));

ALTER TABLE SUPPLIER.GT_SCORES
ADD (SCORE_ENERGY_DIST NUMBER(10,2));

-- set all blank SCORE_ENERGY_DIST to 1 - default score anyway
UPDATE GT_SCORES SET SCORE_ENERGY_DIST = 1;
UPDATE GT_SCORES_COMBINED SET SCORE_ENERGY_DIST = 1;

ALTER TABLE SUPPLIER.GT_TARGET_SCORES
ADD (MAX_SCORE_ENERGY_DIST NUMBER(10,2));

ALTER TABLE SUPPLIER.GT_TARGET_SCORES
ADD (MIN_SCORE_ENERGY_DIST NUMBER(10,2));

-- fix a bug on live where you can't save a target score with no range
ALTER TABLE SUPPLIER.GT_TARGET_SCORES_LOG
MODIFY(GT_PRODUCT_RANGE_ID  NULL);

@update_tail